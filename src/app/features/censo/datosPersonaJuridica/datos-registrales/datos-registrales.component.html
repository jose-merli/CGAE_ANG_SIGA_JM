<p-growl [(value)]="msgs" (onHover)="clear()" life="30000"></p-growl>
<div class="busqueda-container">
  <!--DATOS REGISTRALES-->
  <div class="card">
    <div class="card-header header-ficha" (click)="abreCierraFicha('registrales')">
      <div *ngIf="!esFichaActiva('registrales')" class="form-row">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado">
            <i class="far fa-address-book icon-ficha"></i>
          </div>
        </div>
        <div class="col-lg-11 col-md-10">
          <div class="d-flex justify-content-start mb-1">
            <label class="mr-auto title-ficha">{{"pestana.fichaCliente.datosRegistrales" | translate}}</label>
          </div>
          <div class="d-flex justify-content-between">
            <label>{{"censo.general.literal.FechaConstitucion" | translate}}
              <span>{{body.fechaConstitucion}}</span>
            </label>
            <label>{{"censo.consultaDatosRegistrales.literal.Resenia" | translate}}
              <span>{{body.resena}}</span>
            </label>
            <label>{{"censo.consultaDatosRegistrales.literal.objSocial" | translate}}
              <span>{{body.objSocial}}</span>
            </label>
            <label>{{"censo.consultaDatosRegistrales.literal.numRegistro" | translate}}
              <span>{{body.numeroRegistro}}</span>
            </label>
            <i *ngIf="!esFichaActiva('registrales')" class="fa fa-angle-down float-right"></i>
          </div>
        </div>
      </div>
      <div *ngIf="esFichaActiva('registrales')" class=" header-ficha-open d-flex justify-content-start align-items-center">
        <div class="img-colegiado">
          <i class="far fa-address-book icon-ficha"></i>
        </div>
        <label class="title-ficha">{{"pestana.fichaCliente.datosRegistrales" | translate}}</label>
        <i class="fa fa-angle-up ml-auto"></i>
      </div>
    </div>
    <!--cuerpo datos colegiales-->

    <div *ngIf="esFichaActiva('registrales')" class="card-body card-body-ficha">
      <div class="row">
        <div class="bloque col-lg-6 col-md-6">
          <div class="form-row">
            <div class="form-group col-lg-6 col-md-6">
              <label>{{"censo.consultaDatosRegistrales.literal.objSocial" | translate}} (*)</label>
              <input [(disabled)]="camposDesactivados" [(ngModel)]="body.objetoSocial" type="text" class="form-control" onchange="desactivadoGuardar()"
                pInputText>
            </div>
            <div class="form-group col-lg-6 col-md-6">
              <label>{{"censo.consultaDatosRegistrales.literal.Resenia" | translate}} (*)</label>
              <input [(disabled)]="camposDesactivados" [(ngModel)]="body.resena" type="text" class="form-control" pInputText>
            </div>
            <div class="form-group col-lg-6 col-md-6">
              <label>{{"censo.consultaDatosRegistrales.literal.numPoliza" | translate}} </label>
              <input [(disabled)]="camposDesactivados" [(ngModel)]="body.numeroPoliza" type="text" class="form-control" pInputText>
            </div>
            <div class="form-group col-lg-6 col-md-6">
              <label>{{"censo.consultaDatosRegistrales.literal.Compania" | translate}}</label>
              <input [(disabled)]="camposDesactivados" [(ngModel)]="body.companiaAseg" type="text" class="form-control" pInputText>
            </div>


            <div class="form-group col-lg-6 col-md-6 form-group-date">
              <label>{{"censo.general.literal.FechaConstitucion" | translate}} (*)</label>
              <p-calendar [(disabled)]="camposDesactivados" [monthNavigator]="true" [yearNavigator]="true" yearRange="1930:2050" [(ngModel)]="fechaConstitucion"
                [locale]="es" [utc]="true" icon="far fa-calendar-alt" dateFormat="dd/mm/yy" showIcon="true"></p-calendar>
                <div *ngIf="fechaCorrecta == false">
                  <label class="labelError">La fecha no puede ser superior a la actual</label>
                </div>
            </div>
            <div class="form-group col-lg-6 col-md-6 form-group-date">
              <label>{{"censo.consultaDatos.literal.fechaBaja" | translate}}</label>
              <p-calendar [(disabled)]="camposDesactivados" [monthNavigator]="true" [yearNavigator]="true" yearRange="1930:2050" [(ngModel)]="fechaBaja"
                [locale]="es" [utc]="true" icon="far fa-calendar-alt" dateFormat="dd/mm/yy" showIcon="true"></p-calendar>
                <div *ngIf="fechaBajaCorrecta == false">
                  <label class="labelError">La fecha de baja no puede ser anterior a la fecha de constitución</label>
                </div>
            </div>
            <div class="form-group col-lg-6 col-md-6">
              <label>{{"censo.fichaCliente.literal.actprofesional" | translate}} </label>
              <br>
              <p-multiSelect [(disabled)]="camposDesactivados" [defaultLabel]="textFilter" styleClass="widthAll" [(ngModel)]='selectActividad'
                [options]="actividadesDisponibles" optionLabel="label" [selectedItemsLabel]="textSelected" maxSelectedLabels="1"
                [panelStyle]="{width:'100%'}"></p-multiSelect>
            </div>
          </div>
        </div>

        <div class="bloque col-lg-6 col-md-6">
          <div class="form-row">
            <div class="form-row col-lg-6 col-md-6">
              <div class="col-lg-12 col-md-12">
                <label>{{"censo.consultaDatosRegistrales.literal.numRegistro" | translate}} (*)</label>
              </div>
              <div class="form-group col-lg-4 col-md-4">
                <input [(ngModel)]="body.prefijoNumsspp" type="text" class="form-control" [(disabled)]="prefijoBlock" pInputText>
              </div>
              <div class="form-group col-lg-4 col-md-4">
                <input [(disabled)]="camposDesactivados" [(ngModel)]="body.contadorNumsspp" type="text" class="form-control" pInputText>
                <div *ngIf="contadorNoCorrecto == true">
                  <label class="labelError">Solo números</label>
                </div>
              </div>
              <div class="form-group col-lg-4 col-md-4">
                <input [(disabled)]="camposDesactivados" [(ngModel)]="body.sufijoNumsspp" type="text" class="form-control" pInputText>
              </div>
            </div>

            <div class="form-group col-lg-6 col-md-6">
              <label>{{"censo.consultaDatosRegistrales.literal.idRegProv" | translate}}</label>
              <input [(disabled)]="camposDesactivados" [(ngModel)]="body.identificadorRegistroProvincial" type="text" class="form-control"
                pInputText>
            </div>
            <div class="form-group col-lg-6 col-md-6 form-group-date">
              <label>{{"censo.consultaDatosRegistrales.literal.fechaRegistro" | translate}}</label>
              <p-calendar [(disabled)]="camposDesactivados" [monthNavigator]="true" [yearNavigator]="true" yearRange="1930:2050" [(ngModel)]="fechaRegistro"
                [locale]="es" [utc]="true" icon="far fa-calendar-alt" dateFormat="dd/mm/yy" showIcon="true"></p-calendar>
            </div>
            <div class="form-group col-lg-6 col-md-6 form-group-date">
              <label>{{"censo.consultaDatosRegistrales.literal.fechaCancelacion" | translate}}</label>
              <p-calendar [(disabled)]="camposDesactivados" [monthNavigator]="true" [yearNavigator]="true" yearRange="1930:2050" [(ngModel)]="fechaFin"
                [locale]="es" [utc]="true" icon="far fa-calendar-alt" dateFormat="dd/mm/yy" showIcon="true"></p-calendar>
            </div>
            <div class="form-check col-lg-6 col-md-6">
              <br>
              <label class="form-group-label">{{"censo.busquedaClientes.noColegiados.sociedadesProfesionales" | translate}}</label>              &nbsp;&nbsp;
              <p-checkbox [(disabled)]="camposDesactivados" [(ngModel)]='sociedadProfesional' binary="true" (ngModelChange)="onChangeSociedad()"></p-checkbox>

            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="esFichaActiva('registrales')" class="card-footer">
      <div class="text-right main-button ">

        <button (click)="search()" [(disabled)]="camposDesactivados" pButton type="button " icon="fa fa-undo " iconPos="left" label="{{ 'general.boton.restablecer' | translate}}"></button>
        <button (click)="guardar()" [disabled]="desactivadoGuardar()" pButton type="button " icon="far fa-save " iconPos="left" label="{{ 'general.boton.guardar' | translate}}"></button>


      </div>
    </div>
  </div>
</div>

<div *ngIf="progressSpinner" class="overlay-spinner">
  <div class="loader"></div>
</div>
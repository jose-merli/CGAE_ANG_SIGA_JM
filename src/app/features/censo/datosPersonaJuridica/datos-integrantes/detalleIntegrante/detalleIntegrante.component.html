<p-growl [(value)]="msgs" (onHover)="clear()" life="30000"></p-growl>

<div class="busqueda-container">
  <div class="header-title">
    <i class="fa fa-square"></i>
    <p>{{"menu.censo" | translate}}
      <i class="fa fa-angle-right"></i> {{'menu.censo.buscarSociedades' | translate}}
      <i class="pl-1 fa fa-angle-right"></i>{{"gratuita.operarEJG.literal.datosIntegrantes" | translate}}</p>
  </div>
  <div class="card">
    <div class="card-header header-ficha" (click)="abrirFicha('identificacion')">
      <div *ngIf="!esFichaActiva('identificacion')" class="form-row">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado">
            <i class="fa fa-users icon-ficha"> </i>
          </div>
        </div>
        <div class="col-lg-11 col-md-10">
          <div class="d-flex justify-content-start mb-1">
            <label class="mr-auto title-ficha">{{"censo.busquedaClientes.literal.datosIdentificacion" | translate}}</label>
          </div>
          <div class="d-flex justify-content-between">
            <label>{{"administracion.usuarios.literal.NIF" | translate}}
              <span>{{ body.nifCif }}</span>
            </label>
            <label>{{"administracion.parametrosGenerales.literal.nombre" | translate}}
              <span>{{ body.nombre }}</span>
            </label>
            <label>{{"censo.busquedaClientes.literal.apellido1" | translate}}
              <span>{{ body.apellidos1 }}</span>
            </label>
            <label>{{"censo.busquedaClientes.literal.apellido2" | translate}}
              <span>{{ body.apellidos2 }} </span>
            </label>
            <i [ngClass]="{ 'fa fa-angle-up': openFicha, 'fa fa-angle-down': !openFicha} "></i>
          </div>
        </div>
      </div>
      <div *ngIf="esFichaActiva('identificacion')" class=" header-ficha-open d-flex justify-content-start align-items-center">
        <div class="img-colegiado">
          <i class="fa fa-users icon-ficha"> </i>
        </div>
        <label class="title-ficha">{{"censo.busquedaClientes.literal.datosIdentificacion" | translate}}</label>
        <i class="fa fa-angle-up ml-auto"></i>
      </div>
    </div>

    <!--cuerpo datos identificacion-->

    <div *ngIf="esFichaActiva('identificacion')" class="card-body card-body-ficha">
      <div class="row">
        <div class="form-group col-lg-3 col-md-6">
          <label>{{"administracion.usuarios.literal.NIF" | translate}} (*)</label>
          <input type="text" class="form-control" [(ngModel)]="body.nifCif" [(disabled)]="isDisablednifCif" pInputText>
        </div>
        <div class="form-group col-lg-3 col-md-6">
          <label>{{"administracion.parametrosGenerales.literal.nombre" | translate}} (*)</label>
          <input type="text" class="form-control" [(ngModel)]="body.nombre" [(disabled)]="isDisabledNombre" pInputText>
        </div>
        <div class="form-group col-lg-3 col-md-6">
          <label>{{"censo.busquedaClientes.literal.apellido1" | translate}} (*)</label>
          <input type="text" class="form-control" [(ngModel)]="body.apellidos1" [(disabled)]="isDisabledApellidos1" pInputText>
        </div>
        <div class="form-group col-lg-3 col-md-6">
          <label>{{"censo.busquedaClientes.literal.apellido2" | translate}}</label>
          <input [(ngModel)]="body.apellidos2" type="text" class="form-control" [(disabled)]="isDisabledApellidos2" pInputText>
        </div>
      </div>
      <br>

      <!--END DATOS GENERALES-->
    </div>
  </div>

  <!-- COMIENZA COLEGIACION -->

  <div class="card">
    <div class="card-header header-ficha" (click)="abrirFicha('colegiacion')">
      <div *ngIf="!esFichaActiva('colegiacion')" class="form-row">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado">
            <i class="fa fa-users icon-ficha"> </i>
          </div>
        </div>
        <div class="col-lg-11 col-md-10">
          <div class="d-flex justify-content-start mb-1">
            <label class="mr-auto title-ficha">{{"censo.busquedaClientes.literal.datosColegiacion" | translate}}</label>
          </div>
          <div class="d-flex justify-content-between">
            <label>{{"censo.busquedaClientesAvanzada.literal.tipoColegio" | translate}}
              <span>{{ descripcionTipoColegio.label }}</span>
            </label>
            <label>{{"censo.datosDireccion.literal.provincia" | translate}}
              <span>{{ descripcionProvincia.label }}</span>
            </label>
            <label>{{"censo.resultadoDuplicados.numeroColegiado" | translate}}
              <span>{{ body.numColegiado }}</span>
            </label>
            <i [ngClass]="{ 'fa fa-angle-up': openFicha, 'fa fa-angle-down': !openFicha} "></i>
          </div>
        </div>
      </div>
      <div *ngIf="esFichaActiva('colegiacion')" class=" header-ficha-open d-flex justify-content-start align-items-center">
        <div class="img-colegiado">
          <i class="fa fa-users icon-ficha"> </i>
        </div>
        <label class="title-ficha">{{"censo.busquedaClientes.literal.datosColegiacion" | translate}}</label>
        <i class="fa fa-angle-up ml-auto"></i>
      </div>
    </div>

    <!--COMIENZO COLEGIACION-->

    <div *ngIf="esFichaActiva('colegiacion')" class="card-body card-body-ficha">
      <div class="row">
        <div class="form-group col-lg-3 col-md-6">
          <label>{{"censo.busquedaClientesAvanzada.literal.tipoColegio" | translate}} (*)</label>
          <p-dropdown [(ngModel)]="body.idTipoColegio" (ngModelChange)="actualizarDescripcionTipoColegio()" class="select-form" [options]="colegiosArray"
            [(disabled)]="isDisabledTipoColegio"></p-dropdown>

        </div>
        <div class="form-group col-lg-3 col-md-6">
          <label>{{"censo.busquedaClientesAvanzada.literal.colegio" | translate}}</label>
          <input type="text" [(ngModel)]="body.colegio" class="form-control" [(disabled)]="isDisabledColegio" pInputText>
        </div>
        <div class="form-group col-lg-3 col-md-6">
          <label>{{"censo.datosDireccion.literal.provincia" | translate}}</label>
          <p-dropdown [(ngModel)]="body.idProvincia" [(disabled)]="isDisabledProvincia" (ngModelChange)="actualizarDescripcionProvincia()"
            class="select-form" [options]="provinciasArray"></p-dropdown>
        </div>
        <div class="form-group col-lg-3 col-md-6">
          <label>{{"censo.resultadoDuplicados.numeroColegiado" | translate}}</label>
          <input type="text" class="form-control" [(ngModel)]="body.numColegiado" [(disabled)]="isDisabledNumColegio" pInputText>
        </div>
      </div>
      <br>

      <!--END DATOS GENERALES-->
    </div>
  </div>

  <!-- COMIENZA VINCULACION -->
  <div class="card">
    <div class="card-header header-ficha" (click)="abrirFicha('vinculacion')">
      <div *ngIf="!esFichaActiva('vinculacion')" class="form-row">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado">
            <i class="fa fa-users icon-ficha"> </i>
          </div>
        </div>
        <div class="col-lg-11 col-md-10">
          <div class="d-flex justify-content-start mb-1">
            <label class="mr-auto title-ficha">{{"censo.busquedaClientes.literal.cargo" | translate}}</label>
          </div>
          <div class="d-flex justify-content-between">
            <label>{{"censo.consultaComponentesJuridicos.literal.fechaCargo" | translate}}
              <span>{{ body.fechaCargo }}</span>
            </label>
            <label>{{"censo.consultaComponentesJuridicos.literal.fechaFinCargo" | translate}}
              <span>{{ body.fechaBajaCargo }}</span>
            </label>
            <label>{{"censo.consultaComponentesJuridicos.literal.cargo" | translate}}
              <span>{{ descripcionCargo.label }}</span>
            </label>
            <label> {{"censo.consultaComponentesJuridicos.literal.descripcioncargo" | translate}}
              <span>{{ body.cargo }}</span>
            </label>
            <label>{{"censo.consultaComponentesJuridicos.literal.Participacion" | translate}}
              <span>{{ body.capitalSocial }}</span>
            </label>
            <i [ngClass]="{ 'fa fa-angle-up': openFicha, 'fa fa-angle-down': !openFicha} "></i>
          </div>
        </div>
      </div>
      <div *ngIf="esFichaActiva('vinculacion')" class=" header-ficha-open d-flex justify-content-start align-items-center">
        <div class="img-colegiado">
          <i class="fa fa-users icon-ficha"> </i>
        </div>
        <label class="title-ficha">{{"censo.busquedaClientes.literal.cargo" | translate}}</label>
        <i class="fa fa-angle-up ml-auto"></i>
      </div>
    </div>

    <!--cuerpo datos vinculacion-->

    <div *ngIf="esFichaActiva('vinculacion')" class="card-body card-body-ficha">
      <div class="d-flex align-items-end row">
        <div class="col-lg-3 col-md-6">
          <div class="form-row">
            <div class="form-group col-lg-6 col-md-6">
              <label>{{"censo.consultaComponentesJuridicos.literal.fechaCargo" | translate}}</label>
              <p-calendar [(ngModel)]="fechaCarga" dateFormat="dd/mm/yy" icon="far fa-calendar-alt" showIcon="true" [monthNavigator]="true"
                [yearNavigator]="true" yearRange="1930:2050" [(disabled)]="historico" [locale]="es" [utc]="true"></p-calendar>
            </div>
            <div class="form-group col-lg-6 col-md-6">
              <label>{{"censo.consultaDatos.literal.fechaFin" | translate}}</label>
              <p-calendar [(ngModel)]="fechaBajaCargo" dateFormat="dd/mm/yy" icon="far fa-calendar-alt" showIcon="true" [monthNavigator]="true"
                [yearNavigator]="true" yearRange="1930:2050" [(disabled)]="historico" [locale]="es" [utc]="true"></p-calendar>
            </div>
          </div>
        </div>
        <div class="form-check col-lg-1 col-md-2 mb-4">
          <p-checkbox [(ngModel)]='body.socio' binary="true" [(disabled)]="historico" label="Socio"></p-checkbox>
        </div>
        <div class="form-group col-lg-2 col-md-4">
          <label>{{"censo.consultaComponentesJuridicos.literal.cargo" | translate}}</label>
          <p-dropdown [(ngModel)]="body.idCargo" (ngModelChange)="actualizarDescripcionCargo()" [(disabled)]="historico" class="select-form"
            [options]="cargosArray"></p-dropdown>
        </div>
        <div class="form-group col-lg-4 col-md-8">
          <label>{{"censo.consultaComponentesJuridicos.literal.descripcioncargo" | translate}}</label>
          <input type="text" class="form-control" [(disabled)]="historico" [(ngModel)]="body.cargo" pInputText>
        </div>
        <div class="form-group col-lg-2 col-md-4">
          <label>{{"censo.consultaComponentesJuridicos.literal.Participacion" | translate}}</label>
          <input type="text" class="form-control" [(disabled)]="historico" [(ngModel)]="body.capitalSocial" ui-number-mask="3" (ngModelChange)="onChange($event)"
            pInputText>
        </div>


      </div>
      <br>

      <!--END DATOS GENERALES-->
    </div>
  </div>
  <div class="mt-3 text-right main-button ">
    <button (click)="backTo()" pButton type="button" icon="fa fa-angle-left" iconPos="left" label="{{ 'general.boton.volver' | translate}}"></button>
    <button *ngIf="editar" (click)="guardar();" pButton type="button" icon="	fa fa-edit " [(disabled)]="historico" iconPos="left"
      label="{{ 'general.boton.guardarCerrar' | translate}}"></button>
  </div>
</div>

<div *ngIf="progressSpinner" class="overlay-spinner">
  <!--<p-progressSpinner animationDuration="1s"></p-progressSpinner>-->
  <div class="loader"></div>
</div>
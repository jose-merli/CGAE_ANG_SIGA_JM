<p-growl [(value)]="msgs" (onHover)="clear()" life="30000"></p-growl>
<div class="header-title">
    <i class="fa fa-square"></i>
    <p>{{ "menu.censo" | translate }}
        <i class="fa fa-angle-right"></i>{{"menu.solicitudIncorporacion" | translate}}
    </p>
</div>
<div *ngIf="!dniDisponible && !noExistePersona && !pendienteAprobacion" class="info-limit d-flex justify-content-center align-items-center mb-1">
    <i class="fa fa-info-circle pr-2"></i>
    <div class="d-inline-block">
        <div>
            <span *ngIf="!vieneDeBusqueda" class="pr-2 text-left">{{"censo.solicitudIncorporacion.literal.seUsaDniIntroducido" | translate}}.</span>
            <span *ngIf="vieneDeBusqueda && noEsColegiado" class="pr-2 text-left">{{"censo.SolicitudIncorporacion.literal.cargaPersonaExistente.sistema" | translate}}.</span>
            <span *ngIf="vieneDeBusqueda && !noEsColegiado" class="pr-2 text-left">{{"censo.SolicitudIncorporacion.literal.cargaPersonaExistente" | translate}}.</span>
            <!-- <span *ngIf="vieneDeBusqueda && pendienteAprobacion" class="pr-2 text-left">Para aprobar una solicitud debe rellenar los datos bancarios.</span> -->
        </div>
    </div>
</div>

<div class="busqueda-container">
    <!--DATOS COLEGIACIÓN-->
    <div class="card">
        <div class="card-header header-ficha" (click)="abreCierraFichaColegiacion()">
            <div [hidden]="fichaColegiacion" class="form-row">
                <div class="col-lg-1 col-md-2">
                    <div class="img-colegiado">
                        <i *ngIf="!existeImagen" class="far fa-address-book icon-ficha"></i>
                        <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                    </div>
                </div>
                <div class="col-lg-11 col-md-10">
                    <div class="d-flex justify-content-start mb-1">
                        <label class="mr-auto title-ficha">{{"censo.nuevaSolicitud.headerColegiacion" | translate}}</label>
                    </div>
                    <div class="d-flex justify-content-between">
                        <label>{{"censo.nuevaSolicitud.estado" | translate }}
                            <span>{{solicitudEditar.estadoSolicitud}}</span>
                        </label>
                        <label>{{"censo.nuevaSolicitud.fechaEstado" | translate }}
                            <span>{{solicitudEditar.fechaEstado | date: 'dd/MM/yyyy'}}</span>
                        </label>
                        <label>{{"censo.nuevaSolicitud.fechaSolicitud" | translate }}
                            <span>{{solicitudEditar.fechaSolicitud | date: 'dd/MM/yyyy'}}</span>
                        </label>
                        <i [hidden]="fichaColegiacion" class="fa fa-angle-down float-right"></i>
                    </div>
                </div>
            </div>
            <div *ngIf="fichaColegiacion" class=" header-ficha-open d-flex justify-content-start align-items-center">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="far fa-address-book icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
                <label class="title-ficha">{{"censo.nuevaSolicitud.headerColegiacion" | translate}}</label>
                <i class="fa fa-angle-up ml-auto"></i>
            </div>
        </div>

        <!--cuerpo datos colegiación-->
        <div [hidden]="!fichaColegiacion" class="card-body card-body-ficha">
            <div class="row">
                <div class="bloque col-lg-5 col-md-5">
                    <div class="row">
                        <div class="form-group col-lg-4 col-md-5">
                            <label>{{"censo.nuevaSolicitud.estado" | translate }}</label>
                            <p-dropdown [disabled]="true" class="select-form" [(ngModel)]="estadoSolicitudSelected" [options]="estadosSolicitud" placeholder="{{'general.boton.seleccionar' | translate}}"></p-dropdown>
                        </div>
                        <div class="form-group col-lg-4 col-md-5">
                            <label>{{"censo.nuevaSolicitud.fechaEstado" | translate }} (*)</label>
                            <app-fecha [(value)]="solicitudEditar.fechaEstado" [disabled]="consulta" [utc]="false" (valueChangeSelected)="fillFechaEstado($event)"
                                (valueChangeInput)="fillFechaEstado($event)"></app-fecha>
                        </div>
                        <div class="form-group col-lg-4 col-md-5" style="float:right">
                            <label>{{"censo.nuevaSolicitud.fechaSolicitud" | translate }} (*)</label>
                            <app-fecha [(value)]="solicitudEditar.fechaSolicitud" [disabled]="consulta" [utc]="false" (valueChangeSelected)="fillFechaSolicitud($event)"
                                (valueChangeInput)="fillFechaSolicitud($event)"></app-fecha>
                        </div>
                    </div>
                </div>
                <div class="bloque col-lg-7 col-md-7">
                    <div class="form-group col-lg-12 col-md-12">
                        <label>{{"censo.nuevaSolicitud.observaciones" | translate}}</label>
                        <textarea [disabled]="consulta" [rows]="10" [cols]="10" pInputTextarea [(ngModel)]="solicitudEditar.observaciones"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--FICHA DATOS SOLICITUD-->
    <div class="card">
        <div class="card-header header-ficha" (click)="abreCierraFichaSolicitud()">
            <div [hidden]="fichaSolicitud" class="form-row">
                <div class="col-lg-1 col-md-2">
                    <div class="img-colegiado">
                        <i *ngIf="!existeImagen" class="fas fa-file-alt icon-ficha"></i>
                        <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                    </div>
                </div>
                <div class="col-lg-11 col-md-10">
                    <div class="d-flex justify-content-start mb-1">
                        <label class="mr-auto title-ficha">{{"censo.nuevaSolicitud.headerSolicitud" | translate}}</label>
                    </div>
                    <div class="d-flex justify-content-between">
                        <label>{{ "censo.nuevaSolicitud.tipoSolicitud" | translate}}
                            <span>{{solicitudEditar.tipoSolicitud}}</span>
                        </label>
                        <label>{{"censo.nuevaSolicitud.modalidad" | translate}}
                            <span>{{solicitudEditar.modalidad}}</span>
                        </label>
                        <i *ngIf="!fichaSolicitud" class="fa fa-angle-down float-right"></i>
                    </div>
                </div>
            </div>
            <div *ngIf="fichaSolicitud" class=" header-ficha-open d-flex justify-content-start align-items-center">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fas fa-file-alt icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
                <label class="title-ficha">{{"censo.nuevaSolicitud.headerSolicitud" | translate}}</label>
                <i class="fa fa-angle-up ml-auto"></i>
            </div>
        </div>
        <!--cuerpo datos modalidad-->
        <div [hidden]="!fichaSolicitud" class="card-body card-body-ficha">
            <div class="form-row">
                <div class="form-group col-lg-3 col-md-4">
                    <label>{{"censo.nuevaSolicitud.solicitudDe" | translate}} (*)</label>
                    <p-dropdown [disabled]="consulta" class="select-form" [(ngModel)]="tipoSolicitudSelected" [options]="tiposSolicitud" placeholder="{{'general.boton.seleccionar' | translate}}"></p-dropdown>
                </div>
                <div class="form-group col-lg-3 col-md-4">
                    <label>{{"censo.nuevaSolicitud.tipoColegiacion" | translate}} (*)</label>
                    <p-dropdown [disabled]="consulta" class="select-form" [(ngModel)]="tipoColegiacionSelected" placeholder="{{'general.boton.seleccionar' | translate}}"
                        [options]="tipoColegiacion"></p-dropdown>
                </div>
                <div class="form-group col-lg-3 col-md-4">
                    <label>{{"censo.nuevaSolicitud.modDocumentacion" | translate}} (*)</label>
                    <p-dropdown [disabled]="consulta" class="select-form" [(ngModel)]="modalidadDocumentacionSelected" placeholder="{{'general.boton.seleccionar' | translate}}"
                        [options]="modalidadDocumentacion"></p-dropdown>
                </div>
                <div class="form-group col-lg-3 col-md-4">
                    <label>{{"censo.nuevaSolicitud.fechaincorporacion" | translate}} (*)</label>
                    <app-fecha [(value)]="solicitudEditar.fechaIncorporacion" [disabled]="consulta" [utc]="false" (valueChangeSelected)="fillFechaIncorporacion($event)"
                        (valueChangeInput)="fillFechaIncorporacion($event)"></app-fecha>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>{{"censo.nuevaSolicitud.numColegiado" | translate}}</label>
                    <input [(ngModel)]="solicitudEditar.numColegiado" [disabled]="consulta" type="text" class="form-control" [maxLength]="20"
                        (input)="onChangeNColegiado($event)" pInputText>
                    <div *ngIf="numColegiadoDisponible == false">
                        <small class="input-error" *ngIf="!numColegiadoDisponible">
                            <!-- {{"IBAN incorrecto"}} -->
                            {{"censo.resultadoDuplicados.numeroColegiadoUtilizado" | translate}}
                        </small>
                    </div>
                </div>
                <div class="form-group col-lg-2 col-md-2">
                    <br>
                    <p-checkbox [disabled]="consulta" binary="true" label="{{'censo.ws.literal.residente' | translate}}" (onChange)="onChangeResidente()"
                        [(ngModel)]="residente"></p-checkbox>
                </div>
            </div>
        </div>
    </div>

    <!--FICHA DATOS PERSONALES-->
    <div class="card">
        <div class="card-header header-ficha" (click)="abreCierraFichaPersonal()">
            <div [hidden]="fichaPersonal" class="form-row">
                <div class="col-lg-1 col-md-2">
                    <div class="img-colegiado">
                        <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                        <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                    </div>
                </div>
                <div class="col-lg-11 col-md-10">
                    <div class="d-flex justify-content-start mb-1">
                        <label class="mr-auto title-ficha">{{ "formacion.fichaInscripcion.datosPersonales.cabecera" | translate}}</label>
                    </div>
                    <div class="d-flex justify-content-between">
                        <label>
                            {{"censo.consultaDatosColegiacion.literal.numIden" | translate}}
                            <span>{{solicitudEditar.numeroIdentificacion}}</span>
                        </label>
                        <label>
                            {{"administracion.parametrosGenerales.literal.nombre" | translate}}
                            <span>{{solicitudEditar.nombre}}</span>
                        </label>
                        <label>
                            {{"gratuita.mantenimientoTablasMaestra.literal.apellidos" | translate}}
                            <span>{{solicitudEditar.apellidos}}</span>
                        </label>
                        <i *ngIf="!fichaPersonal" class="fa fa-angle-down float-right"></i>
                    </div>
                </div>
            </div>
            <div *ngIf="fichaPersonal" class=" header-ficha-open d-flex justify-content-start align-items-center">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
                <label class="title-ficha">{{ "formacion.fichaInscripcion.datosPersonales.cabecera" | translate}}</label>
                <i class="fa fa-angle-up ml-auto"></i>
            </div>
        </div>
        <!--cuerpo datos personales-->
        <div [hidden]="!fichaPersonal" class="card-body card-body-ficha">
            <div class="row">
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.SolicitudIncorporacion.literal.tipoIdentificacion" | translate}} (*)</label>
                    <p-dropdown disabled="true" class="select-form" [(ngModel)]="tipoIdentificacionSelected" placeholder="{{'general.boton.seleccionar' | translate}}"
                        [options]="tipoIdentificacion"></p-dropdown>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>{{"censo.consultaDatosColegiacion.literal.numIden" | translate}} (*)</label>
                    <input [disabled]="consulta" type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.numeroIdentificacion"
                        (ngModelChange)="onChangeNifCif()">
                    <!-- <small class="input-error" *ngIf="!checkIdentificacion(solicitudEditar.numeroIdentificacion) && solicitudEditar.numeroIdentificacion 
                     && solicitudEditar.numeroIdentificacion.length > 0">Documento no válido</small> -->
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.consultaDatosGenerales.literal.tratamiento" | translate}} (*)</label>
                    <p-dropdown [disabled]="consulta" class="select-form" [(ngModel)]="tratamientoSelected" [options]="tratamientos" placeholder="{{'general.boton.seleccionar' | translate}}"
                        [filter]="true" filterBy="label,labelSinTilde" filterMatchMode="contains"></p-dropdown>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"administracion.parametrosGenerales.literal.nombre" | translate}} (*)
                    </label>
                    <input [disabled]="consulta" type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.nombre">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.busquedaClientes.literal.apellido1" | translate}} (*)</label>
                    <input [disabled]="consulta" type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.apellido1">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.busquedaClientes.literal.apellido2" | translate}}</label>
                    <input [disabled]="consulta" type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.apellido2">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.busquedaClientesAvanzada.literal.sexo" | translate}}</label>
                    <p-dropdown [disabled]="consulta" class="select-form" [(ngModel)]="sexoSelected" [options]="comboSexo" placeholder="{{'general.boton.seleccionar' | translate}}"></p-dropdown>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.consultaDatosGenerales.literal.estadoCivil" | translate}}</label>
                    <p-dropdown [disabled]="consulta" class="select-form" [(ngModel)]="estadoCivilSelected" placeholder="{{'general.boton.seleccionar' | translate}}"
                        [options]="estadoCivil"></p-dropdown>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.SolicitudIncorporacion.literal.naturalDe" | translate}}</label>
                    <input [disabled]="consulta" type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.naturalDe">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.consultaDatosColegiacion.literal.fechaNac" | translate}} (*)</label>
                    <app-fecha [(value)]="solicitudEditar.fechaNacimiento" [disabled]="consulta" [utc]="false" (valueChangeSelected)="fillFechaNacimiento($event)"
                        (valueChangeInput)="fillFechaNacimiento($event)"></app-fecha>
                </div>
            </div>
        </div>

    </div>


    <!--FICHA DATOS DIRECCIÓN-->
    <div class="card">
        <div class="card-header header-ficha" (click)="abreCierraFichaDireccion()">
            <div [hidden]="fichaDireccion" class="form-row">
                <div class="col-lg-1 col-md-2">
                    <div class="img-colegiado">
                        <i *ngIf="!existeImagen" class="fa fa-map-marker icon-ficha"></i>
                        <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                    </div>
                </div>
                <div class="col-lg-11 col-md-10">
                    <div class="d-flex justify-content-start mb-1">
                        <label class="mr-auto title-ficha">{{"envios.definir.literal.datosdestino" | translate}}
                            <!--{{ "general.message.datos.generales" | translate}}-->
                        </label>
                        <!--<label class="registros-ficha">(0 registros)</label>-->
                    </div>
                    <div class="d-flex justify-content-between">
                        <label>
                            {{"censo.datosDireccion.literal.pais2" | translate}}
                            <span>{{solicitudEditar.pais}}</span>
                        </label>
                        <label>
                            {{"censo.consultaDirecciones.literal.direccion" | translate}}
                            <span>{{solicitudEditar.domicilio}}</span>
                        </label>
                        <label>
                            {{"censo.consultaDirecciones.literal.poblacion" | translate}}
                            <span>{{solicitudEditar.nombrePoblacion}}</span>
                        </label>
                        <i *ngIf="!fichaDireccion" class="fa fa-angle-down float-right"></i>
                    </div>
                </div>
            </div>
            <div *ngIf="fichaDireccion" class=" header-ficha-open d-flex justify-content-start align-items-center">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-map-marker icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
                <label class="title-ficha">
                    {{ "envios.definir.literal.datosdestino" | translate}}</label>
                <i class="fa fa-angle-up ml-auto"></i>
            </div>
        </div>
        <!--cuerpo datos dirección-->
        <div [hidden]="!fichaDireccion" class="card-body card-body-ficha">
            <div class="row">
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.datosDireccion.literal.pais2" | translate}} (*)
                    </label>
                    <p-dropdown [disabled]="consulta" placeholder="{{'general.boton.seleccionar' | translate}}" class="select-form" [(ngModel)]="paisSelected"
                        [options]="paises" placeholder="{{'general.boton.seleccionar' | translate}}" (onChange)="onChangePais($event)"></p-dropdown>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.consultaDirecciones.literal.direccion" | translate}} (*)
                    </label>
                    <input [disabled]="consulta" type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.domicilio">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.ws.literal.codigopostal" | translate}} (*)
                    </label>
                    <input *ngIf="!isPoblacionExtranjera" [disabled]="consulta" type="text" class="form-control" [maxLength]="5" [(ngModel)]="solicitudEditar.codigoPostal"
                        (ngModelChange)="onChangeCodigoPostal()" pInputText>
                    <input *ngIf="isPoblacionExtranjera" [(ngModel)]="solicitudEditar.codigoPostal" type="text" class="form-control" [maxLength]="5"
                        [disabled]="consulta" pInputText>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.datosDireccion.literal.provincia" | translate}}
                    </label>
                    <p-dropdown class="select-form" [(ngModel)]='provinciaSelected' [options]="provincias" [filter]="true" placeholder="{{'general.boton.seleccionar' | translate}}"
                        filterBy="label,labelSinTilde" filterMatchMode="contains" disabled></p-dropdown>

                    <!--<input type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.nombreProvincia">-->
                </div>
                <!-- <div class="form-group col-lg-3 col-md-3"> -->
                <!-- <label>
                        {{"censo.consultaDirecciones.literal.poblacion" | translate}}
                    </label> -->
                <!-- <p-dropdown #poblacion [disabled]="consulta || deshabilitarDireccion()" (input)="buscarPoblacion($event)" class="select-form"
                        [(ngModel)]="poblacionSelected" placeholder="{{'general.boton.seleccionar' | translate}}" [options]="poblaciones"
                        [filter]="true" filterBy="label,labelSinTilde" filterMatchMode="contains" [emptyFilterMessage]="resultadosPoblaciones"></p-dropdown> -->

                <!-- <input type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.nombrePoblacion">-->
                <!-- </div> -->
                <div *ngIf="!isPoblacionExtranjera" class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.consultaDirecciones.literal.poblacion" | translate}}
                    </label>
                    <p-dropdown #input2 class="select-form" [(ngModel)]='poblacionSelected' [filter]="true" filterBy="label,labelSinTilde" [disabled]="consulta || deshabilitarDireccion()"
                        [options]="poblaciones" (input)="buscarPoblacion($event)" [emptyFilterMessage]="resultadosPoblaciones"
                        id="dropdown">
                    </p-dropdown>

                </div>

                <div *ngIf="isPoblacionExtranjera" class="form-group col-lg-3 col-md-3">
                    <label>{{"censo.consultaDirecciones.literal.poblacion" | translate}} (*)</label>
                    <input [(ngModel)]="poblacionExtranjeraSelected" type="text" class="form-control" [maxLength]="99" pInputText>
                </div>

                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.ws.literal.telefono" | translate}} 1 (*)</label>
                    <input [disabled]="consulta" type="number" class="form-control" pInputText [(ngModel)]="solicitudEditar.telefono1">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.ws.literal.telefono" | translate}} 2</label>
                    <input [disabled]="consulta" type="number" class="form-control" pInputText [(ngModel)]="solicitudEditar.telefono2">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.ws.literal.fax" | translate}} 1</label>
                    <input [disabled]="consulta" type="number" class="form-control" pInputText [(ngModel)]="solicitudEditar.fax1">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.ws.literal.fax" | translate}} 2</label>
                    <input [disabled]="consulta" type="number" class="form-control" pInputText [(ngModel)]="solicitudEditar.fax2">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.datosDireccion.literal.telefonoMovil" | translate}}</label>
                    <input [disabled]="consulta" type="number" class="form-control" pInputText [(ngModel)]="solicitudEditar.movil">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>
                        {{"censo.datosDireccion.literal.correo" | translate}} (*)</label>
                    <input [disabled]="consulta" type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.correoElectronico">
                </div>
            </div>
        </div>
    </div>


    <!--FICHA DATOS BANCARIOS-->
    <div class="card">
        <div class="card-header header-ficha" (click)="abreCierraFichaBancaria()">
            <div [hidden]="fichaBancaria" class="form-row">
                <div class="col-lg-1 col-md-2">
                    <div class="img-colegiado">
                        <i *ngIf="!existeImagen" class="fa fa-credit-card icon-ficha"></i>
                        <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                    </div>
                </div>
                <div class="col-lg-11 col-md-10">
                    <div class="d-flex justify-content-start mb-1">
                        <label class="mr-auto title-ficha"> {{"censo.consultaDatosBancarios.cabecera" | translate}}</label>
                        <!--<label class="registros-ficha">(0 registros)</label>-->
                    </div>
                    <div class="d-flex justify-content-between">
                        <label>
                            {{"facturacion.devolucionManual.titularDomiciliacion" | translate}}
                            <span>{{solicitudEditar.titular}}</span>
                        </label>
                        <label>
                            {{"pys.gestionSolicitudes.literal.nCuenta" | translate}}
                            <span>{{solicitudEditar.iban}}</span>
                        </label>
                        <label>
                            {{"facturacion.cuentasBancarias.uso" | translate}}
                            <span *ngIf="solicitudEditar.abonoCargo =='C'">Cargo</span>
                            <span *ngIf="solicitudEditar.abonoCargo =='A'">Abono</span>
                            <span *ngIf="solicitudEditar.abonoCargo =='T'">Todas</span>
                        </label>
                        <i *ngIf="!fichaDireccion" class="fa fa-angle-down float-right"></i>
                    </div>
                </div>
            </div>
            <div *ngIf="fichaBancaria" class=" header-ficha-open d-flex justify-content-start align-items-center">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-credit-card icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
                <label class="title-ficha">
                    {{ "censo.consultaDatosBancarios.cabecera" | translate}}</label>
                <i class="fa fa-angle-up ml-auto"></i>
            </div>
        </div>
        <!--cuerpo datos bancarios-->
        <div [hidden]="!fichaBancaria" class="card-body card-body-ficha">
            <div class="row">
                <div class="form-group col-lg-3 col-md-3">
                    <label>{{"facturacion.devolucionManual.titularDomiciliacion" | translate}}</label>
                    <input [disabled]="consulta" type="text" class="form-control" pInputText [(ngModel)]="solicitudEditar.titular">
                </div>
                <!--<div class="form-group col-lg-3 col-md-3">
                    <label>Tipo de cuenta</label>
                    <p-multiSelect styleClass="widthAll" [filter]="false" [(ngModel)]="selectedTipoCuenta" [options]="tipoCuenta"
                        selectedItemsLabel="{0} grupos seleccionados" maxSelectedLabels="1" autoWidth="false"
                        defaultLabel="Elegir" maxSelectedLabels="1" optionLabel="name"></p-multiSelect>
                </div>-->
                <div class="form-group col-lg-3 col-md-3">
                    <label>{{"censo.mutualidad.literal.iban" | translate}}</label>
                    <input type="text" class="form-control" [disabled]="consulta" [(ngModel)]="solicitudEditar.iban" (ngModelChange)="autogenerarDatos()"
                        pInputText>
                    <div *ngIf="isValidIBAN() == false">
                        <small class="input-error" *ngIf="!isValidIBAN()">{{"IBAN incorrecto"}}</small>
                    </div>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <!-- (ngModelChange)="recuperarBicBanco()" -->
                    <label>{{"censo.fichaCliente.datosBancarios.cuentaBancaria.bic" | translate}}</label>
                    <input [(ngModel)]="solicitudEditar.bic" type="text" class="form-control" (ngModelChange)="recuperarBicBanco()" disabled
                        pInputText>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <label>{{"censo.tipoAbono.banco" | translate}}</label>
                    <input type="text" class="form-control" [(ngModel)]="solicitudEditar.banco" [disabled]="consulta" pInputText>
                </div>

                <div class="form-group col-lg-3 col-md-2">
                    <br>
                    <p-checkbox [disabled]="consulta" (onChange)="onChangeCargo()" binary="true" label="Cargo" [(ngModel)]="cargo"></p-checkbox>
                </div>
                <div class="form-group col-lg-3 col-md-2">
                    <br>
                    <p-checkbox [disabled]="consulta" (onChange)="onChangeCargo()" binary="true" label="Abono" [(ngModel)]="abono"></p-checkbox>
                </div>
                <div class="form-group col-lg-3 col-md-2">
                    <br>
                    <p-checkbox [disabled]="consulta" (onChange)="onChangeAbonoSJCS()" binary="true" label="Cuenta SJCS" [(ngModel)]="abonoJCS"></p-checkbox>
                </div>
            </div>
        </div>
    </div>

    <!--FICHA DATOS ALTER MUTUA-->
    <div *ngIf="consulta" class="card">
        <div class="card-header header-ficha">
            <div *ngIf="!fichaMutua" class="form-row">
                <div class="col-lg-1 col-md-2">
                    <div class="img-colegiado">
                        <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                        <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                    </div>
                </div>
                <div class="col-lg-11 col-md-10">
                    <div class="d-flex justify-content-start mb-1">
                        <label class="mr-auto title-ficha">Alter Mutua
                            <!--{{ "general.message.datos.generales" | translate}}-->
                        </label>
                        <!--<label class="registros-ficha">(0 registros)</label>-->
                    </div>
                    <div class="d-flex justify-content-between">
                        <label>
                            <a (click)="irAlterMutuaReta()">
                                <span style="color: blue; text-decoration: underline; cursor: pointer;">{{"pestana.fichaCliente.alterMutua.alternativa" | translate}}</span>
                            </a>
                        </label>
                        <label>
                            <a (click)="irOfertas()">
                                <span style="color: blue; text-decoration: underline; cursor: pointer;">{{"pestana.fichaCliente.alterMutua.oferta" | translate}}</span>
                            </a>
                        </label>
                        <i class="float-right"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--MUTUALIDAD DE LA ABOGACÍA-->
    <div *ngIf="consulta" class="card">
        <div class="card-header header-ficha">
            <div class="form-row">
                <div class="col-lg-1 col-md-2">
                    <div class="img-colegiado">
                        <i class="fas fa-link icon-ficha"></i>
                    </div>
                </div>
                <div class="col-lg-11 col-md-10">
                    <div class="d-flex justify-content-start mb-1">
                        <label class="mr-auto title-ficha">Mutualidad de la abogacía</label>
                    </div>
                    <div class="d-flex justify-content-between">
                        <label>
                            <a (click)="irPlanUniversal()">
                                <span style="color: blue; text-decoration: underline; cursor: pointer;">{{"pestana.fichaCliente.mutualidad.planProfesional" | translate}}</span>
                            </a>
                        </label>
                        <label>
                            <a (click)="irSegAccidentes()">
                                <span style="color: blue; text-decoration: underline; cursor: pointer;">{{"pestana.fichaCliente.mutualidad.seguroUniversal" | translate}}</span>
                            </a>
                        </label>
                        <i class="float-right"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-3 text-right main-button ">
        <button (click)="backTo()" pButton type="button " icon="fa fa-angle-left" iconPos="left" label="{{ 'general.boton.volver' | translate}}"></button>
        <button (click)="guardar(true)" *ngIf="!consulta" [disabled]="!isGuardar()" pButton type="button " icon="fa fa-save" iconPos="left"
            label="Guardar"></button>
        <button (click)="aprobarSolicitud()" [disabled]="isLetrado" *ngIf="(consulta || pendienteAprobacion) && (solicitudEditar.idEstado != '50' && solicitudEditar.idEstado != '30')"
            pButton type="button " icon="fas fa-check" iconPos="left" label="Aprobar "></button>
        <button (click)="denegarSolicitud()" [disabled]="isLetrado" *ngIf="(consulta || pendienteAprobacion) && (solicitudEditar.idEstado != '50' && solicitudEditar.idEstado != '30')"
            pButton type="button " icon="fas fa-times" iconPos="left" label="Denegar"></button>
        <button (click)="SolicitarCertificado()" *ngIf="consulta" disabled pButton type="button " icon="fas fa-certificate" iconPos="left"
            label="Solicitar certificado"></button>
    </div>
    <app-dialog></app-dialog>
</div>

<div *ngIf="progressSpinner" class="overlay-spinner">
    <!--<p-progressSpinner animationDuration="1s"></p-progressSpinner>-->
    <div class="loader"></div>
</div>
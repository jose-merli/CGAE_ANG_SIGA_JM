<p-growl [(value)]="msgs" (onHover)="clear()" life="30000"></p-growl>

<div class="header-title">
    <i class="fa fa-square"></i>
    <p>{{ 'menu.censo' | translate}}
        <i class="fa fa-angle-right"></i>
        <!--{{'censo.alterMutua.titulo' | translate}}-->Alternativa al RETA
    </p>
</div>


<div class="card">
    <!--datos propuesta-->
    <div class="card-header header-ficha" (click)="mostarDatosPropuesta()">
        <div [hidden]="datosPropuesta" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">Datos de colegiación</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>Tarífa
                        <span>{{tarifa}}</span>
                    </label>
                    <i [hidden]="fichaColegiacion" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosPropuesta" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">Datos de colegiación</label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <!--cuerpo datos propuesta-->
    <div [hidden]="!datosPropuesta" class="card-body card-body-ficha">
        <div class="form-row">
            <div class="form-group col-lg-3 col-md-3">
                <label>Modalidad de contratación</label>
                <p-dropdown class="select-form" [(ngModel)]='modContratacionSelected' [options]="comboModContratacion"
                    (onChange)="onchangeModalidad($event)" optionLabel="label" dataKey="value">
                </p-dropdown>
            </div>
            <div class="form-group col-lg-2 col-md-2">
                <br>
                <i *ngIf="modContratacionSelected != undefined && modContratacionSelected.label != ''" (click)="mostarPopUp()"
                    class="fas fa-info-circle" style="cursor:pointer"></i>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>Tarífa(€)</label>
                <input type="text" disabled="true" class="form-control" [(ngModel)]='tarifa' pInputText>
            </div>
        </div>
    </div>
</div>


<!-- Datos personales -->
<div class="card">
    <div class="card-header header-ficha" (click)="mostarDatosPersonales()">
        <div [hidden]="datosPersonales" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">Datos personales</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>Identificación
                        <span>{{asegurado.Identificador}}</span>
                    </label>
                    <label>Nombre
                        <span>{{asegurado.nombre}}</span>
                    </label>
                    <label>Apellidos
                        <span>{{asegurado.apellidos}}</span>
                    </label>
                    <i [hidden]="fichaColegiacion" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosPersonales" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">Datos personales</label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>

    <!--cuerpo datos personales-->
    <div [hidden]="!datosPersonales" class="card-body card-body-ficha">
        <div class="form-row">
            <div class="form-group col-lg-3 col-md-3">
                <label>Identificador</label>
                <input [disabled]="true" type="text" class="form-control" [(ngModel)]="asegurado.identificador"
                    pInputText>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>Nombre</label>
                <input type="text" [disabled]="true" class="form-control" [(ngModel)]="asegurado.nombre" pInputText>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>Apellidos</label>
                <input type="text" [disabled]="true" class="form-control" [(ngModel)]="asegurado.apellidos" pInputText>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>fecha de nacimiento</label>
                <p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange="1930:2050" [locale]="es" [utc]="true"
                    icon="far fa-calendar-alt" [disabled]="true" dateFormat="dd/mm/yy" showIcon="true" [(ngModel)]="asegurado.fechaNacimiento"></p-calendar>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>Sexo</label>
                <p-dropdown class="select-form" [(ngModel)]="sexoSelected" [options]="comboSexo" optionLabel="label"
                    dataKey="value" [disabled]="true"></p-dropdown>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>Estado civil</label>
                <p-dropdown class="select-form" [disabled]="true" [(ngModel)]="estadoCivilSelected" [options]="comboEstadoCivil"
                    optionLabel="label" dataKey="value"></p-dropdown>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>Colegio</label>
                <p-dropdown [disabled]="true" class="select-form" [(ngModel)]="ColegioSelected" [options]="comboColegios"
                    optionLabel="label" dataKey="value"></p-dropdown>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>Situación del ejercicio</label>
                <p-dropdown [disabled]="true" class="select-form" [(ngModel)]="tipoEjercicioSelected" [options]="comboTiposSolicitud"
                    optionLabel="label" dataKey="value"></p-dropdown>
            </div>
        </div>
    </div>
</div>


<!-- Datos contacto -->
<div class="card">
    <div class="card-header header-ficha" (click)="mostrarDatosContacto()">
        <div [hidden]="datosContacto" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="far fa-address-book icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">Datos de Contacto</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>Móvil
                        <span>{{asegurado.movil}}</span>
                    </label>
                    <label>Correo electrónico
                        <span>{{asegurado.mail}}</span>
                    </label>
                    <i [hidden]="datosContacto" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosContacto" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="far fa-address-book icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">Datos de Contacto</label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <!-- cuerpo datos contacto -->
    <div [hidden]="!datosContacto" class="card-body card-body-ficha">
        <div class="row">
            <div class="bloque col-lg-6 col-md-6">
                <div class="form-row">
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Medio de Comunicación</label>
                        <p-dropdown class="select-form" [(ngModel)]='comunicacionSelected' [options]="comboComunicacion"
                            optionLabel="label" dataKey="value"></p-dropdown>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Idioma</label>
                        <p-dropdown class="select-form" [(ngModel)]='idiomaSelected' [options]="comboIdioma"
                            optionLabel="label" dataKey="value"></p-dropdown>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Teléfono</label>
                        <input type="text" class="form-control" [(ngModel)]="asegurado.telefono" pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Teléfono 2</label>
                        <input type="text" class="form-control" [(ngModel)]="asegurado.telefono2" pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Móvil</label>
                        <input type="text" class="form-control" [(ngModel)]="asegurado.movil" pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Fax</label>
                        <input type="text" class="form-control" [(ngModel)]="asegurado.fax" pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Correo Electrónico</label>
                        <input type="text" class="form-control" [(ngModel)]="asegurado.mail" pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <br>
                        <p-checkbox binary="true" label="Acepta publicidad" [(ngModel)]="asegurado.publicidad"></p-checkbox>
                    </div>
                </div>
            </div>
            <div class="bloque col-lg-6 col-md-6">
                <div class="form-row">
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Domicilio</label>
                        <input type="text" class="form-control" [(ngModel)]="asegurado.domicilio" pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>País</label>
                        <p-dropdown class="select-form" [(ngModel)]="paisSelected" [options]="paises" optionLabel="label"
                            dataKey="value" (onChange)="onChangePais($event)"></p-dropdown>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>CP</label>
                        <input type="text" class="form-control" [(ngModel)]="asegurado.cp" pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Provincia</label>
                        <p-dropdown [disabled]="deshabilitarDireccion" class="select-form" [(ngModel)]="provinciaSelected"
                            [options]="provincias" optionLabel="label" dataKey="value"></p-dropdown>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Población</label>
                        <input [disabled]="deshabilitarDireccion" type="text" class="form-control" [(ngModel)]="asegurado.poblacion"
                            pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>Tipo Dirección</label>
                        <p-dropdown class="select-form" [(ngModel)]="tipoDirSelected" [options]="TipoDireccion"
                            optionLabel="label" dataKey="value"></p-dropdown>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!--datos bancarios-->
<div class="card">
    <div class="card-header header-ficha" (click)="mostrarDatosBancarios()">
        <div [hidden]="datosCuentaBancaria" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-credit-card icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">Datos bancarios</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>IBAN
                        <span>{{asegurado.iban}}</span>
                    </label>
                    <i [hidden]="datosCuentaBancaria" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosCuentaBancaria" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fa fa-credit-card icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">Datos bancarios
                <!--{{ "general.message.datos.generales" | translate}}--></label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>

    <!--cuerpo datos bancarios-->
    <div [hidden]="!datosCuentaBancaria" class="card-body card-body-ficha">
        <div class="form-row">
            <div class="bloque col-lg-6 col-md-6">
                <label>IBAN</label>
                <input type="text" class="form-control" [(ngModel)]="asegurado.iban" pInputText>
                <div *ngIf="isValidIBAN() == false">
                    <small class="input-error" *ngIf="!isValidIBAN()">{{"IBAN incorrecto"}}</small>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="card">

    <div class="card-header header-ficha" (click)="mostrarFamiliares()">
        <div [hidden]="datosFamiliares" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fas fa-users icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">Familiares</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>Numero de familiares
                        <span *ngIf="datos == null">0</span>
                        <span *ngIf="datos != null">{{datos.length}}</span>
                    </label>
                    <i [hidden]="datosFamiliares" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosFamiliares" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fas fa-users icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">Familiares
                <!--{{ "general.message.datos.generales" | translate}}--></label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <div [hidden]="!datosFamiliares" class="card-body card-body-ficha">
        <div class="form-row">

            <p-dataTable emptyMessage="{{ 'general.message.no.registros' | translate}}" [(selection)]="selectedDatos"
                (onRowSelect)="irDatosFamiliar(selectedDatos)" dataKey="idFamiliar" selectionMode="multiple"
                [responsive]="true" #table class="tabla-listado" [value]="datos" [sortOrder]="1" sortField="nombre"
                [paginator]="true" paginatorPosition="both" [rows]="selectedItem" pageLinks="4" [editable]="true"
                [sortField]="sortF" [sortOrder]="sortO" (onSort)="changeSort($event)">

                <p-column field="idParentesco" filterPlaceholder="{{'general.boton.search' | translate}}" [header]="cols[0].header"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-col let-car="rowData" pTemplate="body">
                        <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                        <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosFamiliar.idParentesco"
                            [options]="comboParentesco" (onChange)="onchangeParentesco($event)" optionLabel="label"
                            dataKey="value">
                        </p-dropdown>
                    </ng-template>

                </p-column>
                <p-column field="idSexo" [header]="cols[1].header" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-car="rowData" pTemplate="body">
                        <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                        <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosFamiliar.idSexo"
                            [options]="comboSexo" optionLabel="label" dataKey="value" (onChange)="onchangeSexo($event)"></p-dropdown>
                    </ng-template>
                </p-column>

                <p-column [sortable]="true" field="nombre" [header]="cols[2].header" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-car="rowData" pTemplate="body">
                        <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                        <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosFamiliar.nombre"
                            pInputText>
                    </ng-template>

                </p-column>

                <p-column [sortable]="true" field="apellidos" [header]="cols[3].header" [filter]="true"
                    filterPlaceholder="{{'general.boton.search' | translate}}" filterMatchMode="contains">
                    <ng-template let-col let-car="rowData" pTemplate="body">
                        <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                        <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosFamiliar.apellidos"
                            pInputText>
                    </ng-template>

                </p-column>

                <p-column field="idTipoIdentificacion" [header]="cols[4].header" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-car="rowData" pTemplate="body">
                        <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                        <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosFamiliar.idTipoIdentificacion"
                            [options]="comboTipoIdentificacion" optionLabel="label" dataKey="value" (onChange)="onchangeIdentificacion($event)"></p-dropdown>
                    </ng-template>

                </p-column>

                <p-column [sortable]="true" field="nIdentificacion" [header]="cols[5].header" [filter]="true"
                    filterPlaceholder="{{'general.boton.search' | translate}}" filterMatchMode="contains">
                    <ng-template let-col let-car="rowData" pTemplate="body">
                        <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                        <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosFamiliar.nIdentificacion"
                            pInputText>
                    </ng-template>
                </p-column>

                <p-column [sortable]="true" field="fechaNacimiento" [header]="cols[6].header" [filter]="true"
                    filterPlaceholder="{{'general.boton.search' | translate}}" filterMatchMode="contains">
                    <ng-template let-col let-car="rowData" pTemplate="body">
                        <span *ngIf="car[col.field] != ''">{{car[col.field] | date: 'dd/MM/yyyy'}}</span>
                        <p-calendar *ngIf="car[col.field] == undefined" [(ngModel)]="datosFamiliar.fechaNacimiento"
                            dateFormat="dd/mm/yy" [utc]="true" [locale]="es" [showIcon]="true">
                        </p-calendar>
                    </ng-template>

                </p-column>

                <ng-template pTemplate="paginatorLeft">
                    <div class="mostrar">
                        <label class="mt-2 pr-3 registros-totales">Mostrando registros del {{table.first + 1}}
                            al
                            {{table.first + table.rows}} de un total de {{table.totalRecords}}</label>
                        <label>{{ "general.message.mostrar" | translate}}</label>
                        <p-dropdown [(ngModel)]="selectedItem" [options]="rowsPerPage" (onChange)="onChangeRowsPerPages($event)"></p-dropdown>
                        <label class="pl-1"> {{"cargaMasivaDatosCurriculares.numRegistros.literal" |
                            translate}}</label>
                    </div>
                </ng-template>
                <p-footer>
                    <div class="text-right main-button">
                        <!--<button (click)="volver();" [(disabled)]="isVolver" pButton type="button" icon="fa fa-undo"
                                                    iconPos="left" label="{{ 'general.boton.restablecer' | translate}}"></button>-->
                        <button (click)="confirmEdit()" [disabled]="!isCrear || isInvalidFamiliar()" pButton type="button"
                            icon="far fa-save " iconPos="left" label="{{ 'general.boton.guardar' | translate}}"></button>
                        <!--<button (click)="confirmarBorrar()" [(disabled)]="isEliminar" pButton type="button" icon="fa fa-trash-alt"
                                                    iconPos="left" label="{{'general.boton.eliminar'  | translate}}"></button>-->
                        <button (click)="crear()" [disabled]="isCrear" pButton type="button" icon="fa fa-plus" iconPos="left"
                            label="{{ 'general.boton.new' | translate}}"></button>
                    </div>
                </p-footer>
            </p-dataTable>
        </div>
    </div>

</div>



<div class="card">
    <div class="card-header header-ficha" (click)="mostrarDatosBeneficiarios()">
        <div [hidden]="datosBeneficiarios" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fas fa-users icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">Beneficiarios</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>Beneficiarios
                        <span *ngIf="datosB == null">0</span>
                        <span *ngIf="datosB != null">{{datosB.length}}</span>
                    </label>
                    <i [hidden]="datosBeneficiarios" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosBeneficiarios" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fas fa-users icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">Beneficiarios
                <!--{{ "general.message.datos.generales" | translate}}--></label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <div [hidden]="!datosBeneficiarios" class="card-body card-body-ficha">
        <div class="form-row">
            <div class="col-lg-3 col-md-3">
                <label>Tipo beneficiario</label>
                <p-dropdown class="select-form" [options]="comboBeneficiario" [(ngModel)]="beneficiarioSelected"
                    optionLabel="label" dataKey="value" (onChange)="onChangeTipoBenef($event)"></p-dropdown>
            </div>
            <div *ngIf="beneficiarioSelected != undefined && beneficiarioSelected.value == '3'" class="col-lg-12 col-md-12">
                <p-dataTable emptyMessage="{{ 'general.message.no.registros' | translate}}" [(selection)]="selectedDatosB"
                    (onRowSelect)="irDatosHeredero(selectedDatos)" dataKey="idHeredero" selectionMode="multiple"
                    [responsive]="true" #tableB class="tabla-listado" [value]="datosB" [sortOrder]="1" sortField="nombre"
                    [paginator]="true" paginatorPosition="both" [rows]="selectedItem" pageLinks="4" [editable]="true"
                    [sortField]="sortF" [sortOrder]="sortO" (onSort)="changeSort($event)">

                    <p-column field="idParentesco" filterPlaceholder="{{'general.boton.search' | translate}}" [header]="cols[0].header"
                        [filter]="true" filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosHeredero.idParentesco"
                                [options]="comboParentesco" (onChange)="onchangeParentesco($event)" optionLabel="label"
                                dataKey="value">
                            </p-dropdown>
                        </ng-template>

                    </p-column>
                    <p-column field="idSexo" [header]="cols[1].header" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                        filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosHeredero.idSexo"
                                [options]="comboSexo" optionLabel="label" dataKey="value" (onChange)="onchangeSexo($event)"></p-dropdown>
                        </ng-template>
                    </p-column>

                    <p-column [sortable]="true" field="nombre" [header]="cols[2].header" [filter]="true"
                        filterPlaceholder="{{'general.boton.search' | translate}}" filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosHeredero.nombre"
                                pInputText>
                        </ng-template>

                    </p-column>

                    <p-column [sortable]="true" field="apellidos" [header]="cols[3].header" [filter]="true"
                        filterPlaceholder="{{'general.boton.search' | translate}}" filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosHeredero.apellidos"
                                pInputText>
                        </ng-template>

                    </p-column>

                    <p-column field="idTipoIdentificacion" [header]="cols[4].header" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                        filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosHeredero.idTipoIdentificacion"
                                [options]="comboTipoIdentificacion" optionLabel="label" dataKey="value" (onChange)="onchangeIdentificacion($event)"></p-dropdown>
                        </ng-template>

                    </p-column>

                    <p-column [sortable]="true" field="nIdentificacion" [header]="cols[5].header" [filter]="true"
                        filterPlaceholder="{{'general.boton.search' | translate}}" filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosHeredero.nIdentificacion"
                                pInputText>
                        </ng-template>
                    </p-column>

                    <p-column [sortable]="true" field="fechaNacimiento" [header]="cols[6].header" [filter]="true"
                        filterPlaceholder="{{'general.boton.search' | translate}}" filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field] | date: 'dd/MM/yyyy'}}</span>
                            <p-calendar *ngIf="car[col.field] == undefined" [(ngModel)]="datosHeredero.fechaNacimiento"
                                dateFormat="dd/mm/yy" [utc]="true" [locale]="es" [showIcon]="true">
                            </p-calendar>
                        </ng-template>

                    </p-column>

                    <ng-template pTemplate="paginatorLeft">
                        <div class="mostrar">
                            <label class="mt-2 pr-3 registros-totales">Mostrando registros del {{table.first +
                                1}}
                                al
                                {{table.first + table.rows}} de un total de {{table.totalRecords}}</label>
                            <label>{{ "general.message.mostrar" | translate}}</label>
                            <p-dropdown [(ngModel)]="selectedItem" [options]="rowsPerPage" (onChange)="onChangeRowsPerPages($event)"></p-dropdown>
                            <label class="pl-1"> {{"cargaMasivaDatosCurriculares.numRegistros.literal" |
                                translate}}</label>
                        </div>
                    </ng-template>
                    <p-footer>
                        <div class="text-right main-button">
                            <!--<button (click)="volver();" [(disabled)]="isVolver" pButton type="button" icon="fa fa-undo"
                                                    iconPos="left" label="{{ 'general.boton.restablecer' | translate}}"></button>-->
                            <button (click)="confirmEditB()" [disabled]="!isCrear || isInvalidHeredero()" pButton type="button"
                                icon="far fa-save " iconPos="left" label="{{ 'general.boton.guardar' | translate}}"></button>
                            <!--<button (click)="confirmarBorrar()" [(disabled)]="isEliminar" pButton type="button" icon="fa fa-trash-alt"
                                                    iconPos="left" label="{{'general.boton.eliminar'  | translate}}"></button>-->
                            <button (click)="crearB()" [(disabled)]="isCrear" pButton type="button" icon="fa fa-plus"
                                iconPos="left" label="{{ 'general.boton.new' | translate}}"></button>
                        </div>
                    </p-footer>
                </p-dataTable>
            </div>
        </div>
    </div>
</div>


<div class="card">
    <div class="card-header header-ficha" (click)="mostrarObservaciones()">
        <div [hidden]="observaciones" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fas fa-align-left icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">Observaciones</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>Observaciones
                        <span>{{datosAlter.observaciones}}</span>
                    </label>
                    <i [hidden]="observaciones" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="observaciones" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fas fa-align-left icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">Observaciones
                <!--{{ "general.message.datos.generales" | translate}}--></label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <div [hidden]="!observaciones" class="card-body card-body-ficha">
        <div class="form-group col-lg-7 col-md-7">
            <label>Observaciones</label>
            <textarea [rows]="10" [(ngModel)]="datosAlter.observaciones" pInputTextarea></textarea>
        </div>
    </div>

</div>



<div class="mt-3 text-right main-button ">
    <button (click)="enviarDatosAlter()" [disabled]="!isEnviar()" pButton type="button " icon="fa fa-save" iconPos="left"
        label="Solicitar"></button>
    <button (click)="backTo()" pButton type="button " icon="fa fa-angle-left" iconPos="left" label="{{ 'general.boton.volver' | translate}}"></button>
</div>



<p-dialog class="alterMutuaInfo" [(visible)]="mostrarInfo" responsive="true" [draggable]="false" modal="modal"
    resizable="false" [width]="680">
    <p-header class="title">
        <label *ngIf="modContratacionSelected != undefined"><strong>{{modContratacionSelected.label}}</strong></label>
    </p-header>
    <div [innerHTML]="infoPropuesta.breve" *ngIf="modContratacionSelected != undefined" class="col-lg-12 col-md-12">
    </div>
    <div [innerHTML]="infoPropuesta.descripcion" *ngIf="modContratacionSelected != undefined" class="col-lg-12 col-md-12 "></div>
</p-dialog>

<p-dialog [(visible)]="!tienePropuesta" [closable]="false" responsive="true" [draggable]="false" modal="modal"
    resizable="false" [width]="680">
    <p-header class="title">
        <label><strong>Sin propuestas disponibles</strong></label>
    </p-header>
    <div *ngIf="propuestas != null" [innerHTML]="propuestas.mensaje" class="col-lg-12 col-md-12 ">
    </div>
    <p-footer>
        <div class="text-right main-button ">
            <button (click)="backTo()" pButton type="button" icon="fa-check" iconPos="left" label="Aceptar"></button>
        </div>
    </p-footer>
</p-dialog>

<p-dialog [(visible)]="showSolicitarSeguro" [closable]="false" responsive="true" [draggable]="false" modal="modal"
    resizable="false" [width]="680">
    <p-header class="title">
        <label><strong>Solicitar seguro</strong></label>
    </p-header>
    <div *ngIf="estadoSolicitudResponse != null" [innerHTML]="estadoSolicitudResponse.mensaje" class="col-lg-12 col-md-12 ">
    </div>
    <p-footer>
        <div class="text-right main-button ">
            <button (click)="buscarPropuestas()" pButton type="button" icon="fa-check" iconPos="left" label="Solicitar"></button>
            <button (click)="backTo()" pButton type="button " icon="fa fa-angle-left" iconPos="left" label="{{ 'general.boton.volver' | translate}}"></button>
        </div>
    </p-footer>
</p-dialog>

<p-dialog [(visible)]="tieneSolicitud" [closable]="false" responsive="true" [draggable]="false" modal="modal" resizable="false"
    [width]="680">
    <p-header class="title">
        <label><strong>Estado de la solicitud</strong></label>
    </p-header>
    <div *ngIf="estadoSolicitudResponse != null" [innerHTML]="estadoSolicitudResponse.mensaje" class="col-lg-12 col-md-12 ">
    </div>
    <p-footer>
        <div class="text-right main-button ">
            <button (click)="backTo()" pButton type="button" icon="fa-check" iconPos="left" label="Aceptar"></button>
        </div>
    </p-footer>
</p-dialog>

<div *ngIf="progressSpinner" class="overlay-spinner">
    <div class="loader"></div>
</div>
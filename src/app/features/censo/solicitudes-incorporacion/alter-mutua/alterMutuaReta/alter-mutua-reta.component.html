<p-growl [(value)]="msgs" (onHover)="clear()" life="30000"></p-growl>

<div class="header-title">
    <i class="fa fa-square"></i>
    <p>{{ 'menu.censo' | translate}}
        <i class="fa fa-angle-right"></i>
        {{ 'pestana.fichaCliente.alterMutua.alternativa' | translate}}
    </p>
</div>

<!-- Datos personales -->
<div class="card">
    <div class="card-header header-ficha" (click)="mostarDatosPersonales()">
        <div [hidden]="datosPersonales" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">{{"formacion.fichaInscripcion.datosPersonales.cabecera" | translate}}</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>{{"censo.fichaCliente.literal.identificacion" | translate}}
                        <span>{{asegurado.identificador}}</span>
                    </label>
                    <label>{{"administracion.parametrosGenerales.literal.nombre" | translate}}
                        <span>{{asegurado.nombre}}</span>
                    </label>
                    <label>{{"gratuita.mantenimientoTablasMaestra.literal.apellidos" | translate}}
                        <span>{{asegurado.apellidos}}</span>
                    </label>
                    <i [hidden]="fichaColegiacion" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosPersonales" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">{{"formacion.fichaInscripcion.datosPersonales.cabecera" | translate}}</label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>

    <!--cuerpo datos personales-->
    <div [hidden]="!datosPersonales" class="card-body card-body-ficha">
        <div class="form-row">
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.fichaCliente.literal.identificacion" | translate}}</label>
                <input [disabled]="true" type="text" class="form-control" [(ngModel)]="asegurado.identificador" pInputText>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"administracion.parametrosGenerales.literal.nombre" | translate}}</label>
                <input type="text" [disabled]="true" class="form-control" [(ngModel)]="asegurado.nombre" pInputText>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"gratuita.mantenimientoTablasMaestra.literal.apellidos" | translate}}</label>
                <input type="text" [disabled]="true" class="form-control" [(ngModel)]="asegurado.apellidos" pInputText>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.consultaDatosColegiacion.literal.fechaNac" | translate}}</label>
                <app-fecha [(value)]="asegurado.fechaNacimiento" [utc]="false" [disabled]="true" (valueChangeSelected)="fillFechaNacimientoAsegurado($event)"
                    (valueChangeInput)="fillFechaNacimientoAsegurado($event)"></app-fecha>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.busquedaClientesAvanzada.literal.sexo" | translate}}</label>
                <p-dropdown class="select-form" [(ngModel)]="sexoSelected" [options]="comboSexo" optionLabel="label" dataKey="value" [disabled]="true"></p-dropdown>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.consultaDatosGenerales.literal.estadoCivil" | translate}}</label>
                <p-dropdown class="select-form" [disabled]="true" [(ngModel)]="estadoCivilSelected" [options]="comboEstadoCivil" optionLabel="label"
                    dataKey="value"></p-dropdown>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.busquedaClientesAvanzada.literal.colegio" | translate}}</label>
                <p-dropdown [disabled]="true" class="select-form" [(ngModel)]="ColegioSelected" [options]="comboColegios" optionLabel="label"
                    dataKey="value"></p-dropdown>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.alterMutua.literal.situacionEjercicio" | translate}}</label>
                <p-dropdown [disabled]="true" class="select-form" [(ngModel)]="tipoEjercicioSelected" [options]="comboTiposSolicitud" optionLabel="label"
                    dataKey="value"></p-dropdown>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <!--datos propuesta-->
    <div class="card-header header-ficha" (click)="mostarDatosPropuesta()">
        <div [hidden]="datosPropuesta" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">{{"censo.busquedaClientes.literal.datosColegiacion" | translate}}</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>{{ "censo.alterMutua.literal.tarifa" | translate}}
                        <span>{{tarifa}}</span>
                    </label>
                    <i [hidden]="fichaColegiacion" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosPropuesta" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fa fa-user icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">{{"censo.busquedaClientes.literal.datosColegiacion" | translate}}</label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <!--cuerpo datos propuesta-->
    <div [hidden]="!datosPropuesta" class="card-body card-body-ficha">
        <div class="form-row">
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.alterMutua.literal.modalidadContratacion" | translate}} (*)</label>
                <p-dropdown [disabled]="existeSolicitud" class="select-form" [(ngModel)]='modContratacionSelected' [options]="comboModContratacion" (onChange)="onchangeModalidad($event)"
                    optionLabel="label" dataKey="value">
                </p-dropdown>
            </div>
            <div class="form-group col-lg-2 col-md-2">
                <br>
                <i *ngIf="modContratacionSelected != undefined && modContratacionSelected.label != ''" (click)="mostarPopUp()" class="fas fa-info-circle"
                    style="cursor:pointer"></i>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.alterMutua.literal.tarifa" | translate}} (â‚¬)</label>
                <input type="text" disabled="true" class="form-control" [(ngModel)]='tarifa' pInputText>
            </div>
        </div>
    </div>
</div>

<!-- Datos contacto -->
<div class="card">
    <div class="card-header header-ficha" (click)="mostrarDatosContacto()">
        <div [hidden]="datosContacto" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="far fa-address-book icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">{{"censo.datosDireccion.literal.datos.contacto" | translate}}</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>{{"censo.datosDireccion.literal.movil" | translate}}
                        <span>{{asegurado.movil}}</span>
                    </label>
                    <label>{{"censo.datosDireccion.literal.correo" | translate}}
                        <span>{{asegurado.mail}}</span>
                    </label>
                    <i [hidden]="datosContacto" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosContacto" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="far fa-address-book icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">{{"censo.datosDireccion.literal.datos.contacto" | translate}}</label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <!-- cuerpo datos contacto -->
    <div [hidden]="!datosContacto" class="card-body card-body-ficha">
        <div class="row">
            <div class="bloque col-lg-6 col-md-6">
                <div class="form-row">
                    <div class="form-group col-lg-4 col-md-4">
                        <label>{{"censo.usuario.labelIdioma" | translate}} (*)</label>
                        <p-dropdown [disabled]="existeSolicitud" class="select-form" [(ngModel)]='idiomaSelected' [options]="comboIdioma" optionLabel="label" dataKey="value"></p-dropdown>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>{{"censo.alterMutua.literal.medioComunicacion" | translate}} (*)</label>
                        <p-dropdown [disabled]="existeSolicitud" class="select-form" [(ngModel)]='comunicacionSelected' [options]="comboComunicacion" optionLabel="label" dataKey="value"></p-dropdown>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>{{"censo.ws.literal.telefono" | translate}} 1 (*)</label>
                        <input [disabled]="existeSolicitud" type="text" class="form-control" [(ngModel)]="asegurado.telefono" (input)="changeTelefono1()" pInputText>
                        <div *ngIf="!tlf1Valido">
                            <small class="input-error">{{ 'general.mensaje.validacion.telefono' | translate}}</small>
                        </div>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>{{"censo.ws.literal.telefono" | translate}} 2</label>
                        <input [disabled]="existeSolicitud" type="text" class="form-control" [(ngModel)]="asegurado.telefono2" (input)="changeTelefono1()" pInputText>
                        <div *ngIf="!tlf1Valido">
                            <small class="input-error">{{ 'general.mensaje.validacion.telefono' | translate}}</small>
                        </div>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>{{"censo.datosDireccion.literal.telefonoMovil" | translate}} (*)</label>
                        <input [disabled]="existeSolicitud" type="text" class="form-control" [(ngModel)]="asegurado.movil" (input)="changeMovil()" pInputText>
                        <div *ngIf="!mvlValido">
                            <small class="input-error">{{ 'general.mensaje.validacion.movil' | translate}}</small>
                        </div>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>{{"censo.ws.literal.fax" | translate}}</label>
                        <input [disabled]="existeSolicitud" type="text" class="form-control" [(ngModel)]="asegurado.fax" (input)="changeFax()" pInputText>
                        <div *ngIf="!faxValido">
                            <small class="input-error">{{ 'general.mensaje.validacion.fax' | translate}}</small>
                        </div>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>{{"censo.datosDireccion.literal.correo" | translate}} (*)</label>
                        <input [disabled]="existeSolicitud" type="text" class="form-control" [(ngModel)]="asegurado.mail" (input)="changeEmail()" pInputText>
                        <div *ngIf="!emailValido">
                            <small class="input-error">{{ 'general.mensaje.validacion.email' | translate}}</small>
                        </div>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <br>
                        <p-checkbox [disabled]="existeSolicitud" binary="true" label="Acepta publicidad" [(ngModel)]="asegurado.publicidad"></p-checkbox>
                    </div>
                </div>
            </div>
            <div class="bloque col-lg-6 col-md-6">
                <div class="form-row">
                    <div class="form-group col-lg-4 col-md-4">
                        <label>
                            {{"censo.datosDireccion.literal.pais2" | translate}} (*)
                        </label>
                        <p-dropdown [disabled]="existeSolicitud" class="select-form" [(ngModel)]="paisSelected" placeholder="{{'general.boton.seleccionar' | translate}}" [options]="paises"
                            optionLabel="label" dataKey="value" (onChange)="onChangePais($event)"></p-dropdown>

                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>
                            {{"censo.consultaDirecciones.literal.direccion" | translate}} (*)
                        </label>
                        <input [disabled]="existeSolicitud" type="text" class="form-control" pInputText [(ngModel)]="asegurado.domicilio">
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>
                            {{"censo.ws.literal.codigopostal" | translate}} (*)
                        </label>
                        <input [disabled]="existeSolicitud" type="text" class="form-control" [maxLength]="5" [(ngModel)]="asegurado.cp" (ngModelChange)="onChangeCodigoPostal()"
                            pInputText>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>
                            {{"censo.datosDireccion.literal.provincia" | translate}} (*)
                        </label>
                        <p-dropdown class="select-form" [(ngModel)]='provinciaSelected' (onChange)="obtenerProvinciaDesc($event)" [options]="provincias"
                            [filter]="true" filterBy="label,labelSinTilde" filterMatchMode="contains" disabled></p-dropdown>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>
                            {{"censo.consultaDirecciones.literal.poblacion" | translate}} (*)
                        </label>
                        <p-dropdown [disabled]="existeSolicitud" #poblacion (input)="buscarPoblacion($event)" class="select-form" [(ngModel)]="asegurado.poblacion" [options]="poblaciones"
                            [filter]="true" filterBy="label,labelSinTilde" filterMatchMode="contains" (onChange)="obtenerPoblacionDesc($event)"
                            emptyFilterMessage="{{'resultadosPoblaciones' | translate}}"></p-dropdown>
                    </div>
                    <div class="form-group col-lg-4 col-md-4">
                        <label>{{"censo.datosDireccion.literal.tipo.direccion" | translate}} (*)</label>
                        <p-dropdown [disabled]="existeSolicitud" class="select-form" [(ngModel)]="tipoDirSelected" [options]="TipoDireccion" optionLabel="label" dataKey="value"></p-dropdown>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--datos bancarios-->
<div class="card">
    <div class="card-header header-ficha" (click)="mostrarDatosBancarios()">
        <div [hidden]="datosCuentaBancaria" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fa fa-credit-card icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">{{"censo.consultaDatosBancarios.cabecera" | translate}}</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>{{"censo.mutualidad.literal.iban" | translate}}
                        <span>{{asegurado.iban}}</span>
                    </label>
                    <i [hidden]="datosCuentaBancaria" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosCuentaBancaria" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fa fa-credit-card icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">{{"censo.consultaDatosBancarios.cabecera" | translate}}
            </label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>

    <!--cuerpo datos bancarios-->
    <div [hidden]="!datosCuentaBancaria" class="card-body card-body-ficha">
        <div class="form-row">
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.mutualidad.literal.iban" | translate}} (*)</label>
                <input [disabled]="existeSolicitud" type="text" class="form-control" [(ngModel)]="asegurado.iban" (ngModelChange)="autogenerarDatos()" pInputText>
                <div *ngIf="isValidIBAN() == false">
                    <small class="input-error" *ngIf="!isValidIBAN()">{{"IBAN incorrecto"}}</small>
                </div>
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.fichaCliente.datosBancarios.cuentaBancaria.bic" | translate}}</label>
                <input type="text" class="form-control" pInputText disabled [(ngModel)]="asegurado.bic">
            </div>
            <div class="form-group col-lg-3 col-md-3">
                <label>{{"censo.tipoAbono.banco" | translate}}</label>
                <input [disabled]="existeSolicitud" [(ngModel)]="asegurado.banco" type="text" class="form-control" pInputText>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header header-ficha" (click)="mostrarFamiliares()">
        <div [hidden]="datosFamiliares" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fas fa-users icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">{{"censo.alterMutua.literal.familiares" | translate}}</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>{{"censo.alterMutua.literal.familiares" | translate}}:
                        <span *ngIf="datos == null">0</span>
                        <span *ngIf="datos != null">{{datos.length}}</span>
                    </label>
                    <i [hidden]="datosFamiliares" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosFamiliares" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fas fa-users icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">{{"censo.alterMutua.literal.familiares" | translate}}
                <!--{{ "general.message.datos.generales" | translate}}-->
            </label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <div [hidden]="!datosFamiliares" class="card-body card-body-ficha">
        <div class="form-row">

            <p-dataTable emptyMessage="{{ 'general.message.no.registros' | translate}}" [(selection)]="selectedDatos1" (onRowSelect)="irDatosFamiliar(selectedDatos1)"
                dataKey="idFamiliar" selectionMode="multiple" [responsive]="true" #table class="tabla-listado" [value]="datos"
                [sortOrder]="1" sortField="nombre" [paginator]="true" paginatorPosition="both" [rows]="selectedItem1" pageLinks="4"
                [editable]="true" [sortField]="sortF" [sortOrder]="sortO" (onSort)="changeSort($event)">

                <p-column field="idParentesco" filterPlaceholder="{{'general.boton.search' | translate}}" [header]="cols[0].header | translate"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-col let-card="rowData" pTemplate="body">
                        <span *ngIf="card[col.field] != ''">{{card[col.field]}}</span>
                        <p-dropdown *ngIf="card[col.field] == ''" class="select-form" [(ngModel)]="datosFamiliar.idParentesco" [options]="comboParentesco"
                            (onChange)="onchangeParentesco($event)" optionLabel="label" dataKey="value">
                        </p-dropdown>
                    </ng-template>

                </p-column>
                <p-column field="idSexo" [header]="cols[1].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-card="rowData" pTemplate="body">
                        <span *ngIf="card[col.field] != ''">{{card[col.field]}}</span>
                        <p-dropdown *ngIf="card[col.field] == ''" class="select-form" [(ngModel)]="datosFamiliar.idSexo" [options]="comboSexo" optionLabel="label"
                            dataKey="value" (onChange)="onchangeSexo($event)"></p-dropdown>
                    </ng-template>
                </p-column>

                <p-column [sortable]="true" field="nombre" [header]="cols[2].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-card="rowData" pTemplate="body">
                        <span *ngIf="card[col.field] != ''">{{card[col.field]}}</span>
                        <input *ngIf="card[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosFamiliar.nombre" pInputText>
                    </ng-template>

                </p-column>

                <p-column [sortable]="true" field="apellidos" [header]="cols[3].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-card="rowData" pTemplate="body">
                        <span *ngIf="card[col.field] != ''">{{card[col.field]}}</span>
                        <input *ngIf="card[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosFamiliar.apellidos" pInputText>
                    </ng-template>

                </p-column>

                <p-column field="idTipoIdentificacion" [header]="cols[4].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-card="rowData" pTemplate="body">
                        <span *ngIf="card[col.field] != ''">{{card[col.field]}}</span>
                        <p-dropdown *ngIf="card[col.field] == ''" class="select-form" placeholder="{{'general.boton.seleccionar' | translate}}" [(ngModel)]="datosFamiliar.idTipoIdentificacion"
                            [options]="comboTipoIdentificacion" optionLabel="label" dataKey="value" (onChange)="onchangeIdentificacion($event)"></p-dropdown>
                    </ng-template>

                </p-column>

                <p-column [sortable]="true" field="nIdentificacion" [header]="cols[5].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-card="rowData" pTemplate="body">
                        <span *ngIf="card[col.field] != ''">{{card[col.field]}}</span>
                        <input *ngIf="card[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosFamiliar.nIdentificacion" pInputText>
                    </ng-template>
                </p-column>

                <p-column [sortable]="true" field="fechaNacimiento" [header]="cols[6].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                    filterMatchMode="contains">
                    <ng-template let-col let-card="rowData" pTemplate="body">
                        <span *ngIf="card[col.field] != ''">{{card[col.field] | date: 'dd/MM/yyyy'}}</span>
                        <app-fecha *ngIf="card[col.field] == undefined" [(value)]="datosFamiliar.fechaNacimiento" [utc]="false" (valueChangeSelected)="fillFechaNacimientoFamiliar($event)"
                            (valueChangeInput)="fillFechaNacimientoFamiliar($event)"></app-fecha>
                    </ng-template>

                </p-column>

                <ng-template pTemplate="paginatorLeft">
                    <div class="mostrar">
                        <label class="mt-2 pr-3 registros-totales">{{'informesycomunicaciones.plantillasenvio.ficha.mostrandoRegistros' | translate}} {{table.first
                            + 1}} al {{table.first + table.rows}} {{ 'informesycomunicaciones.plantillasenvio.ficha.deUnTotalDe'
                            | translate }} {{table.totalRecords}}</label>
                        <label>{{ "general.message.mostrar" | translate}}</label>
                        <p-dropdown [(ngModel)]="selectedItem1" [options]="rowsPerPage" (onChange)="onChangeRowsPerPages($event)"></p-dropdown>
                        <label class="pl-1"> {{"cargaMasivaDatosCurriculares.numRegistros.literal" | translate}}
                        </label>
                    </div>
                </ng-template>

            </p-dataTable>
        </div>
        <p-footer>
            <div class="text-right main-button">
                <!--<button (click)="volver();" [(disabled)]="isVolver" pButton type="button" icon="fa fa-undo"
                                            iconPos="left" label="{{ 'general.boton.restablecer' | translate}}"></button>-->
                <button (click)="confirmEdit()" [disabled]="!isCrearA || isInvalidFamiliar() || existeSolicitud" pButton type="button" icon="far fa-save " iconPos="left"
                    label="{{ 'general.boton.guardar' | translate}}"></button>
                <!--<button (click)="confirmarBorrar()" [(disabled)]="isEliminar" pButton type="button" icon="fa fa-trash-alt"
                                            iconPos="left" label="{{'general.boton.eliminar'  | translate}}"></button>-->
                <button (click)="crear()" [disabled]="isCrearA || existeSolicitud" pButton type="button" icon="fa fa-plus" iconPos="left" label="{{ 'general.boton.new' | translate}}"></button>
            </div>
        </p-footer>
    </div>

</div>



<div class="card">
    <div class="card-header header-ficha" (click)="mostrarDatosBeneficiarios()">
        <div [hidden]="datosBeneficiarios" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fas fa-users icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">{{"censo.mutualidad.literal.beneficiarios" | translate}}</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>{{"censo.mutualidad.literal.beneficiarios" | translate}}:
                        <span *ngIf="datosB == null">0</span>
                        <span *ngIf="datosB != null">{{datosB.length}}</span>
                    </label>
                    <i [hidden]="datosBeneficiarios" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="datosBeneficiarios" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fas fa-users icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">{{"censo.mutualidad.literal.beneficiarios" | translate}}
                <!--{{ "general.message.datos.generales" | translate}}-->
            </label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <div [hidden]="!datosBeneficiarios" class="card-body card-body-ficha">
        <div class="form-row">
            <div class="col-lg-3 col-md-3">
                <label>{{"censo.alterMutua.literal.tipoBenef" | translate}}</label>
                <p-dropdown [disabled]="existeSolicitud" class="select-form" [options]="comboBeneficiario" [(ngModel)]="beneficiarioSelected" optionLabel="label" dataKey="value"
                    (onChange)="onChangeTipoBenef($event)"></p-dropdown>
            </div>
            <div *ngIf="beneficiarioSelected != undefined && beneficiarioSelected.value == '3'" class="col-lg-12 col-md-12">
                <p-dataTable emptyMessage="{{ 'general.message.no.registros' | translate}}" [(selection)]="selectedDatosB" (onRowSelect)="irDatosHeredero(selectedDatos)"
                    dataKey="idHeredero" [responsive]="true" #tableB class="tabla-listado" [value]="datosB" [sortOrder]="1" sortField="nombre"
                    [paginator]="true" paginatorPosition="both" [rows]="selectedItem2" pageLinks="4" [editable]="true" [sortField]="sortF"
                    [sortOrder]="sortO" (onSort)="changeSort($event)">

                    <p-column field="idParentesco" filterPlaceholder="{{'general.boton.search' | translate}}" [header]="cols[0].header | translate"
                        [filter]="true" filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosHeredero.idParentesco" [options]="comboParentesco"
                                (onChange)="onchangeParentesco($event)" optionLabel="label" dataKey="value">
                            </p-dropdown>
                        </ng-template>

                    </p-column>
                    <p-column field="idSexo" [header]="cols[1].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                        filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosHeredero.idSexo" [options]="comboSexo" optionLabel="label"
                                dataKey="value" (onChange)="onchangeSexo($event)"></p-dropdown>
                        </ng-template>
                    </p-column>

                    <p-column [sortable]="true" field="nombre" [header]="cols[2].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                        filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosHeredero.nombre" pInputText>
                        </ng-template>

                    </p-column>

                    <p-column [sortable]="true" field="apellidos" [header]="cols[3].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                        filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosHeredero.apellidos" pInputText>
                        </ng-template>

                    </p-column>

                    <p-column field="idTipoIdentificacion" [header]="cols[4].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                        filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <p-dropdown *ngIf="car[col.field] == ''" class="select-form" [(ngModel)]="datosHeredero.idTipoIdentificacion" [options]="comboTipoIdentificacion"
                                optionLabel="label" dataKey="value" (onChange)="onchangeIdentificacion($event)"></p-dropdown>
                        </ng-template>

                    </p-column>

                    <p-column [sortable]="true" field="nIdentificacion" [header]="cols[5].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                        filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field]}}</span>
                            <input *ngIf="car[col.field] == ''" type="text" class="form-control" [(ngModel)]="datosHeredero.nIdentificacion" pInputText>
                        </ng-template>
                    </p-column>

                    <p-column [sortable]="true" field="fechaNacimiento" [header]="cols[6].header | translate" [filter]="true" filterPlaceholder="{{'general.boton.search' | translate}}"
                        filterMatchMode="contains">
                        <ng-template let-col let-car="rowData" pTemplate="body">
                            <span *ngIf="car[col.field] != ''">{{car[col.field] | date: 'dd/MM/yyyy'}}</span>
                            <app-fecha *ngIf="car[col.field] == undefined" [(value)]="datosHeredero.fechaNacimiento" [utc]="false" (valueChangeSelected)="fillFechaNacimientoHeredero($event)"
                                (valueChangeInput)="fillFechaNacimientoHeredero($event)"></app-fecha>
                        </ng-template>

                    </p-column>

                    <ng-template pTemplate="paginatorLeft">
                        <div class="mostrar">
                            <label class="mt-2 pr-3 registros-totales">{{'informesycomunicaciones.plantillasenvio.ficha.mostrandoRegistros' | translate}} {{table.first
                                + 1}} al {{table.first + table.rows}} {{ 'informesycomunicaciones.plantillasenvio.ficha.deUnTotalDe'
                                | translate }} {{table.totalRecords}}</label>
                            <label>{{ "general.message.mostrar" | translate}}</label>
                            <p-dropdown [(ngModel)]="selectedItem2" [options]="rowsPerPage" (onChange)="onChangeRowsPerPages($event)"></p-dropdown>
                            <label class="pl-1"> {{"cargaMasivaDatosCurriculares.numRegistros.literal" | translate}}
                            </label>
                        </div>
                    </ng-template>

                </p-dataTable>
                <p-footer>
                    <div class="text-right main-button">
                        <!--<button (click)="volver();" [(disabled)]="isVolver" pButton type="button" icon="fa fa-undo"
                                                iconPos="left" label="{{ 'general.boton.restablecer' | translate}}"></button>-->
                        <button (click)="confirmEditB()" [disabled]="!isCrearB || isInvalidHeredero() || existeSolicitud" pButton type="button" icon="far fa-save "
                            iconPos="left" label="{{ 'general.boton.guardar' | translate}}"></button>
                        <!--<button (click)="confirmarBorrar()" [(disabled)]="isEliminar" pButton type="button" icon="fa fa-trash-alt"
                                                iconPos="left" label="{{'general.boton.eliminar'  | translate}}"></button>-->
                        <button (click)="crearB()" [(disabled)]="isCrearB || existeSolicitud" pButton type="button" icon="fa fa-plus" iconPos="left" label="{{ 'general.boton.new' | translate}}"></button>
                    </div>
                </p-footer>
            </div>
        </div>
    </div>
</div>


<div class="card">
    <div class="card-header header-ficha" (click)="mostrarObservaciones()">
        <div [hidden]="observaciones" class="form-row">
            <div class="col-lg-1 col-md-2">
                <div class="img-colegiado">
                    <i *ngIf="!existeImagen" class="fas fa-align-left icon-ficha"></i>
                    <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
                </div>
            </div>
            <div class="col-lg-11 col-md-10">
                <div class="d-flex justify-content-start mb-1">
                    <label class="mr-auto title-ficha">{{"gratuita.mantenimientoLG.literal.observaciones" | translate}}</label>
                </div>
                <div class="d-flex justify-content-between">
                    <label>{{"gratuita.mantenimientoLG.literal.observaciones" | translate}}:
                        <span>{{datosAlter.observaciones}}</span>
                    </label>
                    <i [hidden]="observaciones" class="fa fa-angle-down float-right"></i>
                </div>
            </div>
        </div>
        <div *ngIf="observaciones" class=" header-ficha-open d-flex justify-content-start align-items-center">
            <div class="img-colegiado">
                <i *ngIf="!existeImagen" class="fas fa-align-left icon-ficha"></i>
                <img *ngIf="existeImagen" [src]="imagenPersonaJuridica" class="icon-ficha">
            </div>
            <label class="title-ficha">Observaciones
                <!--{{ "general.message.datos.generales" | translate}}-->
            </label>
            <i class="fa fa-angle-up ml-auto"></i>
        </div>
    </div>
    <div [hidden]="!observaciones" class="card-body card-body-ficha">
        <div class="form-group col-lg-7 col-md-7">
            <label>{{"gratuita.mantenimientoLG.literal.observaciones" | translate}}</label>
            <textarea [disabled]="existeSolicitud" [rows]="10" [(ngModel)]="datosAlter.observaciones" pInputTextarea></textarea>
        </div>
    </div>

</div>



<div class="mt-3 text-right main-button ">
    <button (click)="enviarDatosAlter()" [disabled]="!isEnviar()" pButton type="button " icon="fa fa-save" iconPos="left" label="Solicitar"></button>
    <button (click)="backTo()" pButton type="button " icon="fa fa-angle-left" iconPos="left" label="{{ 'general.boton.volver' | translate}}"></button>
</div>



<p-dialog class="alterMutuaInfo" [(visible)]="mostrarInfo" responsive="true" [draggable]="false" modal="modal" resizable="false"
    [width]="680">
    <p-header class="title">
        <label *ngIf="modContratacionSelected != undefined">
            <strong>{{modContratacionSelected.label}}</strong>
        </label>
    </p-header>
    <div [innerHTML]="infoPropuesta.breve" *ngIf="modContratacionSelected != undefined" class="col-lg-12 col-md-12">
    </div>
    <div [innerHTML]="infoPropuesta.descripcion" *ngIf="modContratacionSelected != undefined" class="col-lg-12 col-md-12 "></div>
</p-dialog>

<p-dialog [(visible)]="!tienePropuesta" [closable]="false" responsive="true" [draggable]="false" modal="modal" resizable="false"
    [width]="680">
    <p-header class="title">
        <label>
            <strong>{{"solicitudes.literal.titulo.sinPropuestas" | translate}}</strong>
        </label>
    </p-header>
    <div *ngIf="propuestas != null" [innerHTML]="propuestas.mensaje" class="col-lg-12 col-md-12 ">
    </div>
    <p-footer>
        <div class="text-right main-button ">
            <button (click)="backTo()" pButton type="button" icon="fa-check" iconPos="left" label="Aceptar"></button>
        </div>
    </p-footer>
</p-dialog>

<p-dialog [(visible)]="muestraMensaje" responsive="true" [draggable]="false" modal="modal" resizable="false"
    [width]="680">
    <div *ngIf="propuestas != null" [innerHTML]="propuestas.mensaje" class="col-lg-12 col-md-12 ">
    </div>
</p-dialog>

<p-dialog [(visible)]="showSolicitarSeguro" [closable]="false" responsive="true" [draggable]="false" modal="modal" resizable="false"
    [width]="680">
    <p-header class="title">
        <label>
            <strong>{{"censo.alterMutua.solicitarModalidadesDisponibles" | translate}}</strong>
        </label>
    </p-header>
    <div *ngIf="estadoSolicitudResponse != null" [innerHTML]="estadoSolicitudResponse.mensaje" class="col-lg-12 col-md-12 ">
    </div>
    <p-footer>
        <div class="text-right main-button ">
            <button (click)="buscarPropuestas()" pButton type="button" icon="fa-check" iconPos="left" label="{{'censo.alterMutua.solicitarModalidades' | translate}}"></button>
            <button (click)="backTo()" pButton type="button " icon="fa fa-angle-left" iconPos="left" label="{{'general.boton.volver' | translate}}"></button>
        </div>
    </p-footer>
</p-dialog>

<p-dialog [(visible)]="tieneSolicitud" responsive="true" [draggable]="false" modal="modal" resizable="false"
    [width]="680">
    <p-header class="title">
        <label>
            <strong>{{"solicitudes.literal.titulo.estadosolicitud" | translate}}</strong>
        </label>
    </p-header>
    <div *ngIf="estadoSolicitudResponse != null" [innerHTML]="estadoSolicitudResponse.mensaje" class="col-lg-12 col-md-12 ">
    </div>
</p-dialog>

<div *ngIf="progressSpinner" class="overlay-spinner">
    <div class="loader"></div>
</div>
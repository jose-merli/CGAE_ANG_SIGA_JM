<p-growl [(value)]="msgs" (onHover)="clear()" life="30000"></p-growl>
<app-dialog></app-dialog>
<div class="busqueda-container">
  <div class="header-title">
    <i class="fa fa-square"></i>
    <p>{{ 'formacion.fichaCurso.cabecera' | translate }}</p>
  </div>

  <!-- TARJETA DATOS GENERALES -->
  <div class="card">
    <!-- Cabecera -->
    <div
      class="card-header header-ficha"
      (click)="abreCierraFicha('generales')"
    >
      <div *ngIf="!esFichaActiva('generales')" class="form-row">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado">
            <i class="fa fa-file-pdf icon-ficha"></i>
          </div>
        </div>
        <div class="col-lg-11 col-md-10">
          <div class="d-flex justify-content-start mt-2">
            <label class="mr-auto title-ficha">{{
              "general.message.datos.generales" | translate
            }}</label>
          </div>
          <i class="fa fa-angle-down float-right"></i>
        </div>
      </div>
      <div
        *ngIf="esFichaActiva('generales')"
        class=" header-ficha-open d-flex justify-content-start align-items-center"
      >
        <div class="img-colegiado">
          <i class="fa fa-file-pdf icon-ficha"></i>
        </div>
        <label class="title-ficha">{{
          "general.message.datos.generales" | translate
        }}</label>
        <i class="fa fa-angle-up ml-auto"></i>
      </div>
    </div>

    <!-- Cuerpo -->
    <div class="card-body card-body-ficha" *ngIf="esFichaActiva('generales')">
      <div class="form-row mb-3">
        <div class="bloque col-lg-5 col-md-5">
          <div class="row mb-3">
            <label class="ml-2"> <strong>{{'censo.consultaDatosGenerales.cabecera' | translate}}</strong> </label>
          </div>
          <div class="row mb-4">
            <div class="col-lg-6 col-md-6">
              <label>{{ 'administracion.parametrosGenerales.literal.nombre' | translate}}(*)</label>
              <input
                type="text"
                class="form-control"
                pInputText
                name="nombre"
                [disabled]="!activacionEditar"
                [(ngModel)]="curso.nombreCurso"
              />
            </div>
            <div class="col-lg-6 col-md-6">
              <label>{{ 'formacion.fichaCursos.datosGenerales.codigo' | translate }}(*)</label>
              <input
                type="text"
                class="form-control"
                pInputText
                name="codigo"
                [disabled]="fieldNoEditable || !activacionEditar"
                [(ngModel)]="curso.codigoCurso"
              />
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-6 col-md-6">
                <label>{{ 'formacion.fichaCursos.datosGenerales.visibilidad' | translate}}(*)</label>
                <p-dropdown placeholder="{{'general.boton.seleccionar' | translate}}" class="select-form"
                [disabled]="!activacionEditar" [(ngModel)]='curso.idVisibilidad' [options]="comboVisibilidad" [filter]="true" filterBy="label,labelSinTilde"
                  (onChange)="onChangeSelectVisibilidad($event)"></p-dropdown>
            </div>
            <div class="col-lg-6 col-md-6">
                <label>{{ 'censo.busquedaClientesAvanzada.literal.colegio' | translate}}(*)</label>
                <p-dropdown #colegio [disabled]="fieldNoEditable || !activacionEditar"  class="select-form" placeholder="{{'general.boton.seleccionar' | translate}}"
                  [(ngModel)]='curso.colegio' [options]="comboColegios" [filter]="true" filterBy="label,labelSinTilde" (onChange)="onChangeSelectColegio($event) "></p-dropdown>
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-6 col-md-6">
              <label>{{'censo.busquedaClientesAvanzada.literal.tipoCliente' | translate}}</label>
              <p-autoComplete #autocompleteService [(ngModel)]="resultsService" [disabled]="!activacionEditar" [suggestions]="suggestService" [minLength]="1" field="label"
              [multiple]="true" [style]="{'width':'100%'}"  (onFocus)="filterServices($event)" (onBlur)="visiblePanelBlur($event)" (completeMethod)="filterLabelsMultiple($event)">
              <ng-template let-servicesSelecionados pTemplate="selectedItem">
                <div class="ui-autocomplete-multiple-container ui-widget ui-inputtext ui-corner-all ng-star-inserted li ui-state-highlight"
                  [ngStyle]="{'background': servicesSelecionados.color, 'margin': marginPx, 'border': bw }">
                  {{ servicesSelecionados.label }}
                </div>
              </ng-template>
            </p-autoComplete>
            </div>
            <div class="col-lg-6 col-md-6">
                <label>{{ 'form.busquedaCursos.literal.estado' | translate}}(*)</label>
                <p-dropdown placeholder="-" class="select-form" [(ngModel)]='curso.idEstado' [options]="comboEstados"
                [filter]="true" filterBy="label,labelSinTilde" [disabled]="fieldNoEditable || !activacionEditar"></p-dropdown>
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-12 col-md-12">
              <label>{{'administracion.parametrosGenerales.literal.descripcion' | translate}} (*)</label>

              <p-editor #editor [(ngModel)]="curso.descripcionEstado" [readonly]="!activacionEditar" [style]="{'height':'150px'}" name="descripcion">
                <p-header>
                    <span class="ql-formats">
                        <select class="ql-header">
                          <option value="1">Heading</option>
                          <option value="2">Subheading</option>
                          <option selected>Normal</option>
                        </select>
                        <select class="ql-font">
                          <option selected>Sans Serif</option>
                          <option value="serif">Serif</option>
                          <option value="monospace">Monospace</option>
                        </select>
                    </span>
                    <span class="ql-formats">
                        <button class="ql-bold" aria-label="Bold"></button>
                        <button class="ql-italic" aria-label="Italic"></button>
                        <button class="ql-underline" aria-label="Underline"></button>
                    </span>
                    <span class="ql-formats">
                        <select class="ql-color"></select>
                        <select class="ql-background"></select>
                    </span>
                    <span class="ql-formats">
                        <button class="ql-list" value="ordered" aria-label="Ordered List"></button>
                        <button class="ql-list" value="bullet" aria-label="Unordered List"></button>
                        <select class="ql-align">
                            <option selected></option>
                            <option value="center"></option>
                            <option value="right"></option>
                            <option value="justify"></option>
                        </select>
                    </span>
                </p-header>
            </p-editor>


            </div>
          </div>
        </div>
        <div class="bloque col-lg-4 col-md-4">
          <div class="row mb-3">
            <label> <strong>{{ 'formacion.fichaCurso.datosGestion.cabecera' | translate }}</strong> </label>
          </div>
          <div class="row mb-4">
              <div class="col-lg-6 col-md-6">
                  <label>Fecha Inicio Inscripción(*)</label>
                  <p-calendar
                        [locale]="es"
                        [(ngModel)]="curso.fechaInscripcionDesdeDate"
                        dateFormat="dd/mm/yy"
                        icon="far fa-calendar-alt"
                        showIcon="true" [disabled]="!activacionEditar"
                        (onSelect)="selectStartDateInscription($event)"
                      ></p-calendar>
              </div>
              <div class="col-lg-6 col-md-6">
                  <label>Fecha Fin Inscripción(*)</label>
                  <p-calendar
                        [locale]="es"
                        [(ngModel)]="curso.fechaInscripcionHastaDate"
                        dateFormat="dd/mm/yy"
                        icon="far fa-calendar-alt"
                        showIcon="true" [disabled]="!activacionEditar"
                        [minDate]="curso.fechaInscripcionDesdeDate"
                        (onSelect)="selectEndDateInscription($event)"
                      ></p-calendar>
              </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-6 col-md-6">
                <label>Fecha Inicio Impartición</label>
                <p-calendar
                      [locale]="es"
                      [(ngModel)]="curso.fechaImparticionDesdeDate"
                      dateFormat="dd/mm/yy"
                      icon="far fa-calendar-alt"
                      showIcon="true"
                      [minDate]="curso.fechaInscripcionHastaDate"
                      [disabled]="fieldNoEditable || !activacionEditar"
                    ></p-calendar>
            </div>
            <div class="col-lg-6 col-md-6">
                <label>Fecha Fin Impartición</label>
                <p-calendar
                      [locale]="es"
                      [(ngModel)]="curso.fechaImparticionHastaDate"
                      dateFormat="dd/mm/yy"
                      icon="far fa-calendar-alt"
                      showIcon="true"
                      [minDate]="curso.fechaImparticionDesdeDate"
                      [disabled]="fieldNoEditable || !activacionEditar"
                    ></p-calendar>
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-6 col-md-6">
                <label>{{ 'formacion.fichaCursos.datosDeGestion.plazasDisponibles' | translate}}</label>
                <input
                type="text"
                class="form-control"
                pInputText
                name="tipo" [disabled]="!activacionEditar"
                [(ngModel)]="curso.plazasDisponibles"
              />
            </div>
            <div class="col-lg-6 col-md-6">
              <label>{{ 'formacion.fichaCursos.datosDeGestion.minimoAsistencia' | translate }}</label>
              <input
                type="text"
                class="form-control"
                pInputText
                name="asistencia" [disabled]="!activacionEditar"
                [(ngModel)]="curso.minimoAsistencia"
              />
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-12 col-md-12">
              <label>{{'agenda.fichaEventos.datosGenerales.lugar' | translate}}</label>
              <input
                type="text"
                class="form-control"
                pInputText
                name="lugar" [disabled]="!activacionEditar"
                [(ngModel)]="curso.lugar"
              />
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-12 col-md-12">
              <label>Autovalidación de inscripciones</label>
              <p-checkbox
                binary="true" [disabled]="!activacionEditar"
                [(ngModel)]="curso.autovalidacion"
              ></p-checkbox>
            </div>
          </div>
        </div>
        <div class="bloque col-lg-3 col-md-3">
          <div class="row mb-3">
            <label> <strong> {{'formacion.fichaCursos.datosGenerales.datosAdicionales.cabecera' | translate}}</strong> </label>
          </div>
          <div class="row mb-4">
            <div class="col-lg-12 col-md-12">
              <label>{{'formacion.fichaCursos.datosGenerales.datosAdicionales.documentacionAdjunta' | translate}}</label>
              <div *ngIf="edicionDocumentoAdjunto" class="ui-inputgroup">
                  <input type="text" class="form-control" pInputText name="adjunto" [disabled]="!activacionEditar" [(ngModel)]="curso.adjunto"/>
                  <button (click)="editDocumentoAdjunto()" pButton type="button" icon="fas fa-check" [disabled]="!activacionEditar" class="ui-button-warn"></button>      
            </div>
            <div *ngIf="!edicionDocumentoAdjunto" class="ui-inputgroup">
                <a *ngIf="curso.adjunto != undefined && curso.adjunto != ''" [href]="curso.adjunto" class="col-11" target="_blank">{{curso.adjunto}}</a>
                <span *ngIf="curso.adjunto == undefined || curso.adjunto == ''" class="col-11">{{curso.adjunto}}</span>
                <button (click)="editDocumentoAdjunto()" pButton type="button" icon="fas fa-pencil-alt" [disabled]="!activacionEditar" class="ui-button-warn button-edit"></button>      
          </div>
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-12 col-md-12">
              <label>{{ 'form.busquedaCursos.literal.temas' | translate}}</label>
              <p-autoComplete #autocompleteTopics [(ngModel)]="resultsTopics" [suggestions]="suggestTopics" [minLength]="1" field="label"
              [multiple]="true" [style]="{'width':'100%'}"  (onFocus)="filterTopics($event)" (onBlur)="visiblePanelBlurTopics($event)" [disabled]="!activacionEditar" (completeMethod)="filterLabelsMultipleTopics($event)">
              <ng-template let-topicsSelecionados pTemplate="selectedItem">
                <div class="ui-autocomplete-multiple-container ui-widget ui-inputtext ui-corner-all ng-star-inserted li ui-state-highlight"
                  [ngStyle]="{'background': topicsSelecionados.color, 'margin': marginPx, 'border': bw }">
                  {{ topicsSelecionados.label }}
                </div>
              </ng-template>
            </p-autoComplete>
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-12 col-md-12">
                  <label>{{'formacion.fichaCursos.datosGenerales.datosAdicionales.informacionAdicional' | translate}}</label>
              <div *ngIf="edicionInformacionAdicional" class="ui-inputgroup">
                    <input type="text" class="form-control" pInputText name="adicional" [disabled]="!activacionEditar" [(ngModel)]="curso.adicional"/>
                    <button (click)="editInformacionAdicional()" pButton type="button" icon="fas  fa-check" [disabled]="!activacionEditar" class="ui-button-warn"></button>      
              </div>
              <div *ngIf="!edicionInformacionAdicional" class="ui-inputgroup">
                  <a *ngIf="curso.adicional != undefined && curso.adicional != ''" [href]="curso.adicional" class="col-11" target="_blank">{{curso.adicional}}</a>
                  <span *ngIf="curso.adicional == undefined || curso.adicional == ''" class="col-11">{{curso.adicional}}</span>
                  <button (click)="editInformacionAdicional()" pButton type="button" icon="fas fa-pencil-alt" [disabled]="!activacionEditar" class="ui-button-warn button-edit"></button>      
            </div>
            </div>
          </div>
          <div class="row mb-4">
            <div class="col-lg-12 col-md-12">
                  <label>{{'formacion.fichaCursos.datosGenerales.datosAdicionales.encuestaSatisfaccion' | translate}}</label>
                  <div *ngIf="edicionEncuestaSatisfaccion" class="ui-inputgroup">
                      <input type="text" class="form-control" pInputText name="encuesta" [disabled]="!activacionEditar" [(ngModel)]="curso.encuesta"/>
                      <button (click)="editEncuestaSatisfaccion()" pButton type="button" icon="fas  fa-check" [disabled]="!activacionEditar" class="ui-button-warn"></button>      
                  </div>
                  <div *ngIf="!edicionEncuestaSatisfaccion" class="ui-inputgroup">
                      <a *ngIf="curso.encuesta != undefined && curso.encuesta != ''" [href]="curso.encuesta" class="col-11" target="_blank">{{curso.encuesta}}</a>
                      <span *ngIf="curso.encuesta == undefined || curso.encuesta == ''" class="col-11">{{curso.encuesta}}</span>
                      <button (click)="editEncuestaSatisfaccion()" pButton type="button" icon="fas fa-pencil-alt" [disabled]="!activacionEditar" class="ui-button-warn button-edit"></button>      
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer" *ngIf="esFichaActiva('generales')">
      <div class="text-right main-button">
        <!-- Botón cancelar -->
        
          <button (click)="cancelCourse()" pButton type="button" icon="fa fa-ban" iconPos="left" label="{{'general.boton.cancel' | translate}}"
           [disabled]="!controlBotonesEstado('Cancelar')"></button>

        <!-- Botón finalizar -->
        
          <button (click)="finishCourse()" pButton type="button" icon="fa fa-stop" iconPos="left" label="{{'general.boton.finalizar' | translate}}"
             [disabled]="!controlBotonesEstado('Finalizar')"></button>

        <!-- Botón desanunciar -->
        
          <button pButton type="button" icon="fa fa-bell-slash" iconPos="left" label="{{'form.busquedaCursos.literal.boton.desanunciar' | translate}}"
           [disabled]="!controlBotonesEstado('Desanunciar')"  (click)="releaseCourse()"></button>
       
        <!-- Botón anunciar -->
        
          <button pButton type="button" icon="fa fa-bell" iconPos="left" label="{{'form.busquedaCursos.literal.boton.anunciar' | translate}}"
              [disabled]="!controlBotonesEstado('Anunciar')" (click)="announceCourse()"></button>
       

        <!-- Botón inscripción -->

        <button pButton type="button" icon="fa fa-caret-square-o-up" iconPos="left" label="Inscripción" [disabled]="!modoEdicion || !activacionEditar" (click)="irInscripcion()"></button> 

        <!-- Botón guardar -->
        <button pButton type="button" icon="far fa-save" iconPos="left" label="{{ 'general.boton.guardar' | translate}}" (click)="saveCourse()" [disabled]="validateCourse() || !activacionEditar"></button> 
      </div>
    </div>
  </div>

  <!-- TARJETA PRECIOS -->
  <div class="card">
    <!-- Cabecera -->
    <div class="card-header header-ficha" (click)="abreCierraFicha('price')">
      <div *ngIf="!esFichaActiva('price')" class="form-row">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado"><i class="fa fa-usd icon-ficha"></i></div>
        </div>
        <div class="col-lg-11 col-md-10">
          <div class="d-flex justify-content-start mt-2">
            <label class="mr-auto title-ficha">{{'formacion.fichaCurso.tarjetaPrecios.precios' | translate}}</label>
          </div>
          <i class="fa fa-angle-down float-right"></i>
        </div>
      </div>
      <div
        *ngIf="esFichaActiva('price')"
        class=" header-ficha-open d-flex justify-content-start align-items-center"
      >
        <div class="img-colegiado"><i class="fa fa-usd icon-ficha"></i></div>
        <label class="title-ficha">{{'formacion.fichaCurso.tarjetaPrecios.precios' | translate}}</label>
        <i class="fa fa-angle-up ml-auto"></i>
      </div>
    </div>

    <!-- Cuerpo -->
    <div class="card-body card-body-ficha" *ngIf="esFichaActiva('price')">
      <div *ngIf="esFichaActiva('price')" class="card-body card-body-ficha">
        <div class="row">
          <p-dataTable
            emptyMessage="{{ 'general.message.no.registros' | translate}}"
            [ngClass]="{ customCursor: selectMultiplePrices }"
            [(selection)]="selectedDatosPrices"
            (onRowSelect)="actualizaSeleccionadosPrices(selectedDatosPrices)" 
            (onRowUnselect)="actualizaSeleccionadosPrices(selectedDatosPrices)"
            pageLinks="4"
            dataKey="idPrices"
            [responsive]="true"
            selectionMode="multiple"
            #tablePrices
            class="tabla-listado"
            [value]="datosPrices"
            [sortOrder]="sortO"
            [paginator]="true"
            paginatorPosition="both"
            [rows]="selectedPrices"
          >
            <p-column
              *ngFor="let col of colsPrices"
              [sortable]="true"
              [field]="col.field"
              [header]="col.header | translate"
              filterPlaceholder="{{'general.boton.search' | translate}}"
              [filter]="true"
              filterMatchMode="contains"
            >
            </p-column>
            <ng-template pTemplate="paginatorLeft">
              <div class="mostrar d-flex text-right justify-content-end">
                <label class="pr-3 registros-totales"
                  >Mostrando registros del {{ tablePrices.first + 1 }} al
                  {{ tablePrices.first + tablePrices.rows }} de un total de
                  {{ tablePrices.totalRecords }}</label
                >
                <label class="pr-3 numSeleccionados"
                  >Seleccionados: {{ numSelectedPrices }}</label
                >
                <label>{{ "general.message.mostrar" | translate }}</label>
                <p-dropdown
                  [(ngModel)]="selectedPrices"
                  [options]="rowsPerPage"
                ></p-dropdown>
                <label class="pl-1">
                  {{
                    "cargaMasivaDatosCurriculares.numRegistros.literal"
                      | translate
                  }}</label
                >
                  <p-checkbox
                    (onChange)="onChangeSelectAllPrices()"
                    [(ngModel)]="selectAllPrices"
                    binary="true"
                    label="Seleccionar todo"
                    name="groupname"
                  ></p-checkbox>
                <label
                  class="ml-3 seleccionMultiple"
                  [ngClass]="{ 'seleccion-multiple': selectMultiplePrices }"
                  (click)="
                    isSelectMultiplePrices(); selectedDatosPrices = false
                  "
                >
                  <i class="pr-2 fa fa-mouse-pointer"></i
                  >{{ "general.message.seleccion.multiple" | translate }}</label
                >
              </div>
            </ng-template>
          </p-dataTable>
        </div>
      </div>
      <div *ngIf="esFichaActiva('price')" class="card-footer">
      
      </div>
    </div>
  </div>

  <!-- TERJETAS FORMADORES -->
  <div class="card">
    <!-- Cabecera -->
    <div
      class="card-header header-ficha"
      (click)="abreCierraFicha('formadores')">
      <div *ngIf="!esFichaActiva('formadores')" class="form-row">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado">
            <i class="fa fa-users icon-ficha"></i>
          </div>
        </div>
        <div class="col-lg-11 col-md-10">
          <div class="d-flex justify-content-start mt-2">
            <label class="mr-auto title-ficha">{{'agenda.fichaEventos.datosFormadores.cabecera' | translate}}</label>
          </div>
          <i class="fa fa-angle-down float-right"></i>
        </div>
      </div>
      <div
        *ngIf="esFichaActiva('formadores')"
        class=" header-ficha-open d-flex justify-content-start align-items-center"
      >
        <div class="img-colegiado"><i class="fa fa-users icon-ficha"></i></div>
        <label class="title-ficha">{{'agenda.fichaEventos.datosFormadores.cabecera' | translate}}</label>
        <i class="fa fa-angle-up ml-auto"></i>
      </div>
    </div>

    <!-- Cuerpo -->
    <div class="card-body card-body-ficha" *ngIf="esFichaActiva('formadores')">
      <div
        *ngIf="esFichaActiva('formadores')"
        class="card-body card-body-ficha"
      >
        <div class="row">
          <div *ngIf="(selectMultipleFormadores || selectAllFormadores || !activacionEditar) && !pressNewFormador">
            <p-dataTable
              emptyMessage="{{ 'general.message.no.registros' | translate}}"
              [ngClass]="{ customCursor: selectMultipleFormadores }"
              dataKey="idPersona"
              selectionMode="multiple"
              [(selection)]="selectedDatosFormadores"
              [responsive]="true"
              #tableFormadores
              class="tabla-listado"
              [paginator]="true"
              (onRowUnselect)="actualizaSeleccionadosFormadores(selectedDatosFormadores)"
              [value]="datosFormadores"
              [sortOrder]="1"
              [paginator]="true"
              paginatorPosition="both"
              [rows]="selectedFormadores"
              [editable]="selectMultipleFormadores"
            >
              <p-column
                *ngFor="let col of colsFormadores"
                [sortable]="true"
                [field]="col.field"
                [header]="col.header | translate"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                [filter]="true"
                filterMatchMode="contains"
              >
              </p-column>

              <ng-template pTemplate="paginatorLeft">
                <div class="mostrar d-flex text-right justify-content-end">
                  <label class="pr-3 registros-totales"
                    >Mostrando registros del
                    {{ tableFormadores.first + 1 }} al
                    {{ tableFormadores.first + tableFormadores.rows }} de un
                    total de {{ tableFormadores.totalRecords }}</label
                  >
                  <label class="pr-3 numSeleccionados"
                    >Seleccionados: {{ numSelectedFormadores }}</label
                  >
                  <label>{{ "general.message.mostrar" | translate }}</label>
                  <p-dropdown
                    [(ngModel)]="selectedFormadores"
                    [options]="rowsPerPage"
                    (onChange)="onChangeRowsPerPages($event)"
                  ></p-dropdown>
                  <label class="pl-1">
                    {{
                      "cargaMasivaDatosCurriculares.numRegistros.literal"
                        | translate
                    }}</label
                  >
                  <div class="ml-3 selectAll">
                    <p-checkbox
                      (onChange)="onChangeSelectAllFormadores()"
                      [(ngModel)]="selectAllFormadores"
                      binary="true"
                      label="Seleccionar todo"
                      name="groupname"
                    ></p-checkbox>
                  </div>
                  <label
                    class="ml-3 seleccionMultiple"
                    [ngClass]="{
                      ' seleccion-multiple': selectMultipleFormadores
                    }"
                    (click)="
                      isSelectMultipleFormadores();
                      selectedDatosFormadores = false
                    "
                  >
                    <i class="pr-2 fa fa-mouse-pointer"></i
                    >{{
                      "general.message.seleccion.multiple" | translate
                    }}</label
                  >
                </div>
              </ng-template>
            </p-dataTable>
          </div>

          <!-- Editar Formador -->
          <div *ngIf="!selectMultipleFormadores && !pressNewFormador && !selectAllFormadores && activacionEditar">
            <p-dataTable
              emptyMessage="{{ 'general.message.no.registros' | translate}}"
              [ngClass]="{ customCursor: selectMultipleFormadores }"
              [paginator]="true"
              #tableFormadores
              class="tabla-listado"
              [value]="datosFormadores"
              paginatorPosition="both"
              datakey="idPersona"
              [(selection)]="selectedDatosFormadores"
              [rows]="selectedFormadores"
              [editable]="!selectMultipleFormadores"
              (onEdit)="editFormadorTable($event)"
            >
              <p-column
                [sortable]="true"
                [field]="colsFormadores[0].field"
                [header]="
                  'administracion.parametrosGenerales.literal.nombre'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsFormadores[1].field"
                [header]="
                  'gratuita.mantenimientoTablasMaestra.literal.apellidos'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
              </p-column>

              <!-- (onChange)="onChangeEdit($event)" -->

              <p-column
                [sortable]="true"
                [field]="colsFormadores[2].select"
                [header]="'administracion.usuarios.literal.rol' | translate"
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-dato="rowData" pTemplate="body">
                  <p-dropdown
                    (onChange)="onChangeTutor($event, dato)"
                    class="select-form"
                    [(ngModel)]="dato[colsFormadores[2].select]"
                    [options]="comboRoles"
                    [filter]="false"
                    placeholder="{{'general.boton.seleccionar' | translate}}"
                    name="type"
                  ></p-dropdown>
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsFormadores[3].select"
                [header]="
                  'censo.busquedaClientesAvanzada.literal.tipoCliente'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template pTemplate="body" let-dato="rowData">
                  <p-dropdown
                    (onChange)="onChangeEdit($event, dato)"
                    class="select-form"
                    [(ngModel)]="dato[colsFormadores[3].select]"
                    [options]="comboTipoCoste"
                    [filter]="false"
                    placeholder="{{'general.boton.seleccionar' | translate}}"
                    name="type"
                  ></p-dropdown>
                </ng-template>
              </p-column>

              <p-column
                [editable]="!selectMultipleFormadores"
                [sortable]="true"
                [field]="colsFormadores[4].field"
                [header]="'general.boton.actualizarTarifa' | translate"
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
              </p-column>

              <!-- <p-column
                [editable]="false"
                [sortable]="true"
                [field]="colsFormadores[5].field"
                [header]="
                  'form.busquedaCursos.literal.tutorResponsable' | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template pTemplate="body" let-dato="rowData">
                  <p-checkbox
                    (onChange)="onChangeTutor($event, dato)"
                    [(ngModel)]="dato[colsFormadores[5].field]"
                    binary="true"
                    name="groupname"
                  ></p-checkbox>
                </ng-template>
              </p-column> -->

              <ng-template pTemplate="paginatorLeft">
                <div class="mostrar d-flex text-right justify-content-end">
                  <label class="pr-3 registros-totales"
                    >Mostrando registros del
                    {{ tableFormadores.first + 1 }} al
                    {{ tableFormadores.first + tableFormadores.rows }} de un
                    total de {{ tableFormadores.totalRecords }}</label
                  >
                  <label class="pr-3 numSeleccionados"
                    >Seleccionados: {{ numSelectedFormadores }}</label
                  >
                  <label>{{ "general.message.mostrar" | translate }}</label>
                  <p-dropdown
                    [(ngModel)]="selectedFormadores"
                    [options]="rowsPerPage"
                    (onChange)="onChangeRowsPerPages($event)"
                  ></p-dropdown>
                  <label class="pl-1">
                    {{
                      "cargaMasivaDatosCurriculares.numRegistros.literal"
                        | translate
                    }}</label
                  >
                  <div class="ml-3 selectAll">
                    <p-checkbox
                      (onChange)="onChangeSelectAllFormadores($event)"
                      [(ngModel)]="selectAllFormadores"
                      binary="true"
                      label="Seleccionar todo"
                      name="groupname"
                    ></p-checkbox>
                  </div>
                  <label
                    class="ml-3 seleccionMultiple"
                    [ngClass]="{
                      'seleccion-multiple': selectMultipleFormadores
                    }"
                    (click)="
                      isSelectMultipleFormadores();
                      selectedDatosFormadores = false
                    "
                  >
                    <i class="pr-2 fa fa-mouse-pointer"></i
                    >{{
                      "general.message.seleccion.multiple" | translate
                    }}</label
                  >
                </div>
              </ng-template>
            </p-dataTable>
          </div>

          <!-- Nuevo Formador -->
          <div *ngIf="pressNewFormador">
            <p-dataTable
              emptyMessage="{{ 'general.message.no.registros' | translate}}"
              [ngClass]="{ customCursor: selectMultipleFormadores }"
              [paginator]="true"
              #tableFormadores
              class="tabla-listado"
              [value]="datosFormadores"
              paginatorPosition="both"
              datakey="idPersona"
              [rows]="selectedFormadores"
              [editable]="!pressNewFormador"
            >
              <p-column
                [sortable]="true"
                [field]="colsFormadores[0].field"
                [header]="
                  'administracion.parametrosGenerales.literal.nombre'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-col let-dato="rowData" pTemplate="body">
                  <span>{{ dato[colsFormadores[0].field] }}</span>
                  <input
                    *ngIf="dato[colsFormadores[0].field] == ''"
                    [value]="dato[colsFormadores[0].field]"
                    [(ngModel)]="newFormadorCourse.nombre"
                    type="text"
                    class="form-control"
                    pInputText
                  />
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsFormadores[1].field"
                [header]="
                  'gratuita.mantenimientoTablasMaestra.literal.apellidos'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-col let-dato="rowData" pTemplate="body">
                  <span>{{ dato[colsFormadores[1].field] }}</span>
                  <input
                    *ngIf="dato[colsFormadores[1].field] == ''"
                    [value]="dato[colsFormadores[1].field]"
                    [(ngModel)]="newFormadorCourse.apellidos"
                    type="text"
                    class="form-control"
                    pInputText
                  />
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsFormadores[2].field"
                [header]="'administracion.usuarios.literal.rol' | translate"
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-dato="rowData" pTemplate="body">
                  <span *ngIf="dato[colsFormadores[2].field] != ''">{{
                    dato[colsFormadores[2].field]
                  }}</span>

                  <p-dropdown
                    *ngIf="dato[colsFormadores[2].field] == ''"
                    class="select-form"
                    [(ngModel)]="newFormadorCourse.idRol"
                    [options]="comboRoles"
                    [filter]="false"
                    placeholder="{{'general.boton.seleccionar' | translate}}"
                    name="type"
                    [disabled]="!activacionEditar"
                    (onChange)="onChangeTutor($event, dato)"
                  ></p-dropdown>
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsFormadores[3].field"
                [header]="
                  'censo.busquedaClientesAvanzada.literal.tipoCliente'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template pTemplate="body" let-dato="rowData">
                  <span *ngIf="dato[colsFormadores[3].field] != ''">{{
                    dato[colsFormadores[3].field]
                  }}</span>

                  <p-dropdown
                    *ngIf="dato[colsFormadores[3].field] == ''"
                    class="select-form"
                    [(ngModel)]="newFormadorCourse.idTipoCoste"
                    [options]="comboTipoCoste"
                    [filter]="false"
                    [disabled]="!activacionEditar"
                    placeholder="{{'general.boton.seleccionar' | translate}}"
                    name="type"
                  ></p-dropdown>
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsFormadores[4].field"
                [header]="'general.boton.actualizarTarifa' | translate"
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-col let-dato="rowData" pTemplate="body">
                  <span *ngIf="dato[colsFormadores[4].field] != ''">{{
                    dato[colsFormadores[4].field]
                  }}</span>
                  <input
                    *ngIf="dato[colsFormadores[4].field] == ''"
                    [value]="dato[colsFormadores[4].field]"
                    [(ngModel)]="newFormadorCourse.tarifa"
                    [disabled]="!activacionEditar"
                    type="text"
                    class="form-control"
                    pInputText
                  />
                </ng-template>
              </p-column>


              <ng-template pTemplate="paginatorLeft">
                <div class="mostrar d-flex text-right justify-content-end">
                  <label class="pr-3 registros-totales"
                    >Mostrando registros del
                    {{ tableFormadores.first + 1 }} al
                    {{ tableFormadores.first + tableFormadores.rows }} de un
                    total de {{ tableFormadores.totalRecords }}</label
                  >
                  <label class="pr-3 numSeleccionados"
                    >Seleccionados: {{ numSelected }}</label
                  >
                  <label>{{ "general.message.mostrar" | translate }}</label>
                  <p-dropdown
                    [(ngModel)]="selectedItem"
                    [options]="rowsPerPage"
                    (onChange)="onChangeRowsPerPages($event)"
                  ></p-dropdown>
                  <label class="pl-1">
                    {{
                      "cargaMasivaDatñosCurriculares.numRegistros.literal"
                        | translate
                    }}</label
                  >
                </div>
              </ng-template>
            </p-dataTable>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer" *ngIf="esFichaActiva('formadores')">
      <div class="text-right main-button">
        <button
          *ngIf="pressNewFormador"
          (click)="restTrainer()"
          pButton
          type="button"
          icon="fa fa-ban"
          iconPos="left"
          label="{{'general.boton.cancel' | translate}}"
        ></button>
        <button
          *ngIf="editFormador || pressNewFormador"
          pButton
          (click)="saveTrainers()"
          type="button"
          icon="far fa-save"
          iconPos="left"
          [disabled]="validateTrainer() || !activacionEditar"
          label="{{ 'general.boton.guardar' | translate }}"
        ></button>
        <button
          *ngIf="editFormador && !pressNewFormador"
          pButton
          (click)="restTrainer()"
          type="button"
          icon="fa fa-undo"
          iconPos="left"
          label="{{ 'general.boton.restablecer'| translate }}"
        ></button>
        <button
          *ngIf="!pressNewFormador && !selectMultipleFormadores"
          pButton
          (click)="newTrainer()"
          type="button"
          icon="fa fa-plus"
          iconPos="left"
          label="{{ 'general.boton.new'| translate }}"
          [disabled]="editFormador || !activacionEditar"
        ></button>
        <button
          *ngIf="selectMultipleFormadores"
          pButton
          (click)="deleteTrainer(selectedDatosFormadores)"
          type="button"
          icon="fa fa-trash-alt"
          iconPos="left"
          [disabled]="!activacionEditar"
          label="{{ 'general.boton.eliminar'| translate }}"
        ></button>
      </div>
    </div>
  </div>
</div>

<!-- TERJETAS INSCRIPCIONES -->
<div class="card">
  <!-- Cabecera -->
  <div *ngIf="!modoEdicion"
  class="card-header header-ficha"
>
  <div class="form-row">
    <div class="col-lg-1 col-md-2">
      <div class="img-colegiado">
        <i class="fa fa-pencil-square icon-ficha"></i>
      </div>
    </div>
    <div class="col-lg-11 col-md-10">
      <div class="d-flex justify-content-start mt-2">
        <label class="mr-auto title-ficha">
          Inscripciones
        </label>
      </div>
    </div>
  </div>
</div>
  <div *ngIf="modoEdicion"
    class="card-header header-ficha"
    (click)="irBusquedaInscripcciones()"
  >
    <div class="form-row">
      <div class="col-lg-1 col-md-2">
        <div class="img-colegiado">
          <i class="fa fa-pencil-square icon-ficha"></i>
        </div>
      </div>
      <div class="col-lg-11 col-md-10">
        <div class="d-flex justify-content-start mb-1">
          <label class="mr-auto title-ficha">
            Inscripciones
          </label>
        </div>
        <div class="d-flex justify-content-between col-lg-7">
          <label
            >Pendientes:
            <span>{{ inscription.pendientes }}</span>
          </label>
          <label
            >Aprobadas:
             <span>{{ inscription.aprobadas }}</span>
          </label>
          <label
            >Rechazadas:
            <span>{{ inscription.rechazadas }}</span>
          </label>
          <label
            >Canceladas:
            <span>{{ inscription.canceladas }}</span>
          </label>
          <label
            >Plazas Totales:
             <span>{{ curso.plazasDisponibles }}</span>
          </label>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TERJETAS CERTIFICADOS -->
<div class="card">
  <!-- Cabecera -->
  <div
    class="card-header header-ficha"
    (click)="abreCierraFicha('certificate')"
  >
    <div *ngIf="!esFichaActiva('certificate')" class="form-row">
      <div class="col-lg-1 col-md-2">
        <div class="img-colegiado">
          <i class="fa fa-certificate icon-ficha"></i>
        </div>
      </div>
      <div class="col-lg-11 col-md-10">
        <div class="d-flex justify-content-start mt-2">
          <label class="mr-auto title-ficha">{{'formacion.fichaInscripcion.datosCertificados.cabecera' | translate}}</label>
        </div>
        <i class="fa fa-angle-down float-right"></i>
      </div>
    </div>
    <div
      *ngIf="esFichaActiva('certificate')"
      class=" header-ficha-open d-flex justify-content-start align-items-center"
    >
      <div class="img-colegiado">
        <i class="fa fa-certificate icon-ficha"></i>
      </div>
      <label class="title-ficha">{{'formacion.fichaInscripcion.datosCertificados.cabecera' | translate}}</label>
      <i class="fa fa-angle-up ml-auto"></i>
    </div>
  </div>

  <!-- Cuerpo -->
  <div class="card-body card-body-ficha" *ngIf="esFichaActiva('certificate')">
      <div
        *ngIf="esFichaActiva('certificate')"
        class="card-body card-body-ficha"
      >
        <div class="row">
          <div *ngIf="(selectMultipleCertificates || selectAllCertificates  || !activacionEditar) && !pressNewCertificate">
            <p-dataTable
              emptyMessage="{{ 'general.message.no.registros' | translate}}"
              [ngClass]="{ customCursor: selectMultipleCertificates }"
              dataKey="idCertificadoCurso"
              selectionMode="multiple"
              [(selection)]="selectedDatosCertificates"
              [responsive]="true"
              #tableCertificates
              class="tabla-listado"
              [paginator]="true"
              (onRowSelect)="actualizaSeleccionadosCertificates(selectedDatosCertificates)"
              (onRoUnselect)="actualizaSeleccionadosCertificates(selectedDatosCertificates)"
              [value]="datosCertificates"
              [sortOrder]="1"
              [paginator]="true"
              paginatorPosition="both"
              [rows]="selectedCertificates"
              [editable]="selectMultipleCertificates"
            >
           
            <p-column
                [sortable]="true"
                [field]="colsCertificates[0].field"
                [header]="
                  'menu.certificados'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-col let-dato="rowData" pTemplate="body">
                    <span *ngIf="dato[colsCertificates[0].field] != ''">{{
                        dato[colsCertificates[0].value]
                      }}</span>
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsCertificates[1].field"
                [header]="
                  'form.busquedaCursos.literal.precio'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-col let-dato="rowData" pTemplate="body">
                    <span *ngIf="dato[colsCertificates[1].field] != ''">{{
                        dato[colsCertificates[1].field]
                      }}</span>
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsCertificates[2].field"
                [header]="'formacion.busquedaInscripcion.calificacion' | translate"
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-dato="rowData" pTemplate="body">
                  <span *ngIf="dato[colsCertificates[2].field] != ''">{{
                    dato[colsCertificates[2].value]
                  }}</span>
                </ng-template>
              </p-column>

              <ng-template pTemplate="paginatorLeft">
                <div class="mostrar d-flex text-right justify-content-end">
                  <label class="pr-3 registros-totales"
                    >Mostrando registros del
                    {{ tableCertificates.first + 1 }} al
                    {{ tableCertificates.first + tableCertificates.rows }} de un
                    total de {{ tableCertificates.totalRecords }}</label
                  >
                  <label class="pr-3 numSeleccionados"
                    >Seleccionados: {{ numSelectedCertificates }}</label
                  >
                  <label>{{ "general.message.mostrar" | translate }}</label>
                  <p-dropdown
                    [(ngModel)]="selectedCertificates"
                    [options]="rowsPerPage"
                    (onChange)="onChangeRowsPerPagesCertificates($event)"
                  ></p-dropdown>
                  <label class="pl-1">
                    {{
                      "cargaMasivaDatosCurriculares.numRegistros.literal"
                        | translate
                    }}</label
                  >
                  <div class="ml-3 selectAll">
                    <p-checkbox
                      (onChange)="onChangeSelectAllCertificates()"
                      [(ngModel)]="selectAllCertificates"
                      binary="true"
                      label="Seleccionar todo"
                      name="groupname"
                    ></p-checkbox>
                  </div>
                  <label
                    class="ml-3 seleccionMultiple"
                    [ngClass]="{
                      ' seleccion-multiple': selectMultipleCertificates
                    }"
                    (click)="
                      isSelectMultipleCertificates();
                      selectedDatosCertificates = false
                    "
                  >
                    <i class="pr-2 fa fa-mouse-pointer"></i
                    >{{
                      "general.message.seleccion.multiple" | translate
                    }}</label
                  >
                </div>
              </ng-template>
            </p-dataTable>
          </div>

          <!-- Editar Certificate -->
          <div *ngIf="!selectMultipleCertificates && !pressNewCertificate && !selectAllCertificates && activacionEditar">
            <p-dataTable
              emptyMessage="{{ 'general.message.no.registros' | translate}}"
              [ngClass]="{ customCursor: selectMultipleCertificates }"
              [paginator]="true"
              #tableCertificates
              class="tabla-listado"
              [value]="datosCertificates"
              paginatorPosition="both"
              datakey="idCertificadoCurso"
              [(selection)]="selectedDatosCertificates"
              [rows]="selectedCertificates"
              [editable]="!selectMultipleCertificates"
              (onEdit)="editCertificateTable($event)"
            >
              <p-column
                [sortable]="true"
                [field]="colsCertificates[0].field"
                [header]="
                  'menu.certificados'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
              <ng-template pTemplate="body" let-dato="rowData">
                  <p-dropdown #dropdownCertificate
                    class="select-form"
                    [(ngModel)]="dato[colsCertificates[0].field]"
                    [options]="comboCertificates"
                    [filter]="false"
                    placeholder="Seleccionar"
                    [disabled]="!activacionEditar"
                    name="type"
                    (onChange)="selectPriceModeEdit($event, dato)"
                  ></p-dropdown>
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsCertificates[1].field"
                [header]="
                  'form.busquedaCursos.literal.precio'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
              
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsCertificates[2].field"
                [header]="
                  'formacion.busquedaInscripcion.calificacion'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template pTemplate="body" let-dato="rowData">
                  <p-dropdown
                    class="select-form"
                    [(ngModel)]="dato[colsCertificates[2].field]"
                    [options]="comboCalificaciones"
                    [filter]="false"
                    placeholder="Seleccionar"
                    [disabled]="!activacionEditar"
                    name="type"
                    (onChange)="editCertificateTable($event, dato)"
                  ></p-dropdown>
                </ng-template>
              </p-column>

              <ng-template pTemplate="paginatorLeft">
                <div class="mostrar d-flex text-right justify-content-end">
                  <label class="pr-3 registros-totales"
                    >Mostrando registros del
                    {{ tableCertificates.first + 1 }} al
                    {{ tableCertificates.first + tableCertificates.rows }} de un
                    total de {{ tableCertificates.totalRecords }}</label
                  >
                  <label class="pr-3 numSeleccionados"
                    >Seleccionados: {{ numSelectedCertificates }}</label
                  >
                  <label>{{ "general.message.mostrar" | translate }}</label>
                  <p-dropdown
                    [(ngModel)]="selectedCertificates"
                    [options]="rowsPerPage"
                    (onChange)="onChangeRowsPerPagesCertificates($event)"
                  ></p-dropdown>
                  <label class="pl-1">
                    {{
                      "cargaMasivaDatosCurriculares.numRegistros.literal"
                        | translate
                    }}</label
                  >
                  <div class="ml-3 selectAll">
                    <p-checkbox
                      (onChange)="onChangeSelectAllCertificates($event)"
                      [(ngModel)]="selectAllCertificates"
                      binary="true"
                      label="Seleccionar todo"
                      name="groupname"
                    ></p-checkbox>
                  </div>
                  <label
                    class="ml-3 seleccionMultiple"
                    [ngClass]="{
                      'seleccion-multiple': selectMultipleCertificates
                    }"
                    (click)="
                      isSelectMultipleCertificates();
                      selectedDatosCertificates = false
                    "
                  >
                    <i class="pr-2 fa fa-mouse-pointer"></i
                    >{{
                      "general.message.seleccion.multiple" | translate
                    }}</label
                  >
                </div>
              </ng-template>
            </p-dataTable>
          </div>

          <!-- Nuevo Certificado -->
          <div *ngIf="pressNewCertificate">
            <p-dataTable
              emptyMessage="{{ 'general.message.no.registros' | translate}}"
              [ngClass]="{ customCursor: selectMultipleCertificates }"
              [paginator]="true"
              #tableCertificates
              class="tabla-listado"
              [value]="datosCertificates"
              paginatorPosition="both"
              datakey="idCertificadoCurso"
              [rows]="selectedCertificates"
              [editable]="!pressNewCertificate"
            >
              <p-column
                [sortable]="true"
                [field]="colsCertificates[0].field"
                [header]="
                  'menu.certificados'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-col let-dato="rowData" pTemplate="body">
                    <span *ngIf="dato[colsCertificates[0].field] != ''">{{
                        dato[colsCertificates[0].value]
                      }}</span>
    
                      <p-dropdown
                        *ngIf="dato[colsCertificates[0].field] == ''"
                        class="select-form"
                        [(ngModel)]="newCertificate.idProducto"
                        [options]="comboCertificates"
                        [filter]="false"
                        placeholder="Seleccionar"
                        [disabled]="!activacionEditar"
                        name="type"
                        (onChange)="selectPriceModeNew($event)"
                      ></p-dropdown>
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsCertificates[1].field"
                [header]="
                  'form.busquedaCursos.literal.precio'
                    | translate
                "
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-col let-dato="rowData" pTemplate="body">
                    <span *ngIf="dato[colsCertificates[1].field] != ''">{{
                        dato[colsCertificates[1].field]
                      }}</span>


                  <span  *ngIf="dato[colsCertificates[1].field] == ''">{{ newCertificate.precio }}</span>
                </ng-template>
              </p-column>

              <p-column
                [sortable]="true"
                [field]="colsCertificates[2].field"
                [header]="'formacion.busquedaInscripcion.calificacion' | translate"
                [filter]="true"
                filterPlaceholder="{{'general.boton.search' | translate}}"
                filterMatchMode="contains"
              >
                <ng-template let-dato="rowData" pTemplate="body">
                  <span *ngIf="dato[colsCertificates[2].field] != ''">{{
                    dato[colsCertificates[2].value]
                  }}</span>

                  <p-dropdown
                    *ngIf="dato[colsCertificates[2].field] == ''"
                    class="select-form"
                    [(ngModel)]="newCertificate.idCalificacion"
                    [options]="comboCalificaciones"
                    [filter]="false"
                    placeholder="Seleccionar"
                    [disabled]="!activacionEditar"
                    name="type"
                  ></p-dropdown>
                </ng-template>
              </p-column>

            
              <ng-template pTemplate="paginatorLeft">
                <div class="mostrar d-flex text-right justify-content-end">
                  <label class="pr-3 registros-totales"
                    >Mostrando registros del
                    {{ tableCertificates.first + 1 }} al
                    {{ tableCertificates.first + tableCertificates.rows }} de un
                    total de {{ tableCertificates.totalRecords }}</label
                  >
                  <label class="pr-3 numSeleccionados"
                    >Seleccionados: {{ numSelectedCertificates }}</label
                  >
                  <label>{{ "general.message.mostrar" | translate }}</label>
                  <p-dropdown
                    [(ngModel)]="selectedItemCertificates"
                    [options]="rowsPerPage"
                    (onChange)="onChangeRowsPerPagesCertificates($event)"
                  ></p-dropdown>
                  <label class="pl-1">
                    {{
                      "cargaMasivaDatñosCurriculares.numRegistros.literal"
                        | translate
                    }}</label
                  >
                </div>
              </ng-template>
            </p-dataTable>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer" *ngIf="esFichaActiva('certificate')">
      <div class="text-right main-button">
        <button
          *ngIf="pressNewCertificate"
          (click)="restCertificates()"
          pButton
          type="button"
          icon="fa fa-ban"
          iconPos="left"
          label="{{'general.boton.cancel' | translate}}"
        ></button>
        <button
          *ngIf="editCertificate || pressNewCertificate"
          pButton
          (click)="saveCertificateCourse()"
          type="button"
          icon="fa fa-search"
          iconPos="left"
          label="{{ 'general.boton.guardar' | translate }}"
          [disabled]="pressNewCertificate && validateCertificate() || !activacionEditar"
        ></button>
        <button
          *ngIf="editCertificate && !pressNewCertificate"
          pButton
          (click)="restCertificates()"
          type="button"
          icon="fa fa-undo"
          iconPos="left"
          label="{{ 'general.boton.restablecer'| translate }}"
        ></button>
        <button
        pButton
        (click)="saveCertificateCourse()"
        type="button"
        icon="far fa-save"
        iconPos="left"
        label="{{ 'general.boton.guardar' | translate }}"
        [disabled]="!(editCertificate && !pressNewCertificate) || pressNewCertificate && validateCertificate()"
      >
        <button
          [disabled]="!selectedDatosCertificates != ''"
          pButton
          (click)="deleteCertificates(selectedDatosCertificates)"
          type="button"
          icon="fa fa-trash-alt"
          iconPos="left"
          [disabled]="!activacionEditar"
          label="{{ 'general.boton.eliminar'| translate }}"
        ></button>
        <button
        [disabled]="selectMultipleCertificates || selectAllCertificates || (editCertificate && !pressNewCertificate)"
        pButton
        (click)="newCertificates()"
        type="button"
        icon="fa fa-plus"
        iconPos="left"
        label="{{ 'general.boton.new'| translate }}"
      ></button>
      </div>
    </div>
</div>

<!-- TERJETAS SESIONES -->
<div class="card">
  <!-- Cabecera -->
  <div class="card-header header-ficha" (click)="abreCierraFicha('session')">
    <div *ngIf="!esFichaActiva('session')" class="form-row">
      <div class="col-lg-1 col-md-2">
        <div class="img-colegiado"><i class="fa fa-user icon-ficha"></i></div>
      </div>
      <div class="col-lg-11 col-md-10">
        <div class="d-flex justify-content-start mt-2">
          <label class="mr-auto title-ficha">{{'formacion.fichaCursos.sesiones.cabecera' | translate}}</label>
        </div>
        <i class="fa fa-angle-down float-right"></i>
      </div>
    </div>
    <div
      *ngIf="esFichaActiva('session')"
      class=" header-ficha-open d-flex justify-content-start align-items-center"
    >
      <div class="img-colegiado"><i class="fa fa-user icon-ficha"></i></div>
      <label class="title-ficha">{{'formacion.fichaCursos.sesiones.cabecera' | translate}}</label>
      <i class="fa fa-angle-up ml-auto"></i>
    </div>
  </div>

  <!-- Cuerpo -->
  <div class="card-body card-body-ficha" *ngIf="esFichaActiva('session')">
    <div *ngIf="esFichaActiva('session')" class="card-body card-body-ficha">
      <div class="row">
        <p-dataTable
          emptyMessage="{{ 'general.message.no.registros' | translate}}"
          [ngClass]="{ customCursor: selectMultipleSessions }"
          [(selection)]="selectedDatosSessions"
          (onRowSelect)="irEditarSession(selectedDatosSessions)" 
          (onRowUnselect)="actualizaSeleccionadosSessions(selectedDatosSessions)"
          pageLinks="4"
          dataKey="idEvento"
          [responsive]="true"
          selectionMode="multiple"
          #tableSessions
          class="tabla-listado"
          [value]="datosSessions"
          [sortOrder]="sortO"
          [paginator]="true"
          paginatorPosition="both"
          [rows]="selectedSessions"
        >
          <p-column
            *ngFor="let col of colsSessions"
            [sortable]="true"
            [field]="col.field"
            [header]="col.header | translate"
            filterPlaceholder="{{'general.boton.search' | translate}}"
            [filter]="true"
            filterMatchMode="contains"
          >
          </p-column>
          <ng-template pTemplate="paginatorLeft">
            <div class="mostrar d-flex text-right justify-content-end">
              <label class="pr-3 registros-totales"
                >Mostrando registros del {{ tableSessions.first + 1 }} al
                {{ tableSessions.first + tableSessions.rows }} de un total de
                {{ tableSessions.totalRecords }}</label
              >
              <label class="pr-3 numSeleccionados"
                >Seleccionados: {{ numSelectedSessions }}</label
              >
              <label>{{ "general.message.mostrar" | translate }}</label>
              <p-dropdown
                [(ngModel)]="selectedSessions"
                [options]="rowsPerPage"
              ></p-dropdown>
              <label class="pl-1">
                {{
                  "cargaMasivaDatosCurriculares.numRegistros.literal"
                    | translate
                }}</label
              >
              <div class="ml-3 selectAllNotification">
                <p-checkbox
                  (onChange)="onChangeSelectAllSessions()"
                  [(ngModel)]="selectAllSessions"
                  binary="true"
                  label="Seleccionar todo"
                  name="groupname"
                ></p-checkbox>
              </div>
              <label
                class="ml-3 seleccionMultiple"
                [ngClass]="{ 'seleccion-multiple': selectMultipleSessions }"
                (click)="
                  isSelectMultipleSessions(); selectedDatosSessions = false
                "
              >
                <i class="pr-2 fa fa-mouse-pointer"></i
                >{{ "general.message.seleccion.multiple" | translate }}</label
              >
            </div>
          </ng-template>
        </p-dataTable>
      </div>
    </div>
  </div>
  <div class="card-footer" *ngIf="esFichaActiva('session')">
    <div class="text-right main-button">
        <button pButton type="button" icon="fa fa-reply-all" (click)="duplicateSession()" [disabled]="!activacionEditar" iconPos="left" label="{{ 'general.boton.duplicar' | translate}}" [disabled]="disabledDuplicate() || !activacionEditar" ></button>
          <button pButton type="button" icon="fa fa-plus" (click)="newSession()" [disabled]="!activacionEditar" iconPos="left" label="{{ 'general.boton.new' | translate}}"></button>
        <button pButton type="button" icon="fa fa-close" (click)="cancelSessions()" [disabled]="!activacionEditar" iconPos="left" label="{{ 'general.boton.cancel' | translate}}"  [disabled]="!selectMultipleSessions || !activacionEditar"></button>
    </div>
  </div>
</div>

<!-- TERJETAS CARGA MASIVA INSCRIPCIONES -->
<div class="card">
  <!-- Cabecera -->
  <div class="card-header header-ficha" (click)="abreCierraFicha('carga')">
    <div *ngIf="!esFichaActiva('carga')" class="form-row">
      <div class="col-lg-1 col-md-2">
        <div class="img-colegiado"><i class="fa fa-upload icon-ficha"></i></div>
      </div>
      <div class="col-lg-11 col-md-10">
        <div class="d-flex justify-content-start mt-2">
          <label class="mr-auto title-ficha">Carga Masiva Inscripciones</label>
        </div>
        <i class="fa fa-angle-down float-right"></i>
      </div>
    </div>
    <div
      *ngIf="esFichaActiva('carga')"
      class=" header-ficha-open d-flex justify-content-start align-items-center"
    >
      <div class="img-colegiado"><i class="fa fa-upload icon-ficha"></i></div>
      <label class="title-ficha">Carga Masiva Inscripciones</label>
      <i class="fa fa-angle-up ml-auto"></i>
    </div>
  </div>

  <!-- Cuerpo -->
  <div class="card-body card-body-ficha" *ngIf="esFichaActiva('carga')">
    <div *ngIf="esFichaActiva('carga')" class="card-body card-body-ficha">
      <div class="row">
          <p-dataTable emptyMessage="{{ 'general.message.no.registros' | translate}}" [ngClass]="{'customCursor': selectMultipleCargas}"
          [(selection)]="selectedDatosCargas" pageLinks="4" dataKey="idCargaInscripcion" [responsive]="true" selectionMode="multiple" #tableCargas class="tabla-listado"
          [value]="datosCargas" [sortOrder]="sortO" [paginator]="true" paginatorPosition="both" [rows]="selectedCargas">
          <p-column *ngFor="let col of colsCargas" [sortable]="true " [field]="col.field" [header]="col.header | translate" filterPlaceholder="{{'general.boton.search' | translate}}"
            [filter]="true" filterMatchMode="contains">

          <ng-template *ngIf="col.field == 'numeroLineasTotales'" let-dato="rowData" pTemplate="body">
              <label>
                    {{ dato[col.field] }}  /  {{ dato[col.field2] }}
                </label>
          </ng-template>

          </p-column>

          <ng-template pTemplate="paginatorLeft">
            <div class="mostrar d-flex text-right justify-content-end">
              <label class="pr-3 registros-totales">Mostrando registros del {{tableCargas.first + 1}} al {{tableCargas.first + tableCargas.rows}} de un total de {{tableCargas.totalRecords}}</label>
              <label class="pr-3 numSeleccionados">Seleccionados: {{numSelectedCargas}}</label>
              <label>{{ "general.message.mostrar" | translate}}</label>
              <p-dropdown [(ngModel)]="selectedCargas" [options]="rowsPerPage" (onChange)="onChangeRowsPerPagesCargas($event)"></p-dropdown>
              <label class="pl-1"> {{"cargaMasivaDatosCurriculares.numRegistros.literal" | translate}}</label>
              <div class="ml-3 selectAllNotification">
                <p-checkbox (onChange)="onChangeSelectAllCargas()" [(ngModel)]="selectAllCargas" binary="true" label="{{'tablas.literal.seleccionarTodo' | translate}}"
                  name="groupname"></p-checkbox>
              </div>
              <label class="ml-3 seleccionMultiple" [ngClass]="{'seleccion-multiple': selectMultipleCargas}" (click)="isSelectMultipleCargas(); selectedDatosCargas=false">
                <i class="pr-2 fa fa-mouse-pointer"></i>{{ "general.message.seleccion.multiple" | translate}}</label>
            </div>
          </ng-template>

        </p-dataTable>
      </div>
    </div>
  </div>
  <div class="card-footer" *ngIf="esFichaActiva('carga')">
    <div class="text-right main-button">

      <button pButton type="button" [disabled]="disabledDownload() || !activacionEditar" (click)="autovalidateInscriptions(selectedDatosCargas)" icon="fa fa-close" iconPos="left" label="Autovalidar"></button>

      <p-fileUpload mode="basic" #pUploadFile  chooseLabel="Cargar Archivo"
       class="edit my-0 mx-auto main-button" name="file" [disabled]="!activacionEditar"  accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
       (change)="getFile($event, form)"></p-fileUpload>
      <button pButton type="button" (click)="downloadTemplateFile()" icon="fa fa-download" [disabled]="!activacionEditar" iconPos="left" label="DescargarPlantilla"></button>
      <button pButton type="button" [disabled]="disabledDownload() || !activacionEditar"(click)="downloadFile(selectedDatosCargas)" icon="fa fa-download" iconPos="left" label="DescargarFichero"></button>
      <button pButton type="button" [disabled]="disabledOthersCargas() || !activacionEditar" (click)="deleteInscriptions(selectedDatosCargas)"icon="fa fa-trash-alt" iconPos="left" label="{{ 'general.boton.eliminar' | translate}}"></button>
     
    </div>
  </div>
</div>

<div class="mt-3 text-right main-button ">
  <button
    (click)="backTo()"
    pButton
    type="button "
    icon="fa fa-angle-left"
    iconPos="left"
    label="{{ 'general.boton.volver' | translate}}"
  ></button>
</div>

<div *ngIf="progressSpinner" class="overlay-spinner ">
  <div class="loader "></div>
</div>

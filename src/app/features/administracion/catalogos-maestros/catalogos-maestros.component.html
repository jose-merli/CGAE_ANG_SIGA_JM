<div class="busqueda-container">
  <div class="header-title">
    <i class="fa fa-square"></i>
    <p>Gestión de Catálogos Maestros</p>
  </div>
  <div class="breadCrumb">
    <p>Administración <i class="fa fa-angle-right"></i> Gestión de Catálogos Maestros </p>
  </div>
  <div class="card">
    <div class="card-header">
      <label>Búsqueda de Catálogos Maestros</label>
    </div>
    <div class="card-body">
      <p class="title-module">Datos generales<i (click)="onHideDatosGenerales()" *ngIf="showDatosGenerales" class="fa fa-angle-up float-right"></i><i
          (click)="onHideDatosGenerales()" *ngIf="!showDatosGenerales" class="fa fa-angle-down float-right"></i></p>

      <div *ngIf="showDatosGenerales" class="module vista-avanzada">
        <div class="form-row">
          <div class="form-group col-lg-4 col-md-4">
            <label>Seleccionar Catálogo (*)</label>

            <p-dropdown class="select-form" [(ngModel)]="body.catalogo" [options]="catalogoArray" [(disabled)]="blockSeleccionar" (onChange)="onChangeCatalogo()"></p-dropdown>
          </div>
          <div class="form-group col-lg-4 col-md-4">
            <label>Código externo</label>
            <input type="text" name="codigoBusqueda" value="" class="box" class="form-control" [(ngModel)]='formCodigo' (ngModelChange)="onChangeForm()"
              pInputText>
          </div>
          <div class="form-group col-lg-4 col-md-4">
            <label>Descripción</label>
            <input type="text" name="descripcionBusqueda" value="" class="box" class="form-control" [(ngModel)]='formDescripcion' (ngModelChange)="onChangeForm()"
              pInputText>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <div *ngIf="editar == false">

        <div class="text-right main-button ">
          <button (click)="isCrear()" pButton type="button " icon="	fa fa-plus-square " iconPos="left" label="Crear" [disabled]="blockCrear"></button>
          <!--deshabilitar botón a menos que el campo obligatorio esté relleno-->
          <button (click)="isBuscar()" pButton type="button " icon="fa fa-search " iconPos="left" label="Buscar" [disabled]="blockBuscar"></button>

        </div>
      </div>
      <!--botones que se activan al editar-->
      <div *ngIf="editar == true">
        <div class="text-right main-button ">
          <button (click)="isLimpiar(); selectedDatos=[];" pButton type="button " icon="fa fa-eraser" iconPos="left" label="Cancelar"></button>
          <!--deshabilitar botón a menos que el campo obligatorio esté relleno-->
          <button (click)="isEditar()" pButton type="button " icon="fa fa-save " iconPos="left" label="Editar"></button>
        </div>
      </div>
    </div>
    <!--FIN CARD-->
  </div>
  <!--FIN DE PRINCIPAL-->
</div>

<div *ngIf="buscar == true" class="card mt-3">
  <div class="card-body p-0">
    <p-dataTable [ngClass]="{'customCursor': selectMultiple}" [(selection)]="selectedDatos" (onRowSelect)="editarCatalogos(selectedDatos)"
      dataKey="descripcion" selectionMode="multiple" [responsive]="true" #table class="tabla-listado" [value]="datos" [sortOrder]="1"
      [paginator]="true" paginatorPosition="both" [rows]="selectedItem">
      <p-column *ngFor="let col of cols" [sortable]="true " [field]="col.field" [header]="col.header"> </p-column>

      <ng-template pTemplate="paginatorLeft">
        <label class="pr-3 registros-totales">Mostrando registros del {{table.first + 1}} al {{table.first + table.rows}} de un total de {{table.totalRecords}}</label>
        <label>Mostrar <p-dropdown [(ngModel)]="selectedItem"  [options]="rowsPerPage" (onChange)="onChangeRowsPerPages($event)"></p-dropdown> registros</label>
      </ng-template>

      <p-footer *ngIf="eliminacion">
        <div class="text-right main-button">
          <button (click)="isEliminar(selectedDatos)" pButton type="button" icon="fa fa-trash-alt " iconPos="left" label="Eliminar"></button>
        </div>
      </p-footer>
      </p-dataTable>
  </div>
</div>
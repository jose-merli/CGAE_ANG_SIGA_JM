<p-growl [(value)]="msgs" life="3000"></p-growl>
<div class="busqueda-container">
  <div class="header-title">
    <i class="fa fa-square"></i>
    <p>Búsqueda de Usuarios</p>
  </div>
  <div class="breadCrumb">
    <p>Administración <i class="fa fa-angle-right"></i> Usuarios </p>
  </div>
  <div class="card">
    <div class="card-header">
      <label>Búsqueda de Usuarios</label>
    </div>
    <div class="card-body">
      <p class="title-module">Datos generales<i (click)="onHideDatosGenerales()" *ngIf="showDatosGenerales" class="fa fa-angle-up float-right"></i><i
          (click)="onHideDatosGenerales()" *ngIf="!showDatosGenerales" class="fa fa-angle-down float-right"></i></p>

      <div *ngIf="showDatosGenerales" class="module vista-avanzada">
        <div class="form-row">
          <div class="form-group col-lg-3 col-md-3">
            <label>Nombre y Apellidos</label>
            <input type="text" name="nombreApellidos" [(disabled)]="editar" class="form-control" [(ngModel)]='body.nombreApellidos' (ngModelChange)="onChangeForm()"
              pInputText>

          </div>
          <div class="form-group col-lg-3 col-md-3">
            <label>NIF</label>
            <input type="text" name="NIF" class="form-control" [(disabled)]="editar" [(ngModel)]='body.nif' (ngModelChange)="onChangeForm()"
              pInputText>
              <div *ngIf="dniCorrecto == false"><label class="labelError">NIF INCORRECTO</label></div>
              <div *ngIf="dniCorrecto == true"><label class="labelOK">NIF CORRECTO</label></div>

          </div>
          <div *ngIf="editar == false" class="form-group col-lg-3 col-md-3">
          </div>
          <div *ngIf="editar == false" class="form-group col-lg-3 col-md-3">
          </div>
          <div *ngIf="editar == false" class="form-group col-lg-3 col-md-3">
            <label>Rol</label>
            <p-dropdown class="select-form" [(ngModel)]='body.rol' [(disabled)]="editar" [options]="usuarios_rol" (ngModelChange)="onChangeForm()"></p-dropdown>
            <!--<select id="idRolBusqueda" [(ngModel)]='body.rol' name="idRolBusqueda" class="select-form">
              <option value="" selected></option>
              <option *ngFor="let i of usuarios_rol" [ngValue]="i">{{ i.value }}</option>
              </select>-->
            <img id="idRolBusqueda_loading" src="html/imagenes/loading-spinner.gif" alt="Cargando..." style="visibility:hidden">
          </div>
          <div *ngIf="editar == true" class="form-group col-lg-3 col-md-3">
          </div>
          <div *ngIf="editar == true" class="form-group col-lg-3 col-md-3">
          </div>
          <div class="form-group col-lg-3 col-md-3">
            <label>Grupo</label>
            <p-dropdown class="select-form" [(ngModel)]='body.grupo' [options]="usuarios_perfil" (ngModelChange)="onChangeForm()"></p-dropdown>
          </div>

          <div *ngIf="editar == true" class="form-group col-lg-3 col-md-3">
            <label>Codigo Externo</label>
            <input type="text" name="codExterno" class="form-control" [(disabled)]="!editar" [(ngModel)]='body.codigoExterno' (ngModelChange)="onChangeForm()"
              pInputText>
          </div>
          <div class="form-group col-lg-3 col-md-3">
            <label class="d-block pb-2">Activo</label>
            <!--<p-dropdown class="select-form" [options]="select"></p-dropdown>-->
            <p-radioButton label="Sí" name="activo" value="S" class="pr-3" [(ngModel)]="body.activo" [(disabled)]="disabledRadio"></p-radioButton>
            <p-radioButton label="No" name="activo" value="N" class="pr-3" [(ngModel)]="body.activo" [(disabled)]="disabledRadio"> </p-radioButton>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <div class="text-right main-button ">
        <div class="row">
          <div *ngIf="editar == true" class=" col-2 offset-10">
            <button (click)="sendEdit();" pButton type="button" icon="	fa fa-edit " iconPos="left" label="Editar"></button>
            <button (click)="cancelar(); selectedDatos = false;" pButton type="button" icon="	fa fa-close " iconPos="left" label="Cancelar"></button>
          </div>
          <div *ngIf="editar == false" class="col-2 offset-10">
            <button (click)="crear()" pButton type="button" icon="	fa fa-plus-square " iconPos="left" label="Crear" [disabled]="blockCrear"></button>
            <button (click)="isBuscar(); selectedDatos = false" pButton type="button " icon="fa fa-search " iconPos="left" label="Buscar"></button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--FIN CARD-->
  <div *ngIf="buscar == true" class="card mt-3">
    <div class="card-body p-0">

      <p-dataTable [ngClass]="{'customCursor': selectMultiple}" [(selection)]="selectedDatos" (onRowSelect)="editarUsuario(selectedDatos)"
        dataKey="nif" [responsive]="true" selectionMode="multiple" #table class="tabla-listado" [value]="datos" [sortOrder]="1"
        [paginator]="true" paginatorPosition="both" [rows]="selectedItem">
        <p-column *ngFor="let col of cols" [sortable]="true " [field]="col.field" [header]="col.header"> </p-column>
        <!--<p-column [sortable]="true " field="numColegiado " header="Nº colegiado" filterPlaceholder="&#xf002; "></p-column>
        <p-column [sortable]="true " field="apellidos " header="Apellidos" filterPlaceholder="&#xf002; "></p-column>
        <p-column [sortable]="true " field="nombre" header="Nombre" filterPlaceholder="&#xf002; "></p-column>
        <p-column [sortable]="true " field="fechaIngreso" header="fecha de ingreso" filterPlaceholder="&#xf002; "></p-column>
        <p-column [sortable]="true " field="estadoColegial" header="Estado colegial" filterPlaceholder="&#xf002; "></p-column>
        <p-column [sortable]="true " field="residente" header="Residente" filterPlaceholder="&#xf002; "></p-column>
        <p-column [sortable]="true " field="nombre" header="Nombre" filterPlaceholder="&#xf002; "></p-column>-->

        <ng-template pTemplate="paginatorLeft">
          <label class="pr-3 registros-totales">Mostrando registros del {{table.first + 1}} al {{table.first + table.rows}} de un total de {{table.totalRecords}}</label>
          <label>Mostrar <p-dropdown [(ngModel)]="selectedItem"  [options]="rowsPerPage" (onChange)="onChangeRowsPerPages($event)"></p-dropdown> registros</label>
        </ng-template>


        <p-footer *ngIf="selectedDatos">

          <div *ngIf="activo==true" class="text-right main-button">
            <button (click)="borrar(selectedDatos)" pButton type="button" icon="fa fa-check" iconPos="left" label="Rehabilitar"></button>
          </div>
          <div *ngIf="activo==false" class="text-right main-button">
            <button (click)="borrar(selectedDatos)" pButton type="button" icon="fa fa-trash-alt " iconPos="left" label="Eliminar"></button>
          </div>
        </p-footer>
        </p-dataTable>
    </div>
  </div>
  <!--FIN DE PRINCIPAL-->
  <app-dialog></app-dialog>
</div>
<p-growl (onHover)="clear()" [(value)]="msgs" life="30000"></p-growl>
<div class="busqueda-container">
  <div class="card">
    <div class="card-header header-ficha">
      <div *ngIf="!openFicha" class="form-row">
        <div class="col-lg-1 col-md-2" (click)="abreCierraFicha()">
          <div class="img-colegiado">
            <i class="fas fa-gavel icon-ficha"></i>
          </div>
        </div>
        <div class="col-lg-11 col-md-10 ">
          <div class="d-flex justify-content-end mb-1" (click)="abreCierraFicha()">
            <label class="mr-auto title-ficha">{{ 'justiciaGratuita.maestros.fundamentosResolucion.resolucion' | translate }}</label>
          </div>
          <div class="d-flex justify-content-between">
              <label>{{ "censo.resultadosSolicitudesModificacion.literal.fecha" | translate }}: <span *ngIf="resolucion">{{resolucion.fechaResolucionCAJG | date: 'dd/MM/yyyy'}}</span></label>
              <label>{{ "justiciaGratuita.ejg.datosGenerales.TipoResolucion" | translate }}: <span>{{ResolDesc}}</span></label>
              <label id ="maxHeader">{{ "justiciaGratuita.ejg.datosGenerales.Fundamento" | translate }}: <span>{{fundamentoJuridicoDesc}}</span></label>
              <i class="fa fa-angle-down float-right" (click)="abreCierraFicha()"></i>
          </div>
        </div>
      </div>
      <div *ngIf="openFicha" class=" header-ficha-open d-flex justify-content-start align-items-center" (click)="abreCierraFicha()">
        <div class="img-colegiado">
          <i class="fas fa-gavel icon-ficha"></i>
        </div>
        <label class="title-ficha">{{ 'justiciaGratuita.maestros.fundamentosResolucion.resolucion' | translate }}</label>
        <i class="fa fa-angle-up ml-auto"></i>
      </div>
    </div>

    <div *ngIf="openFicha" class="card-body card-body-ficha">
      <div class="row">
        <div class="bloque col-lg-12 col-md-12">
          <label style="text-align:center; font-weight: bold; padding-bottom: 10px"> {{ "censo.busquedaClientes.literal.datosIdentificacion" | translate}} </label>
          <div class="form-row">
              <div class="form-group col-lg-3 col-md-3">
                <label>{{ "justiciaGratuita.ejg.datosGenerales.AnnioActa" | translate }} -- {{ "justiciaGratuita.ejg.datosGenerales.FechaResolucion" | translate }}</label>
                <p-dropdown class="select-form" [(ngModel)]='resolucion.idAnnioActa' placeholder="Seleccionar" [options]="comboActaAnnio"
                  [filter]="true" filterBy="label,labelSinTilde" [showClear]="true"></p-dropdown>
              </div>
              <div class="form-group col-lg-6 col-md-6">
                <label>{{ "justiciaGratuita.maestros.fundamentosResolucion.resolucion" | translate }}</label>
                <p-dropdown class="select-form" [(ngModel)]='resolucion.idTiporatificacionEJG' placeholder="Seleccionar" [options]="comboResolucion"
                  [filter]="true" filterBy="label,labelSinTilde"  (onChange)="onChangeResolucion()" [showClear]="true"></p-dropdown>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-lg-6 col-md-6">
                <label>{{ "menu.justiciaGratuita.maestros.fundamentosResolucion" | translate }}</label>
                <p-dropdown class="select-form" [(ngModel)]='resolucion.idFundamentoJuridico' placeholder="Seleccionar" [options]="comboFundamentoJurid"
                  [filter]="true" [(disabled)]="isDisabledFundamentosJurid" filterBy="label,labelSinTilde" [showClear]="true"></p-dropdown>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-lg-9 col-md-9">
                  <label>{{ "censo.nuevaSolicitud.observaciones" | translate }}</label>
                  <textarea pInputTextarea [(ngModel)]="resolucion.ratificacionDictamen" [disabled]="!permisoEscritura" class="form-control ui-inputtext" autoResize="autoResize" maxLength="3900"></textarea>
                </div>
                <div class="form-group col-lg-9 col-md-9">
                  <label>{{ "justiciaGratuita.ejg.datosGenerales.Notas" | translate }}</label>
                  <textarea [rows]="10" [cols]="10" pInputTextarea [(ngModel)]="resolucion.notasCAJG" [disabled]="!permisoEscritura" class="form-control ui-inputtext" autoResize="autoResize" maxLength="3900"></textarea>
                </div>
            </div>
            <div class="form-row">
              <div class="col-lg-6 form-row col-md-6">
                <div class="form-group col-lg-4 col-md-4">
                  <label>{{ 'justiciaGratuita.ejg.datosGenerales.CAJG' | translate}} {{ 'justiciaGratuita.ejg.datosGenerales.annioNum' | translate}}</label>
                  <input type="text" class="form-control" maxLength="50" pInputText [(ngModel)]="resolucion.anioCAJG">
                </div>
                <div class="form-group col-lg-8 col-md-8">
                    <label> </label>
                  <input type="text" class="form-control" maxLength="10" pInputText [(ngModel)]="resolucion.numeroCAJG">
                </div>
              </div>
              <div class="col-lg-6 col-md-6">
                <label>{{"menu.expediente.sanciones.busquedaPorSanciones.origen.literal" | translate}}</label>
                <p-dropdown class="select-form" [(ngModel)]='resolucion.idOrigencajg' placeholder="Seleccionar" [options]="comboOrigen" [filter]="true"
                  filterBy="label,labelSinTilde" [showClear]="true"></p-dropdown>
              </div>
            </div>
            <div class="form-row">
              <div class="col-lg-6 col-md-6">
                <label>{{"justiciaGratuita.ejg.datosGenerales.Ponente" | translate}}</label>
                <p-dropdown class="select-form" [(ngModel)]='resolucion.idPonente' placeholder="Seleccionar" [options]="comboPonente" [filter]="true"
                  filterBy="label,labelSinTilde" [showClear]="true"></p-dropdown>
              </div>
              <div class="form-group col-lg-3 col-md-3">
                  <label>{{"justiciaGratuita.ejg.datosGenerales.FechaPresPonente" | translate}}</label>
                  <app-fecha [(value)]="resolucion.fechaPresentacionPonente" (valueChangeSelected)="fillFechaPresPonente($event)" (valueChangeInput)="fillFechaPresPonente($event)"></app-fecha>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-lg-3 col-md-3">
                <label>{{ 'justiciaGratuita.ejg.datosGenerales.FechaResCAJG' | translate }}</label>
                <app-fecha [(value)]="resolucion.fechaResolucionCAJG"(valueChangeSelected)="fillFechaResCAJG($event)" (valueChangeInput)="fillFechaResCAJG($event)"></app-fecha>
              </div>
              <div class="form-group col-lg-3 col-md-3">
                  <label>{{ 'censo.resultadosSolicitudesModificacion.literal.fecha' | translate }} {{ 'formacion.fichaCalendario.notificacion.cabecera' | translate }}</label>
                  <app-fecha [(value)]="resolucion.fechaNotificacion"(valueChangeSelected)="fillFechaNotif($event)" (valueChangeInput)="fillFechaNotif($event)"></app-fecha>
              </div>
              <div class="form-group col-lg-3 col-md-3">
                <label>{{ 'justiciaGratuita.ejg.datosGenerales.FechaResFirme' | translate }}</label>
                <app-fecha [(value)]="resolucion.fechaRatificacion"(valueChangeSelected)="fillFechaResFirme($event)" (valueChangeInput)="fillFechaResFirme($event)"></app-fecha>
              </div>
            </div>
            <div class="form-row">
                <div class="form-group col-lg-3 col-md-3">
                    <label>{{ "justiciaGratuita.ejg.datosGenerales.RefaAuto" | translate }}</label>
                    <input type="text" class="form-control" pInputText [(ngModel)]="resolucion.refAuto">
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <br>
                    <p-checkbox (onClick)="onChangeCheckT($event)" [(ngModel)]="resolucion.turnadoRatificacion" binary="true" label="{{ 'justiciaGratuita.ejg.datosGenerales.RequiereTurnado' | translate }}"
                    name="groupname" [disabled]="!permisoEscritura"></p-checkbox>
                </div>
                <div class="form-group col-lg-3 col-md-3">
                    <br>
                    <p-checkbox (onClick)="onChangeCheckR($event)" [(ngModel)]="resolucion.requiereNotificarProc" binary="true" label= "{{ 'justiciaGratuita.ejg.datosGenerales.NotificarProcurador' | translate }}"
                    name="groupname" [disabled]="!permisoEscritura"></p-checkbox>
                </div>
            </div>
          </div>
      </div>
    </div>
    <div *ngIf="openFicha" class="card-footer">
      <div class="text-right main-button ">
        <button (click)="checkPermisosOpenActa()" pButton [disabled]="!permisoEscritura" type="button" label="{{ 'general.boton.abrirActa' | translate}}"></button>
        <button (click)="checkPermisosRest()" pButton [disabled]="!permisoEscritura" type="button" icon="fa fa-undo" iconPos="left" label="{{ 'general.boton.restablecer' | translate}}"></button>
        <button (click)="checkPermisosSave()" pButton [disabled]="!permisoEscritura || disabledSave()" type="button" icon="far fa-save" iconPos="left"
        label="{{ 'general.boton.guardar' | translate}}"></button>
      </div>
    </div>
    </div>
    </div>
  <div *ngIf="progressSpinner" class="overlay-spinner">
  <div class="loader"></div>
</div>
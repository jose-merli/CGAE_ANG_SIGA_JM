<div *ngIf="progressSpinner" class="overlay-spinner">
  <div class="loader"></div>
</div>

<div class="ficha-comunicacion-container" id="mainContainer">
  <div class="header-title">
    <i class="fa fa-square"></i>
    <p>{{'menu.justiciaGratuita' | translate}}
      <i class="fa fa-angle-right"></i> {{ 'menu.justiciaGratuita.justiciables' | translate }}
      <i class="fa fa-angle-right"></i> {{ 'menu.justiciaGratuita.justiciables.gestionjusticiables' | translate }}
    </p>
  </div>
  <div>
    
    <app-tarjeta-resumen-fija class="pb-50" [chincheta]="true" [datos]="datosResumen" [icono]="'clipboard'" [enlaces]="enlacesResumen" (isOpen)="openTarjeta($event)"></app-tarjeta-resumen-fija>

    <app-datos-generales id="tarjetaGenerales" [body]="body" [bodyInicial]="bodyInicial" [modoEdicion]="modoEdicion" [permisoEscritura]="isPermisoTarjeta('tarjetaGenerales')" 
      [showTarjeta]="isOpenTarjeta('tarjetaGenerales')" [origen]="origen" [justiciable]="justiciable" (asuntosChange)="updateAsuntos($event)" (bodyChange)="updateBody($event)" (showDialog)="abrirDialog($event)"></app-datos-generales>

    <app-datos-personales *ngIf="modoEdicion" id="tarjetaPersonales" [body]="body" [bodyInicial]="bodyInicial" [modoEdicion]="modoEdicion" [permisoEscritura]="isPermisoTarjeta('tarjetaPersonales')" 
      [showTarjeta]="isOpenTarjeta('tarjetaPersonales')" [origen]="origen" (bodyChange)="updateBody($event)" (showDialog)="abrirDialog($event)"></app-datos-personales>

    <app-datos-unidad-familiar *ngIf="modoEdicion && origen == 'UnidadFamiliar'" id="tarjetaUnidadFamiliar" [modoEdicion]="modoEdicion" [permisoEscritura]="isPermisoTarjeta('tarjetaUnidadFamiliar')" 
      [showTarjeta]="isOpenTarjeta('tarjetaProcurador')" [body]="body" [unidadFamiliar]="unidadFamiliar"></app-datos-unidad-familiar>

    <app-datos-solicitud *ngIf="modoEdicion" id="tarjetaSolicitud" [body]="body" [bodyInicial]="bodyInicial" [modoEdicion]="modoEdicion" [permisoEscritura]="isPermisoTarjeta('tarjetaSolicitud')" 
      [showTarjeta]="isOpenTarjeta('tarjetaSolicitud')" [origen]="origen" (bodyChange)="updateBody($event)" (showDialog)="abrirDialog($event)"></app-datos-solicitud>

    <app-datos-representante *ngIf="modoEdicion" id="tarjetaRepresentante" [modoEdicion]="modoEdicion" [permisoEscritura]="isPermisoTarjeta('tarjetaRepresentante')" 
      [showTarjeta]="isOpenTarjeta('tarjetaRepresentante')" [body]="body" [origen]="origen" (bodyChange)="updateBody($event)" (showDialog)="abrirDialog($event)"></app-datos-representante>
    
    <app-asuntos *ngIf="modoEdicion" id="tarjetaAsunto" [modoEdicion]="modoEdicion" [permisoEscritura]="isPermisoTarjeta('tarjetaAsunto')" 
      [showTarjeta]="isOpenTarjeta('tarjetaAsunto')" [body]="body" [origen]="origen" (bodyChange)="updateBody($event)"></app-asuntos>

    <app-datos-abogado-contrario *ngIf="modoEdicion && (origen == 'ContrarioEJG' || origen == 'Contrario')" id="tarjetaAbogado" [modoEdicion]="modoEdicion" [permisoEscritura]="isPermisoTarjeta('tarjetaAbogado')" 
      [showTarjeta]="isOpenTarjeta('tarjetaAbogado')" [body]="body" [origen]="origen" [contrario]="contrario"></app-datos-abogado-contrario> 

    <app-datos-procurador-contrario *ngIf="modoEdicion && (origen == 'ContrarioEJG' || origen == 'Contrario')" id="tarjetaProcurador" [modoEdicion]="modoEdicion" [permisoEscritura]="isPermisoTarjeta('tarjetaProcurador')" 
      [showTarjeta]="isOpenTarjeta('tarjetaProcurador')" [body]="body" [origen]="origen" [contrario]="contrario"></app-datos-procurador-contrario>

  </div>
</div>

<div class="mt-3 text-right main-button ">
  <button (click)="backTo()" pButton type="button" icon="fa fa-angle-left" iconPos="left" label="{{ 'general.boton.volver' | translate }}"></button>
</div>

<p-dialog [(visible)]="showDialog" responsive="true" [draggable]="false"  resizable="false" width="550">
  <p-header><label>{{'general.gestionJusticiables.confirmacion' | translate}}</label></p-header>
  <div class="row">
    <div class="form-group col-lg-8 col-md-8">
      <label>{{'general.gestionJusticiables.textoConfirmacionUp' | translate}}</label>
    </div>
  </div>
  <div class="field-radiobutton">
    <p-radioButton class="radio-style"  name="sustituir" value="s" label="{{'general.gestionJusticiables.confirmacionSustituir' | translate}}" [(ngModel)]='dialogOpcion'></p-radioButton>
  </div>
  <div class="field-radiobutton">
    <p-radioButton class="radio-style" name="nuevo" value="n" label="{{'general.gestionJusticiables.confirmacionNuevo' | translate}}" [(ngModel)]='dialogOpcion'></p-radioButton>
  </div>
  <label>{{'general.gestionJusticiables.textoConfirmacionDown' | translate}}</label>
  <p-footer>
    <div class="text-right main-button ">
      <button (click)="guardarDialog()" pButton type="button" icon="fa fa-check" iconPos="left" label="{{'general.boton.guardar' | translate}}"></button>
      <button (click)="cerrarDialog()" pButton type="button" icon="fa fa-close " iconPos="left" label="{{'general.boton.cancel' | translate}}"></button>
    </div>
  </p-footer>
</p-dialog>
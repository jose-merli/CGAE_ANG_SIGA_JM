<div *ngIf="progressSpinner" class="overlay-spinner">
  <div class="loader"></div>
</div>

<div class="ficha-container" id="unidadFamiliar">
  <div class="card">
    <div class="card-header header-ficha" (click)="onHideTarjeta()">
      <div *ngIf="showTarjeta" class="header-ficha-open d-flex justify-content-start align-items-center">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado">
            <i class="fa fa-users icon-ficha"></i>
          </div>
        </div>
        <label class="title-ficha">{{ 'gratuita.personaJG.literal.unidadFamiliar' | translate }}</label>
        <div class="d-flex justify-content-start mb-1 ml-auto">
          <i class="fa fa-angle-up ml-auto"></i>
        </div>
      </div>
      <div *ngIf="!showTarjeta" class="form-row">
        <div class="col-lg-1 col-md-2">
          <div class="img-colegiado">
            <i class="fa fa-users icon-ficha"></i>
          </div>
        </div>
        <div class="col-lg-11 col-md-10">
          <div class="d-flex justify-content-start mb-1">
            <label class="mr-auto title-ficha">{{ 'gratuita.personaJG.literal.unidadFamiliar' | translate }}</label>
          </div>
          <div class="row ">
            <div class="col-2">
              <label>{{ "administracion.usuarios.literal.rol" | translate }}: <span>{{ unidadFamiliar.labelEnCalidad }}</span></label>
            </div>
            <div class="col-2">
              <label>{{ "informes.solicitudAsistencia.parentesco" | translate }}: <span>{{ parentescoCabecera }}</span></label>
            </div>
            <div class="col-2">
              <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.grupoLaboral" | translate }}: <span>{{ nombreGrupoLab }}</span></label>
            </div>
            <div class="col-2">
              <label>{{ "facturacion.facturas.importeTotal" | translate }}: <span>{{ impTotal }} €</span></label>
            </div>
            <div class="col-4 d-flex justify-content-end">
              <i class="fa fa-angle-down float-right"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div [hidden]="!showTarjeta" class="card-body card-body-ficha">
      <div class="form-row d-flex justify-content-around">
        <div class="form-group row col-lg-4 col-md-4 border-right hiddenBorder">
          <!-- info identificacion -->
          <div class="form-group col-lg-12 col-md-12 input-ayuda">
            <label style="font-weight: bold;">{{ 'justiciaGratuita.justiciables.unidadFamiliar.datosFinancieros' | translate }}</label>
          </div>
          <div class="form-group col-12">
            <label>{{ "administracion.usuarios.literal.rol" | translate }}/{{"justiciaGratuita.justiciables.rol.solicitante" | translate }} (*)</label>
            <p-dropdown class="select-form" [(ngModel)]='unidadFamiliar.uf_enCalidad' placeholder="Seleccionar" [options]="comboRol" [filter]="true" 
            filterBy="label,labelSinTilde" [showClear]="true" [ngClass]="styleObligatorio(unidadFamiliar.uf_enCalidad)"></p-dropdown>
          </div>
          <div class="form-group col-12">
            <label>{{ "informes.solicitudAsistencia.parentesco" | translate }} (*)</label>
            <p-dropdown class="select-form" [(ngModel)]='unidadFamiliar.idParentesco' placeholder="Seleccionar" [options]="comboParentesco" [filter]="true" 
            filterBy="label,labelSinTilde" [showClear]="true" [ngClass]="styleObligatorio(unidadFamiliar.idParentesco)"></p-dropdown>
          </div>
          <div class="form-group col-12 d-flex ">
            <p-checkbox [(ngModel)]="unidadFamiliar.incapacitado" [disabled]="!permisoEscritura" binary="true" class="ml-0"></p-checkbox>
            <label class="ml-2">{{ "justiciaGratuita.justiciables.unidadFamiliar.incapacitado" | translate }}</label>
          </div>
          <div class="form-group col-12 d-flex ml-0">
            <p-checkbox [(ngModel)]="unidadFamiliar.circunsExcep" [disabled]="!permisoEscritura" binary="true" class="ml-0"></p-checkbox>
            <label class="ml-2">{{ "justiciaGratuita.justiciables.unidadFamiliar.circunstanciasExcepcionales" | translate }}</label>
          </div>
          <div class="form-group col-12">
            <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.grupoLaboral" | translate }}</label>
            <p-dropdown class="select-form" [(ngModel)]='unidadFamiliar.idTipoGrupoLab' placeholder="Seleccionar"
              [options]="comboGrupoLaboral" [filter]="true" filterBy="label,labelSinTilde" [showClear]="true"></p-dropdown>
          </div>
        </div>
        <div class="form-group row col-lg-4 col-md-4">
          <!-- Datos Financieros -->
          <div class="col-12 form-group">
            <label style="font-weight: bold">{{"justiciaGratuita.justiciables.unidadFamiliar.datosFinancieros" | translate }}</label>
          </div>
          <div class="form-group col-12">
            <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.tipoIngresos" | translate }}</label>
            <p-dropdown class="select-form" [(ngModel)]='unidadFamiliar.idTipoIngreso' placeholder="Seleccionar"
              [options]="comboTipoIng" [filter]="true" filterBy="label,labelSinTilde" [showClear]="true"></p-dropdown>
          </div>
          <!-- Ingresos Texto -->
          <div class="form-group col-12">
            <div class="d-flex">
              <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.ingresos" | translate }}</label>
              <label style="color: gray;" class="ml-1">({{ "busquedaSanciones.detalleSancion.texto.literal" | translate }})</label>
            </div>
            <input type="text" [(ngModel)]="unidadFamiliar.descrIngrAnuales" [maxLength]="60" class="form-control" pInputText>
          </div>
          <!-- Bienes Texto -->
          <div class="form-group col-12">
            <div class="d-flex">
              <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.bienesInmuebles" | translate }}</label>
              <label style="color: gray;" class="ml-1">({{ "busquedaSanciones.detalleSancion.texto.literal" | translate }})</label>
            </div>
            <input type="text" [(ngModel)]="unidadFamiliar.bienesInmu" [maxLength]="60" class="form-control" pInputText>
          </div>
          <!-- Mobilarios Texto -->
          <div class="form-group col-12">
            <div class="d-flex">
              <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.ingresos" | translate }}</label>
              <label style="color: gray;" class="ml-1">({{ "busquedaSanciones.detalleSancion.texto.literal" | translate }})</label>
            </div>
            <input type="text" [(ngModel)]="unidadFamiliar.bienesMu" [maxLength]="60" class="form-control" pInputText>
          </div>
          <!-- Otros Texto -->
          <div class="form-group col-12">
            <div class="d-flex">
              <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.otrosBienes" | translate }}</label>
              <label style="color: gray;" class="ml-1">({{ "busquedaSanciones.detalleSancion.texto.literal" | translate }})</label>
            </div>
            <input type="text" [(ngModel)]="unidadFamiliar.otrosBienes" [maxLength]="60" class="form-control" pInputText>
          </div>
        </div>
        <div class="form-group row col-lg-4 col-md-4">
          <!-- Datos Financieros -->
          <div class="col-12 form-group">
            <label style="font-weight: bold;visibility:hidden">{{ "justiciaGratuita.justiciables.unidadFamiliar.datosFinancieros" | translate }}</label>
          </div>
          <div class="form-group col-12">
            <label>{{ "justiciaGratuita.Calendarios.Observaciones" | translate }}</label>
            <input type="text" [(ngModel)]="unidadFamiliar.observaciones" [maxLength]="60" class="form-control" pInputText>
          </div>
          <!-- Ingresos Valor  -->
          <div class="form-group col-12">
            <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.ingresos" | translate }}</label>
            <div class="d-flex">
              <input type='number' [(ngModel)]="unidadFamiliar.impIngrAnuales" [maxLength]="10" class="form-control" (keypress)="numberOnly($event)" pInputText>
              <span class="m-auto pl-2">€</span>
            </div>
          </div>
          <!-- Bienes Valor  -->
          <div class="form-group col-12">
            <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.bienesInmuebles" | translate }}</label>
            <div class="d-flex">
              <input type='number' [(ngModel)]="unidadFamiliar.impBienesInmu" [maxLength]="10" class="form-control" (keypress)="numberOnly($event)" pInputText>
              <span class="m-auto pl-2">€</span>
            </div>
          </div>
          <!-- Mobilarios Valor  -->
          <div class="form-group col-12">
            <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.bienesMobiliarios" | translate }}</label>
            <div class="d-flex">
              <input type='number' [(ngModel)]="unidadFamiliar.impBienesMu" [maxLength]="10" class="form-control" (keypress)="numberOnly($event)" pInputText>
              <span class="m-auto pl-2">€</span>
            </div>
          </div>
          <!-- Otros Valor  -->
          <div class="form-group col-12">
            <label>{{ "justiciaGratuita.justiciables.unidadFamiliar.otrosBienes" | translate }}</label>
            <div class="d-flex">
              <input type='number' [(ngModel)]="unidadFamiliar.impOtrosBienes" [maxLength]="10" class="form-control" (keypress)="numberOnly($event)" pInputText>
              <span class="m-auto pl-2">€</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div [hidden]="!showTarjeta" class="card-footer">
    <div class="text-right main-button">
      <button (click)="rest()" pButton type="button" icon="fa fa-undo" iconPos="left" label="{{ 'general.boton.restablecer' | translate}}"></button>
      <button (click)="save()" pButton type="button" icon="fa fa-save" iconPos="left" label="{{ 'general.boton.guardar' | translate}}"></button>
    </div>
  </div>
</div>
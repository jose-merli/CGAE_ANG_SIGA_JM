<div class="busqueda-container">
  <div class="header-title">
    <i class="fa fa-square"></i>
    <p>
      {{ "menu.agenda" | translate }} >
      {{ "formacion.fichaCalendario.notificacion.cabecera" | translate }}
    </p>
  </div>

  <div class="card">
    <div class="card-body">
      <p class="title-module">
        {{
          "formacion.datosNotificaciones.configuracionNotificacion.cabecera"
            | translate
        }}
        <i class="fa fa-angle-down float-right"></i>
      </p>
      <div class="card-body card-body-ficha">
        <div class="form-row mb-4">
          <div class="bloque col-lg-6 col-md-6">
            <div class="row mb-4">
              <label>
                <strong
                  >{{
                    "formacion.datosNotificaciones.datosEnvio.cabecera"
                      | translate
                  }}:</strong
                >
              </label>
            </div>
            <div class="row mb-4">
              <div class="col-lg-6 col-md-6">
                <label
                  >{{
                    "formacion.datosNotificaciones.tipoNotificacion.cabecera"
                      | translate
                  }}
                  (*)</label
                >
                <p-dropdown
                  class="select-form"
                  [(ngModel)]="notification.idTipoNotificacion"
                  [options]="comboNotifyType"
                  [filter]="true"
                  filterBy="label,labelSinTilde"
                  placeholder="{{ 'general.boton.seleccionar' | translate }}"
                  name="type"
                  [disabled]="tipoAccesoLectura || notificationLowDate || isEventoCumplidoOrCancelado"
                ></p-dropdown>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6 col-md-6">
                <label
                  >{{ "menu.facturacion.plantillas" | translate }} (*)</label
                >
                <p-dropdown
                  class="select-form"
                  [options]="comboTemplates"
                  [(ngModel)]="selectedTemplate"
                  [filter]="false"
                  name="idPlantilla"
                  placeholder="{{ 'general.boton.seleccionar' | translate }}"
                  (onChange)="onChangeTemplates($event)"
                  [disabled]="tipoAccesoLectura || notificationLowDate || isEventoCumplidoOrCancelado"
                ></p-dropdown>
              </div>
              <div class="col-lg-6 col-md-6">
                <label
                  >{{
                    "envios.plantillas.literal.tipoenvio" | translate
                  }}
                  (*)</label
                >
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="notification.tipoEnvio"
                  [disabled]="disabledTypeSend"
                  pInputText
                  name="tipoEnvio"
                />
              </div>
            </div>
          </div>
          <div class="bloque col-lg-6 col-md-6">
            <div class="row mb-4">
              <label>
                <strong
                  >{{
                    "formacion.datosNotificaciones.cuando.cabecera" | translate
                  }}:
                </strong>
              </label>
            </div>
            <div class="row mb-4">
              <div class="col-lg-6 col-md-6">
                <label
                  >{{
                    "certificados.mantenimiento.literal.valor" | translate
                  }}
                  (*)</label
                >
                <input
                  type="number"
                  min="0"
                  class="form-control"
                  [(ngModel)]="notification.cuando"
                  pInputText
                  [(ngModel)]="notification.cuando"
                  name="cuando"
                  [disabled]="tipoAccesoLectura || notificationLowDate || isEventoCumplidoOrCancelado"
                />
              </div>
              <div class="col-lg-6 col-md-6">
                <label
                  >{{
                    "formacion.datosNotificaciones.unidadMedida.literal"
                      | translate
                  }}
                  (*)</label
                >
                <p-dropdown
                  class="select-form"
                  [(ngModel)]="notification.idUnidadMedida"
                  [options]="comboMeasureUnit"
                  [filter]="true"
                  filterBy="label,labelSinTilde"
                  placeholder="{{ 'general.boton.seleccionar' | translate }}"
                  name="idUnidadMedida"
                  [disabled]="tipoAccesoLectura || notificationLowDate || isEventoCumplidoOrCancelado"
                ></p-dropdown>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6 col-md-6">
                <label>{{
                  "formacion.datosNotificaciones.antesDespues.literal"
                    | translate
                }}</label>
                <p-dropdown
                  class="select-form"
                  [options]="comboAfterBefore"
                  [(ngModel)]="notification.idTipoCuando"
                  [filter]="false"
                  name="idTipoCuando"
                  [disabled]="tipoAccesoLectura || notificationLowDate || isEventoCumplidoOrCancelado"
                ></p-dropdown>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <div class="text-right main-button">
        <button
          pButton
          (click)="restNotification()"
          type="button"
          icon="fa fa-undo"
          iconPos="left"
          label="{{ 'general.boton.restablecer' | translate }}"
          [disabled]="tipoAccesoLectura || notificationLowDate || isEventoCumplidoOrCancelado"
        ></button>
        <button
          pButton
          (click)="saveNotification()"
          [disabled]="
            validateForm() || tipoAccesoLectura || notificationLowDate || isEventoCumplidoOrCancelado
          "
          type="button"
          icon="far fa-save"
          iconPos="left"
          label="{{ 'general.boton.guardar' | translate }}"
        ></button>
      </div>
    </div>
  </div>
  <div class="mt-3 text-right main-button ">
    <button
      (click)="backTo()"
      pButton
      type="button "
      icon="fa fa-angle-left"
      iconPos="left"
      label="{{ 'general.boton.volver' | translate }}"
    ></button>
  </div>
</div>

<div *ngIf="progressSpinner" class="overlay-spinner">
  <div class="loader"></div>
</div>

<p-growl [(value)]="msgs" (onHover)="clear()" life="30000"></p-growl>
<div #main [ngClass]="{'relative' : this.enableSticky}" id="fichaCertificacion">
    <div #parent (scroll)="manageScroll($event, navbar)" style="overflow: scroll;">

        <div id="top"></div>
        <app-migas-de-pan *ngIf="rutas !== null" [rutas]="rutas"></app-migas-de-pan>

        <div *ngIf="tarjetaFija !== null" #navbar [ngClass]="{'absolute' : this.enableSticky}" id="navbar">

            <div class="card" style="z-index: 2;">
                <div class="card-body p-0">
                    <mat-accordion class="example-headers-align" multi>
                        <mat-expansion-panel [disabled]="true">
                            <mat-expansion-panel-header class="h-100" [collapsedHeight]="'auto'"
                                [expandedHeight]="'auto'">
                                <app-tarjeta [image]="tarjetaFija.imagen" [cardTitle]="tarjetaFija.nombre"
                                    [campos]="tarjetaFija.campos" [icon]="tarjetaFija.icono"
                                    [enlaces]="tarjetaFija.enlaces" [fixed]="tarjetaFija.fixed" class="w-100"
                                    (isOpen)="isOpenReceive($event)">
                                </app-tarjeta>
                            </mat-expansion-panel-header>
                            <ng-template matExpansionPanelContent>
                            </ng-template>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
            </div>

        </div>

        <div #content>

            <div *ngFor="let tarj of listaTarjetas; let i = index;">
                <div class="card" [id]="tarj.id">
                    <div class="card-body p-0">

                        <mat-accordion class="example-headers-align" multi>
                            <mat-expansion-panel (opened)="tarj.opened = true" (closed)="tarj.opened = false"
                                [disabled]="tarj.fixed || !tarj.detalle" [expanded]="tarj.opened">
                                <mat-expansion-panel-header class="h-100" [collapsedHeight]="'auto'"
                                    [expandedHeight]="'auto'">
                                    <app-tarjeta [image]="tarj.imagen" [cardTitle]="tarj.nombre" [campos]="tarj.campos"
                                        [icon]="tarj.icono" [enlaces]="tarj.enlaces" [cardOpenState]="tarj.opened"
                                        [fixed]="tarj.fixed" class="w-100">
                                    </app-tarjeta>
                                </mat-expansion-panel-header>
                                <ng-template matExpansionPanelContent>

                                    <div *ngIf="tarj.nombre === 'Datos Generales'">
                                        <div class="form-row padding-interior">
                                            <div class="form-group-interlineado col-lg-6 col-md-6"
                                                style="padding-left: 2px;">
                                                <div class="form-row mb-3">
                                                    <div class="col-md-12 col-lg-12 form-group-interlineado">
                                                        <div *ngFor="let input of inputs">
                                                            <label>{{input.nombre}}</label>
                                                            <input type="text" class="form-control" pInputText
                                                                [placeholder]="input.valor">

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="col-md-12 col-lg-12 form-group-interlineado">
                                                        <div class="form-row">
                                                            <div *ngFor="let campo of campos"
                                                                class="col-md-6 col-lg-6 form-group-interlineado">
                                                                <div>{{campo.nombre}}</div>
                                                                <div>{{campo.valor}}</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group-interlineado col-lg-6 col-md-6">
                                                <div>
                                                    <app-paginador></app-paginador>
                                                </div>
                                                <div>
                                                    <app-tabla-simple [cabeceras]="cabeceras2" [elementos]="elementos2">
                                                    </app-tabla-simple>
                                                </div>
                                                <div>
                                                    <app-paginador [type]="'BOTTOM'"></app-paginador>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card-footer">
                                            <div class="text-right main-button">
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Incidencias"></button>
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Subir fichero"
                                                    (click)="showMsg('success', 'Se ha subido el fichero correctamente', '')"></button>
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Reabrir"
                                                    (click)="showMsg('success', 'Se ha reabierto correctamente', '')"></button>
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Cerrar y Enviar"
                                                    (click)="showMsg('success', 'Se ha cerrado y enviado correctamente', '')"></button>
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Comunicar"
                                                    (click)="showMsg('success', 'Se ha comunicado correctamente', '')"></button>
                                                <button pButton type="button"  icon="far fa-save"  iconPos="left"
                                                    label="Guardar"
                                                    (click)="showMsg('success', 'Se ha guardado correctamente', '')"></button>
                                                <button pButton type="button"  icon="fa fa-undo"  iconPos="left"
                                                    label="Restablecer"
                                                    (click)="showMsg('success', 'Se ha restablecido correctamente', '')"></button>
                                            </div>
                                        </div>

                                    </div>

                                    <div *ngIf="tarj.nombre === 'Facturaciones'">
                                        <app-tabla-resultado [cabeceras]="cabeceras" [elementos]="elementos"
                                            [elementosAux]="elementosAux">
                                        </app-tabla-resultado>

                                        <div class="card-footer">
                                            <div class="text-right main-button">
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Reabrir"
                                                    (click)="showMsg('success', 'Se ha reabierto correctamente', '')"></button>
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Comunicar"
                                                    (click)="showMsg('success', 'Se ha comunicado correctamente', '')"></button>
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Nuevo"></button>
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Restablecer"
                                                    (click)="showMsg('success', 'Se ha restablecido correctamente', '')"></button>
                                                <button pButton type="button"  icon="fa fa-eraser"  iconPos="left"
                                                    label="Guardar"
                                                    (click)="showMsg('success', 'Se ha guardado correctamente', '')"></button>
                                            </div>
                                        </div>
                                    </div>

                                </ng-template>
                            </mat-expansion-panel>
                        </mat-accordion>

                    </div>
                </div>
            </div>

        </div>

    </div>
</div>